/*! For license information please see okxconnect_solana.js.LICENSE.txt */
var OKXConnectSolana;(()=>{var e={3187:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var r=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r&&r,n="URLSearchParams"in r,i="Symbol"in r&&"iterator"in Symbol,o="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,a="ArrayBuffer"in r;if(a)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=g(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=h(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[h(e)]},f.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},f.prototype.set=function(e,t){this.map[h(e)]=l(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),d(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),d(e)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},b.call(v.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(e,n){return new Promise((function(i,s){var c=new v(e,n);if(c.signal&&c.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function h(){u.abort()}u.onload=function(){var e,t,r={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){i(new E(n,r))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},u.open(c.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?u.withCredentials=!0:"omit"===c.credentials&&(u.withCredentials=!1),"responseType"in u&&(o?u.responseType="blob":a&&c.headers.get("Content-Type")&&-1!==c.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof f?c.headers.forEach((function(e,t){u.setRequestHeader(t,e)})):Object.getOwnPropertyNames(n.headers).forEach((function(e){u.setRequestHeader(e,l(n.headers[e]))})),c.signal&&(c.signal.addEventListener("abort",h),u.onreadystatechange=function(){4===u.readyState&&c.signal.removeEventListener("abort",h)}),u.send(void 0===c._bodyInit?null:c._bodyInit)}))}k.polyfill=!0,r.fetch||(r.fetch=k,r.Headers=f,r.Request=v,r.Response=E),t.Headers=f,t.Request=v,t.Response=E,t.fetch=k}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=n.fetch?n:i;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},1705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_METHOD_BATCH_FETCHMSG=t.CONNECT_METHOD_FETCHMSG=t.CONNECT_METHOD_RECEIVE=t.CONNECT_METHOD_UNSUB=t.CONNECT_METHOD_SUB=t.CONNECT_METHOD_PUBLISH=t.CONNECT_METHOD_LOGIN=t.CONNECT_METHOD_PUSH=void 0,t.CONNECT_METHOD_PUSH="push",t.CONNECT_METHOD_LOGIN="login",t.CONNECT_METHOD_PUBLISH="publish",t.CONNECT_METHOD_SUB="subscribe",t.CONNECT_METHOD_UNSUB="unsubscribe",t.CONNECT_METHOD_RECEIVE="receive",t.CONNECT_METHOD_FETCHMSG="fetchMessages",t.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"},5113:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXWalletConnector=void 0;const c=r(9438),u=r(8201),h=r(6106),l=r(6940),d=r(8629),f=r(228),p=s(r(7990)),g=r(6627),y=r(796),m=(0,d.resolveWebSocketImplementation)();t.OKXWalletConnector=class{constructor(e){if(this.events=new f.EventEmitter,this.state=c.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,d.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new h.Storage(u.OKXCONNECTOR_CACHE_KEY+u.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==c.ConnectorState.Connecting}onPayload(e){if(void 0!==e.data){if(p.logDebug("get received data"),p.logDebug(e),"string"==typeof e.data){if("pong"===e.data)return void p.logDebug(`CONNECT: receive pong ${Date.now().toString()}`)}this.events.emit("payload",e.data)}}onClose(e){var t;p.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){const r={id:e,msg:t.toString()};this.events.emit("payload",r)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=c.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return a(this,void 0,void 0,(function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state==c.ConnectorState.Connected||this.state==c.ConnectorState.OnError){if(this.socket){if(this.socket.readyState===WebSocket.OPEN)p.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3);else if(p.logDebug("socket not ready"),this.state==c.ConnectorState.Connected||this.state==c.ConnectorState.OnError){p.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch(e){p.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else if(p.logDebug("socket not exist"),this.state==c.ConnectorState.Connected||this.state==c.ConnectorState.OnError){p.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch(e){p.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else p.logDebug("heart beat close")}))}registOpen(e=this.url,t=!1){if(!(0,d.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,t||p.logDebug("Connection connect:",this.url,(new Date).toUTCString()),this.state=c.ConnectorState.Connecting;new URLSearchParams(e).get("origin");return new Promise(((t,r)=>{const n=new m(e,[]);p.logDebug("Connection connect Begin:",this.url,(new Date).toUTCString()),this.startTimeOutTimer(n),(0,d.hasBuiltInWebSocket)()?(p.logDebug("Add socket error handler"),n.onerror=()=>{r(new Error("socket error")),n.close()}):(p.logDebug("Add socket error handler"),n.on("error",(()=>{r(new Error("socket error")),n.close()}))),n.onopen=()=>{p.logDebug("socket opened"),this.resetTimeOutTimer(c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(n),this.heartbeat(),t(n)}}))}checkMaxRetry(){return p.logDebug("current retry count:",this.retryCount,"of",c.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>3*c.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return a(this,void 0,void 0,(function*(){if(!this.checkMaxRetry()){this.retryCount+=1;let e=this.getNextSelectUrl();return p.logDebug("Connection retry:",e,(new Date).toUTCString()),this.registOpen(e,!0)}p.logDebug("Max Connection retry ",this.retryCount,(new Date).toUTCString())}))}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout((()=>{this.pendingSocket&&this.resetTimeOutTimer(c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)}),this.timeOutLimit)}resetTimeOutTimer(e){var t;if(e==c.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)throw clearTimeout(this.connectionTimeoutTimer),null===(t=this.pendingSocket)||void 0===t||t.close(),this.pendingSocket=void 0,p.reportEvent(y.OKXReportType.LOG,"timeout",this.retryCount.toString()),new Error("socket timeout");this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),u.OKXCONNECTOR_CACHE_KEY)}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%c.OKXCONNECTOR_WS_URL_LIST.length,c.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return a(this,void 0,void 0,(function*(){if("visible"!==document.visibilityState||(p.logDebug(`get changed ${this.state}, ${this.socket}`),this.state!=c.ConnectorState.Connected||void 0!==this.socket));else{p.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch(e){p.logError("regist open failed")}}}))}tryRegistOpen(){return a(this,arguments,void 0,(function*(e=this.url){if(this.connecting)return p.logDebug("tryRegistOpen => connecting state"),new Promise(((e,t)=>{this.events.once("fail",(e=>(p.logDebug("tryRegistOpen => connecting fail listener",e),t(e)))),this.events.once("open",(()=>void 0===this.socket?t(new Error("Connect lost")):e(this.socket)))}));p.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let t=!1;for(;!this.checkMaxRetry()&&!this.socket;)try{p.logDebug("tryRegistOpen => call registOpen, try count:",this.retryCount,t),yield this.registOpen(e,t)}catch(r){p.logDebug("tryRegistOpen => registOpen failed",r),this.retryCount+=1,e=this.getNextSelectUrl(),t=!0}if(p.logDebug("tryRegistOpen => exit while loop",this.retryCount,this.socket),!this.socket&&this.checkMaxRetry())throw p.logDebug("tryRegistOpen => failed to open a socket",this.retryCount,this.socket),this.retryCount=0,this.state=c.ConnectorState.OnError,this.emitError(new Error("tryRegistOpen failed")),new g.OKXConnectError(g.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")}))}connect(){return a(this,void 0,void 0,(function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(e){throw p.logDebug("connect => failed to connect",e),e}}))}disconnect(){return a(this,void 0,void 0,(function*(){return this.state=c.ConnectorState.Disconnected,new Promise(((e,t)=>{void 0!==this.socket?(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer)):e()}))}))}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,r,n){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=i=>{var o;p.logDebug(`<<< get payload ${i}`);let s=(0,l.safeJsonParse)(i);if(s.params&&s.params.data){let a=null===(o=s.params.data)||void 0===o?void 0:o.message;if(a)try{let i=t(a);void 0===i?(p.logDebug("CONNECT: decrypt undefined"),n(e,"Decrypt undefined")):r(e,i)}catch(i){p.logDebug(`CONNECT: decrypt failed: ${i}`),n(e,i.message)}}},this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(p.logDebug(`CONNECT failed: ${t}`),n(e,t.message)):n(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>a(this,void 0,void 0,(function*(){p.logDebug(`CONNECTION @[${(new Date).toUTCString()}] <<<< received e:${t}`);let r=(0,l.safeJsonParse)(t);yield e(r)})),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return a(this,void 0,void 0,(function*(){try{void 0===this.socket&&(p.logDebug(`>>> send payload undefined ${t}`),yield e()),p.logDebug(`CONNECTION @[${(new Date).toUTCString()}]>>> send payload ${(0,l.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,l.safeJsonStringify)(t))}catch(e){this.onError(t.id,e)}}))}getMsgPayloadFromHistory(e){return a(this,void 0,void 0,(function*(){if(void 0===e)return;let t={params:{data:e}},r=(0,l.safeJsonStringify)(e);p.logDebug("get received data from history"),p.logDebug(r),r=(0,l.safeJsonStringify)(t),this.events.emit("payload",r)}))}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>a(this,void 0,void 0,(function*(){p.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> ws opened: `),yield e()})),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}},220:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;const c=r(5113),u=r(1705),h=r(8201),l=r(1709),d=r(9438),f=r(228),p=r(6106),g=r(8629),y=r(4929),m=r(5294),b=r(2617),w=s(r(7990)),v=r(7990),_=r(796),E=r(757);t.ConnectionManager=class{constructor(e=void 0){this.events=new f.EventEmitter,this.connectStorage=new p.Storage(h.OKXCONNECTOR_CACHE_KEY_DAPP+e,h.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new y.SessionCrypto;let t=(0,E.isInTMA)();if((0,v.logDebug)("do init:",t),w.reportLog("connection manager do init"),t){const e=this.getCachedCryptoKeyPair();(0,v.logDebug)("use same pk:",e),this.crypto=new y.SessionCrypto(e)}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new c.OKXWalletConnector(d.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",w.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){this.packageId=Date.now()}saveCryptoKeyPair(e){let t=(0,b.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,h.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){const e=this.connectStorage.getAndDecrypt(h.OKXCONNECTOR_CRYPTO_KEY);if("string"==typeof e){return w.logDebug("get cached crypto key:"),w.logDebug(e),(0,b.safeJsonParse)(e)}return this.connectStorage.clearCache(),null}saveJWTKeyPair(e){var t={publicKey:(0,g.toHexString)(e.publicKey),secretKey:(0,g.toHexString)(e.secretKey)};w.logDebug("save jwt kp");let r=(0,b.safeJsonStringify)(t);w.logDebug(r),this.connectStorage.encryptStoreMsg(r,h.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){const e=this.connectStorage.getAndDecrypt(h.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){w.logDebug("get cached jwt kp:"),w.logDebug(e);let t=(0,b.safeJsonParse)(e);return w.logDebug("save jwt kp"),w.logDebug(t),{publicKey:(0,g.hexToByteArray)(t.publicKey),secretKey:(0,g.hexToByteArray)(t.secretKey)}}return(0,m.generateKeyPair)()}isWalletPKReady(){return w.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return a(this,void 0,void 0,(function*(){return yield(0,m.signJWT)(e,l.OKXCONNECTOR_JWT_SIDE,l.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parsePackage(e){return a(this,arguments,void 0,(function*(e,t=!1){var r,n,i,o,s;if(this.events.emit(e.id,e),!t){yield this.sendACK(e.id,!0);let t=null===(r=this.connectStorage.getItem(h.OKXCONNECTOR_TOKEN_CACHE))||void 0===r?void 0:r.content;if(t){let r=e;(null===(i=null===(n=r.params)||void 0===n?void 0:n.data)||void 0===i?void 0:i.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(s=null===(o=r.params)||void 0===o?void 0:o.data)||void 0===s?void 0:s.messageId,t))}}}))}restoreConnect(e){return a(this,void 0,void 0,(function*(){if(w.reportLog("connection manager restore connection"),w.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw new Error("CONNECTION: invalid topic");w.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,h.OKXCONNECTOR_TOKEN_CACHE),w.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)}))}getConnectInfo(){var e=(0,g.generateTopic)();w.logDebug(`generate topic token: ${e}`),w.reportLog("connection manager generate connection info"),this.currentTopic=e;return{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return a(this,arguments,void 0,(function*(e=!1){this.timeLog=(new Date).getTime(),(0,v.logDebug)("ConnectTime---enter->",this.timeLog),w.reportLog("connection manager begin connect");let t=this.connectStorage.getItem(h.OKXCONNECTOR_TOKEN_CACHE);var r=this.currentTopic;if(w.logDebug(`generate topic token: ${r}`),e){null!=t&&(w.logDebug(`read last connect id: ${t}`),r=t.content);var n=this.connectStorage.getItem(h.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);n&&(this.connectedWalletPK=n.content,(0,v.logDebug)(`connectionManager connect() this.connectedWalletPK : ${this.connectedWalletPK}`)),w.reportLog("connection manager do restore connection")}if(e){const e=this.getCachedCryptoKeyPair();e&&(this.crypto=new y.SessionCrypto(e))}w.logDebug(`use crypto client id: ${this.crypto.stringifyKeypair().publicKey}`),this.connectStorage.saveContent(r,h.OKXCONNECTOR_TOKEN_CACHE);var i=yield this.makeJWT(r);return w.logDebug(`generate jwt token: ${i}`),this.connectStorage.saveContent(i,"jwt"),new Promise(((e,t)=>{this.connector.onOpen((()=>a(this,void 0,void 0,(function*(){w.logDebug("1. connector on open"),w.reportLog("1. connect ws open");const n=(new Date).getTime();(0,v.logDebug)("ConnectTime---open->",n-this.timeLog),this.events.once(this.packageId.toString(),(n=>a(this,void 0,void 0,(function*(){if(n&&n.error){w.logError("failed when login"),w.reportLog("2. connect login failed"),yield this.connector.disconnect();var i=new Error;i.message=n.error.message,i.name=n.error.code.toString(),t(i)}this.refreshPackageId(),this.events.once(this.packageId.toString(),(n=>a(this,void 0,void 0,(function*(){if(n&&n.error){w.logError("failed when subscribe"),w.reportLog("3. connect subscribe failed"),yield this.connector.disconnect();var i=new Error;i.message=n.error.message,i.name=n.error.code.toString(),t(i)}this.refreshPackageId(),w.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`),w.reportLog("4. subscribe callback then send fetch");const o=(new Date).getTime();(0,v.logDebug)("ConnectTime--subscribe callback->",o-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),r),e()})))),w.logDebug(`3. login callback then send subscribe: ${this.packageId}`),w.reportLog("3. connect subscribe failed");const o=(new Date).getTime();(0,v.logDebug)("ConnectTime---login callback->",o-this.timeLog),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("ConnectionManager connect error",e),t(e)}))}))),{id:this.packageId.toString(),jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_SUB,params:{topic:r}})})))),w.logDebug("2. login called"),w.reportLog("2. connection manager connect call login"),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("ConnectionManager connect error",e),t(e)}))}))),{id:this.packageId.toString(),jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_LOGIN,params:{token:i}}),this.connector.addPackageParse((e=>{var t;if(w.logDebug("connect: parse package"),w.logDebug(e),!("params"in e)||!("data"in e.params))return void this.parsePackage(e,!0);let r=null===(t=e.params.data)||void 0===t?void 0:t.message;if(void 0!==r){r=r.replace(/'/g,'"');let e=(0,b.safeJsonParse)(r);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,w.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,h.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===u.CONNECT_METHOD_RECEIVE)}))})))),this.connector.connect().catch((e=>{(0,v.logDebug)("ConnectionManager connect error",e),t(e)}))}))}))}disconnect(){return a(this,arguments,void 0,(function*(e=!1){yield this.connector.disconnect(),w.reportLog("connect disconnect"),this.connectStorage.clearCache(h.OKXCONNECTOR_TOKEN_CACHE),e||(this.connectStorage.clearCache(h.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.connectedWalletPK="",(0,v.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${this.connectedWalletPK}`))}))}addListener(e,t,r){this.connector.addListener((0,b.safeJsonStringify)(e),(e=>{if(e=e.replace(/'/g,'"'),w.logDebug(`addListener ===> ${e}`),void 0!==e){var t=(0,b.safeJsonParse)(e),r=t.message;let n;return r.trimStart().startsWith("{")?n=r:(t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,h.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),w.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),w.logDebug(`this.cryptoKey  addListener   ${(0,g.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair())),n=this.crypto.decrypt(r,this.connectedWalletPK)),w.logDebug(`addListener ===> ${n}`),n}}),t,r)}sendRaw(e){return a(this,void 0,void 0,(function*(){w.logDebug(`message send =====> ${e}`),w.reportLog("connect send raw msg");let t=e;w.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let r=this.connectStorage.getItem(h.OKXCONNECTOR_TOKEN_CACHE);w.logDebug(`message send =====topic>>>> ${null==r?void 0:r.content}`),this.refreshPackageId();const n={id:this.packageId.toString(),method:u.CONNECT_METHOD_PUBLISH,jsonrpc:d.CONNECT_JSONRPC_VER,params:{message:{topic:null==r?void 0:r.content,message:t,ttl:d.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>a(this,void 0,void 0,(function*(){e&&e.error?w.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&w.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),n),this.packageId}))}send(e){return a(this,arguments,void 0,(function*(e,t=d.OKXCONNECTOR_MESSAGE_TTL){if(w.logDebug(`message send =====> ${e}`),w.reportLog("connect send msg"),!this.isWalletPKReady())throw new Error("connection not finish");let r=this.crypto.encrypt(e,this.connectedWalletPK);w.logDebug(`message send =====encrypt message.length>>>> ${r.length}`),w.reportEvent(_.OKXReportType.LOG,"msg_size",r.length.toString());let n=this.connectStorage.getItem(h.OKXCONNECTOR_TOKEN_CACHE);w.logDebug(`message send =====topic>>>> ${null==n?void 0:n.content}`),this.refreshPackageId();const i={id:this.packageId.toString(),method:u.CONNECT_METHOD_PUBLISH,jsonrpc:d.CONNECT_JSONRPC_VER,params:{message:{topic:null==n?void 0:n.content,message:r,ttl:t}}};return this.events.once(this.packageId.toString(),(e=>a(this,void 0,void 0,(function*(){e&&e.error?w.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&w.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),i),this.packageId}))}sendACK(e,t){return a(this,arguments,void 0,(function*(e,t,r=void 0){if(!0===t){const t={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){const t={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}))}sendReceive(e,t,r){return a(this,void 0,void 0,(function*(){const n={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:r}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),n)}))}sendConnectSessionInfo(e,t,r,n){return a(this,void 0,void 0,(function*(){}))}sendFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,(function*(){this.events.once(e,(e=>a(this,void 0,void 0,(function*(){var r,n;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let r=o[e];if(r&&r.topic==t){let e=r.messageId;w.reportLog("5. get fetch result"),yield this.connector.getMsgPayloadFromHistory(r),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else w.logDebug(`CONNECT: get error rsp ${null===(r=e.error)||void 0===r?void 0:r.code} : ${null===(n=e.error)||void 0===n?void 0:n.message}`)})))),w.logDebug("5. send fetch more"),w.reportLog("5. send fetch more");const r=(new Date).getTime();(0,v.logDebug)("ConnectTime---5->",r-this.timeLog);const n={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return w.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),n)}))}cleanCache(){return a(this,void 0,void 0,(function*(){w.reportLog("connection cache clean called"),this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(h.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let r=(0,b.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(r,h.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(h.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t){return(0,b.safeJsonParse)(t)}}getCurrentConnectionReady(){return this.isWalletPKReady()}}},9438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorState=t.CONNECT_JSONRPC_VER=t.OKXCONNECTOR_MESSAGE_TTL=t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=t.OKXCONNECTOR_WS_URL_LIST=t.OKXCONNECTOR_WS_URL_IDX_KEY=t.OKXCONNECTOR_WS_URL_3=t.OKXCONNECTOR_WS_URL_2=t.OKXCONNECTOR_WS_URL_1=t.EVENT_EMITTER_MAX_LISTENERS=void 0,t.EVENT_EMITTER_MAX_LISTENERS=10,t.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.okx.ac/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_3="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",t.OKXCONNECTOR_WS_URL_LIST=[t.OKXCONNECTOR_WS_URL_1,t.OKXCONNECTOR_WS_URL_2,t.OKXCONNECTOR_WS_URL_3],t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},t.OKXCONNECTOR_MESSAGE_TTL=3e5,t.CONNECT_JSONRPC_VER="2.0",t.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}},3701:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=void 0;const i=r(2617),o=r(7990),s=r(6627),a=r(6940),c=r(6940),u=r(1178),h=r(757);t.Engine=class{constructor(e){this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=e,(0,o.getDefaultReporter)().beginReport(),this.connectionManager.addListener("sdk_response",((e,t)=>{var r=(0,i.safeJsonParse)(t);(0,o.logDebug)(`Engine ==>> addListener ==> success ==> ${r}`),this.handleResponse(e,r)}),(function(){}))}addDisconnectListener(e){this.disconnectListener.push(e)}setSessionConnectingListener(e){this.sessionConnectingListener=e}disconnect(){(0,o.logDebug)("Engine ==>> disconnect"),this.pendingRequests.clear()}getRequestId(){const e=Date.now().toString();return(0,o.logDebug)("Engine ==>> getRequestId ==>",e),e}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,t,r,s){return n(this,void 0,void 0,(function*(){(0,o.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));const r=this.getRequestId();try{let n=yield this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:r})),s);this.connectionManager.events.once(n.toString(),(e=>{var r;(0,o.logDebug)(`Engine ==> send => onAck => ${(0,i.safeJsonStringify)(e)}`),e&&e.result&&(null===(r=t.onAck)||void 0===r||r.call(t))})),t.resolve&&this.bindRequestForPromise(r,t.resolve)}catch(e){return Promise.reject(e)}}))}sendSession(e){return n(this,void 0,void 0,(function*(){(0,o.logDebug)("[Connect] sendSession called:",e);const t=this.getRequestId();let r={method:"session_info",params:{sessionInfo:e}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},r),{requestId:t})))}))}handleResponse(e,t){if((0,o.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,i.safeJsonStringify)(t)}`,e),"requestId"in t){(0,o.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId;const r=this.pendingRequests.get(e);r?((0,o.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",r),r(t),this.pendingRequests.delete(e)):((0,o.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method?(this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],this.disconnect()):"session_connecting"===t.method&&((0,o.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener"),this.sessionConnectingListener&&((0,o.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener not null"),this.sessionConnectingListener(),this.sessionConnectingListener=void 0)))}}restoreconnect(e,t){return n(this,void 0,void 0,(function*(){var r;yield null===(r=this.connectionManager)||void 0===r?void 0:r.restoreConnect(e.topic),t(e)}))}conect(e,t,r){return n(this,void 0,void 0,(function*(){var n,i;const u=this.connectionManager.getConnectInfo(),h=this.getRequestId();let l=null!==(n=t.openUniversalUrl)&&void 0!==n&&n;const d={protocolVer:Number(s.tonConnectSdkVersion),topic:u.channelId,clientId:u.clientId,requestId:h,dAppInfo:t.dappInfo,requests:e},f=JSON.stringify(d),p=(new TextEncoder).encode(f),g=btoa(String.fromCharCode(...p)),y=`${s.standardDeeplink}?param=${g}`;(0,o.logDebug)("engine ==>> connect ==>>deeplinkUrl:",y);const m=(0,c.isIos)();(0,o.logDebug)(`engine ==>> connect ==>>isIOS: ${m}   openUniversalLink: ${l}`),m&&l&&((0,o.logDebug)("bridge-provider ==>> connect_3"),(0,a.openOKXDeeplinkWithFallback)(y)),yield null===(i=this.connectionManager)||void 0===i?void 0:i.disconnect(!1),this.bindRequestForPromise(h,(e=>{let n=this.onConnect(e,t,u.channelId);r(n,e)}));try{yield this.connectionManager.connect()}catch(e){throw(0,o.logDebug)("Engine conect error",e),e}return!m&&l&&((0,o.logDebug)("bridge-provider ==>> connect_4"),(0,a.openOKXDeeplinkWithFallback)(y)),{connectInfo:u,deeplinkUrl:(0,a.getUniversalLink)(y)}}))}onConnect(e,t,r){if("connect"==e.method){let n=(0,u.buildNameSpacesByConnectResponse)(e);if(n){return{topic:r,sessionConfig:t,namespaces:n}}}return null}universalConnect(e,t,r){return n(this,void 0,void 0,(function*(){return new Promise(((i,l)=>n(this,void 0,void 0,(function*(){var n,d,f,p;try{(0,o.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,o.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(t));let y=[];e.forEach((e=>{let t=e.name;(t.startsWith("requestAccounts")||t.startsWith("ton"))&&y.push(e)})),(0,o.logDebug)("engine universalConnect universalRequest :",JSON.stringify(y));const m=this.connectionManager.getConnectInfo(),b=this.getRequestId();let w=null!==(n=t.openUniversalUrl)&&void 0!==n&&n;const v={protocolVer:Number(s.tonConnectSdkVersion),topic:m.channelId,clientId:m.clientId,requestId:b,dAppInfo:t.dappInfo,requests:y,redirect:null!==(d=null==t?void 0:t.redirect)&&void 0!==d?d:"none"},_=(0,h.encodeConnectParams)(v);v.redirect=null!==(f=null==t?void 0:t.redirect)&&void 0!==f?f:"none",(0,o.logDebug)("engine universalConnect ==>>universalConnectRequest:",JSON.stringify(v));var g="";w&&(g=(0,h.getOKXLink)(v,t.useMini,t.tmaReturnUrl),(0,o.logDebug)("engine universalConnect ==>>openOKXLink:",g));const E=()=>t.useMini?(0,h.openOKXTMAWalletlinkWithFallback)(g):(0,a.useShortLink)()?(0,a.openOKXUniversalLink)(g):(0,a.openOKXDeeplinkWithFallback)(g);(0,o.logDebug)("engine universalConnect ==>>openOKXLink:",g);const S=(0,c.isIos)();S&&w&&((0,o.logDebug)(`engine universalConnect ==>>isIOS: ${S}   openUniversalLink: ${w}`),E()),yield null===(p=this.connectionManager)||void 0===p?void 0:p.disconnect(!1),this.bindRequestForPromise(b,(e=>{var r,n,a,c;try{let h=e;if("connect"==h.method){(0,o.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(h));let e=(0,u.buildNameSpacesByConnectResponse)(h);if(!e)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);{let s;(null===(n=null===(r=h.payload)||void 0===r?void 0:r.responses)||void 0===n?void 0:n[0])&&"walletName"in h.payload.responses[0]&&(s=h.payload.responses[0].walletName);let c={topic:m.channelId,sessionConfig:t,namespaces:e,wallet:Object.assign(Object.assign({},null===(a=h.payload)||void 0===a?void 0:a.wallet),{walletName:s})},u=h.payload.responses.find((e=>"requestAccounts"===e.name));u&&u.connectRequestMethods&&(c.signResponse=u.connectRequestMethods),(0,o.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(c)),i(c)}}else if("connect_error"==h.method&&(null===(c=h.payload)||void 0===c?void 0:c.code))throw new s.OKXConnectError(h.payload.code)}catch(e){l(e)}}));try{yield this.connectionManager.connect()}catch(e){throw(0,o.logDebug)("Engine universalConnect error",e),e}if(!S&&w&&E(),(0,o.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",r),this.sendSession(_),r){const e={connectRequest:v,redirect:t.redirect,tmaReturnUrl:t.tmaReturnUrl};(0,o.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),r(e)}}catch(e){(0,o.logDebug)("Engine universalConnect catch error",e),l(e)}}))))}))}}},9144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Engine=t.WalletConnectionManager=t.ConnectionManager=t.OKXWalletConnector=void 0;var n=r(5113);Object.defineProperty(t,"OKXWalletConnector",{enumerable:!0,get:function(){return n.OKXWalletConnector}});var i=r(220);Object.defineProperty(t,"ConnectionManager",{enumerable:!0,get:function(){return i.ConnectionManager}});var o=r(8199);Object.defineProperty(t,"WalletConnectionManager",{enumerable:!0,get:function(){return o.WalletConnectionManager}});var s=r(3701);Object.defineProperty(t,"Engine",{enumerable:!0,get:function(){return s.Engine}});var a=r(6106);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return a.Storage}})},5294:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MULTICODEC_ED25519_LENGTH=t.MULTICODEC_ED25519_HEADER=t.MULTICODEC_ED25519_BASE=t.MULTICODEC_ED25519_ENCODING=t.DID_METHOD=t.DID_PREFIX=t.DID_DELIMITER=t.KEY_PAIR_SEED_LENGTH=t.DATA_ENCODING=t.JSON_ENCODING=t.JWT_ENCODING=t.JWT_DELIMITER=t.JWT_IRIDIUM_TYP=t.JWT_IRIDIUM_ALG=t.JWTHeaderType=void 0,t.generateKeyPair=function(){return d.default.sign.keyPair()},t.decodeJSON=g,t.encodeJSON=y,t.encodeIss=m,t.decodeIss=b,t.encodeSig=w,t.decodeSig=v,t.encodeData=_,t.decodeData=function(e){var r,n;const i=(0,p.okxtoString)(e,t.DATA_ENCODING).split(t.JWT_DELIMITER),o=g(null!==(r=i[0])&&void 0!==r?r:"{}"),s=g(null!==(n=i[1])&&void 0!==n?n:"{}");return{header:o,payload:s}},t.encodeJWT=E,t.decodeJWT=S,t.signJWT=function(e,r,n,i){return a(this,arguments,void 0,(function*(e,r,n,i,o=Math.floor(Date.now())){const s={alg:t.JWT_IRIDIUM_ALG,typ:t.JWT_IRIDIUM_TYP},a={iss:m(i.publicKey),sub:e,aud:r,act:"authenticate user",iat:o,exp:o+n},c=_({header:s,payload:a});f.logDebug(`get sec kp: ${i.secretKey} {${i.secretKey.length}}`);return E({header:s,payload:a,signature:d.default.sign.detached(c,i.secretKey)})}))},t.verifyJWT=function(e){return a(this,void 0,void 0,(function*(){const{header:r,payload:n,data:i,signature:o}=S(e);if(r.alg!==t.JWT_IRIDIUM_ALG||r.typ!==t.JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const s=b(n.iss);return u.verify(s,i,o)}))};const u=s(r(4904)),h=r(2617),l=r(8629),d=c(r(8947)),f=s(r(7990)),p=r(9954);function g(e){return(0,h.safeJsonParse)((0,p.okxtoString)((0,p.okxfromString)(e,t.JWT_ENCODING),t.JSON_ENCODING))}function y(e){return(0,p.okxtoString)((0,p.okxfromString)((0,h.safeJsonStringify)(e),t.JSON_ENCODING),t.JWT_ENCODING)}function m(e){f.logDebug(`publicKey: ${(0,l.toHexString)(e)}`);var r=(0,p.okxtoString)(e,t.MULTICODEC_ED25519_ENCODING);return[t.DID_PREFIX,t.DID_METHOD,r].join(t.DID_DELIMITER)}function b(e){const[r,n,i]=e.split(t.DID_DELIMITER);if(r!==t.DID_PREFIX||n!==t.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(void 0===i)throw new Error("multicodec is undefined");const o=(0,p.okxfromString)(i,t.MULTICODEC_ED25519_ENCODING);if(void 0===o||o.length!==t.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return o}function w(e){return(0,p.okxtoString)(e,t.JWT_ENCODING)}function v(e){return(0,p.okxfromString)(e,t.JWT_ENCODING)}function _(e){return(0,p.okxfromString)([y(e.header),y(e.payload)].join(t.JWT_DELIMITER),t.DATA_ENCODING)}function E(e){return[y(e.header),y(e.payload),w(e.signature)].join(t.JWT_DELIMITER)}function S(e){var r,n,i;const o=e.split(t.JWT_DELIMITER);return{header:g(null!==(r=o[0])&&void 0!==r?r:"{}"),payload:g(null!==(n=o[1])&&void 0!==n?n:"{}"),signature:v(null!==(i=o[2])&&void 0!==i?i:"{}"),data:(0,p.okxfromString)(o.slice(0,2).join(t.JWT_DELIMITER),t.DATA_ENCODING)}}t.JWTHeaderType="dapp",t.JWT_IRIDIUM_ALG="EdDSA",t.JWT_IRIDIUM_TYP="JWT",t.JWT_DELIMITER=".",t.JWT_ENCODING="base64url",t.JSON_ENCODING="utf8",t.DATA_ENCODING="utf8",t.KEY_PAIR_SEED_LENGTH=32,t.DID_DELIMITER=":",t.DID_PREFIX="did",t.DID_METHOD="key",t.MULTICODEC_ED25519_ENCODING="base58btc",t.MULTICODEC_ED25519_BASE="z",t.MULTICODEC_ED25519_HEADER="K36",t.MULTICODEC_ED25519_LENGTH=32},1709:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_JWT_TTL=t.OKXCONNECTOR_JWT_WALLET_SIDE=t.OKXCONNECTOR_JWT_SIDE=void 0,t.OKXCONNECTOR_JWT_SIDE="wallet",t.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",t.OKXCONNECTOR_JWT_TTL=864e5},1178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildNameSpacesByConnectResponse=function(e){return i(e)},t.buildRequestAccountNameSpacesByConnectResponse=i;const n=r(7990);function i(e){let t={};(0,n.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse>>",JSON.stringify(e));let r=e.payload.responses.find((e=>"requestAccounts"===e.name));const i=e.payload.responses.find((e=>"ton_addr"===e.name)),o=e.payload.responses.find((e=>"ton_proof"===e.name));if(i&&!r){(0,n.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=i.address;e="ton:"+i.network+":"+e;let t={ton_addr:i};o&&(t.ton_proof=o),r={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:t}]}}return(0,n.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(r)),r.accounts.forEach((e=>{var r=[],i=[];e.addresses.forEach((e=>{var t=e.split(":");if((0,n.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",t.length),t.length>=3){let o=t.slice(0,2).join(":");r.push(o),i.push(e),(0,n.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",o,"addressItem:",e)}})),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),t[e.namespace]={chains:r,accounts:i,methods:e.methods,extra:e.extra,payload:e.data},(0,n.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(t))})),t}},6106:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;const c=r(8201),u=a(r(8947)),h=r(8629),l=r(6940),d=s(r(7990)),f=r(6940),p=r(1396);class g{constructor(e,t=void 0){const r=(0,h.resolveLocalStorage)();d.logDebug("------ update before cache ------"),t&&this.checkAndUpgradeCache(t,e),this.storeKey="",this.cipherIV="",this.subKey=e,d.logDebug("--------get current local storage --------"),d.logDebug(r);const n=r.getItem(g.cacheKey+e);if(null==n)return d.logDebug("with no cache"),void(this.cache={});if(d.logDebug(n),(null==n?void 0:n.length)>0){var i=(0,l.safeJsonParse)(n);this.cache=i}d.logDebug(`get cache obj: ${this.cache}`),void 0!==this.cache&&null!=this.cache||(this.cache={})}checkAndUpgradeCache(e,t){if(e&&e.length>0&&t&&t.length>0){d.logDebug("--------get current local storage --------"),d.logDebug(localStorage);const r=localStorage.getItem(g.cacheKey+e);if(null==r)return void d.logDebug("no pre cache content");d.logDebug(r),(null==r?void 0:r.length)>0&&(d.logDebug("write in cache content: ",e,"->",t),localStorage.setItem(g.cacheKey+t,r),d.logDebug("clean in cache content: ",e),localStorage.removeItem(g.cacheKey+e))}else d.logDebug("no pre cache key:",e)}saveContent(e,t,r="-"){let n={id:r,timestamp:Date.now().toString(),content:e};this.saveItem(n,t)}saveItem(e,t){let r=g.cacheKey+this.subKey;const n=(0,h.resolveLocalStorage)();d.logDebug(this.cache),d.logDebug(`get cache obj: ${this.cache}, ${t}, ${e}`),this.cache[t]=e;let i=(0,l.safeJsonStringify)(this.cache);d.logDebug(`STORAGE: ${t} @ ${this.cache}`),n.setItem(r,i)}getItem(e){return d.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,r,n;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let i=null===(t=this.getItem(c.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;i||(i=(0,h.toHexString)(u.default.randomBytes(24)),this.saveContent(i,c.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let o=null===(r=this.getItem(c.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===r?void 0:r.content;o||(o=(0,h.toHexString)(u.default.randomBytes(32)),this.saveContent(o,c.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let s=null===(n=this.getItem(c.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===n?void 0:n.content;if(!s){let e=u.default.randomBytes(16);s=(0,h.toHexString)(e),this.saveContent(s,c.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=s,this.storeKey=(0,p.PBKDF2)(o,i,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,f.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let r=this.getCachedPBKDF2InfoKey();(0,f.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var n=p.AES.encrypt(e,r.pw).toString();this.saveContent(n,t),(0,f.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,f.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,f.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let r=p.AES.decrypt(t.content,e.pw).toString(p.enc.Utf8);return(0,f.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),r}return null}clearCache(e=void 0){if(void 0===e){this.cache={};let e=g.cacheKey+this.subKey;localStorage.setItem(e,"")}else{let t=g.cacheKey+this.subKey;const r=(0,h.resolveLocalStorage)();d.logDebug(this.cache),this.cache[e]=null;let n=(0,l.safeJsonStringify)(this.cache);d.logDebug(`STORAGE: clean key ${e} @ ${this.cache}`),r.setItem(t,n)}}}t.Storage=g,g.cacheKey="OKXStorageKey"},8201:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_STORAGE_CIPHER_METHOD=t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=t.OKXCONNECTOR_STORAGER_CRYPTO_SALT=t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=t.OKXCONNECTOR_TON_KEY=t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=t.OKXCONNECTOR_TOKEN_CACHE=t.OKXCONNECTOR_JWT_KEY=t.OKXCONNECTOR_SESSION_PREFIX_KEY=t.OKXCONNECTOR_CRYPTO_KEY=t.OKXCONNECTOR_CACHE_KEY_DAPP=t.OKXCONNECTOR_CACHE_KEY=void 0,t.OKXCONNECTOR_CACHE_KEY="ck",t.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",t.OKXCONNECTOR_CRYPTO_KEY="cck_k",t.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",t.OKXCONNECTOR_JWT_KEY="cjk_k",t.OKXCONNECTOR_TOKEN_CACHE="ct",t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",t.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",t.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",t.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc"},4745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManagerEvent=t.WalletConnectionManagerTopicInfoCacheKey=void 0,t.WalletConnectionManagerTopicInfoCacheKey="wcmtic",t.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}},8199:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return o(t,e),t}),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManager=void 0;const c=r(5113),u=r(1705),h=r(8201),l=r(1709),d=r(9438),f=r(4745),p=r(228),g=r(6106),y=r(8629),m=r(4929),b=r(5294),w=r(2617),v=s(r(7990)),_=r(7990),E=r(6940);t.WalletConnectionManager=class{constructor(){this.events=new p.EventEmitter,this.communicateEvents=new p.EventEmitter,v.logDebug("connect manager construct"),this.connectStorage=new g.Storage(h.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new c.OKXWalletConnector(d.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(e=0){this.packageId=Date.now()+e}saveCryptoKeyPair(e,t){let r=(0,w.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(r,h.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){const t=this.connectStorage.getAndDecrypt(h.OKXCONNECTOR_CRYPTO_KEY+e);if("string"==typeof t){return v.logDebug("get cached crypto key:"),v.logDebug(t),(0,w.safeJsonParse)(t)}return this.connectStorage.clearCache(),null}saveJWTKeyPair(e){var t={publicKey:(0,y.toHexString)(e.publicKey),secretKey:(0,y.toHexString)(e.secretKey)};v.logDebug("save jwt kp");let r=(0,w.safeJsonStringify)(t);v.logDebug(r),this.connectStorage.encryptStoreMsg(r,h.OKXCONNECTOR_JWT_KEY),v.logDebug("after save jwt kp")}getCachedJWTKeyPair(){const e=this.connectStorage.getAndDecrypt(h.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){v.logDebug("get cached jwt kp:"),v.logDebug(e);let t=(0,w.safeJsonParse)(e);return v.logDebug("save jwt kp"),v.logDebug(t),{publicKey:(0,y.hexToByteArray)(t.publicKey),secretKey:(0,y.hexToByteArray)(t.secretKey)}}return(0,b.generateKeyPair)()}isTopicPublicKeyExist(e){return v.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return a(this,void 0,void 0,(function*(){return yield(0,b.signJWT)(e,l.OKXCONNECTOR_JWT_WALLET_SIDE,l.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parseInternalMsg(e){try{let t=(0,w.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0){return(0,E.base64decode)(t,!0).toString()}}catch(e){v.logError("parse internal msg",e)}}updateClientId(e,t){let r=this.sessionCryptoInfoMap.get(e);if((0,_.logDebug)("updateClientId",r,e,t),r&&t&&t.length>0){if(r.cid){let n=(0,y.getLastSixMd5Hash)(t);r.cid==n?r.dappPublicKey=t:v.logError("cid check failed",r,e,t)}else r.dappPublicKey=t;this.syncCacheSessionInfo()}return!1}parsePackage(e,t){return a(this,arguments,void 0,(function*(e,t,r=!1){var n,i,o,s,a,c,u,h,l,d,f;this.events.emit(t.id,t);let p=this.sessionCryptoInfoMap.get(e);if(v.logDebug("get sessionInfo for decrypt topic:",e),v.logDebug("get sessionInfo for decrypt:",t.id,e,p,this.sessionCryptoInfoMap),p&&t.params.data&&(null===(n=t.params.data)||void 0===n?void 0:n.message))if(null===(i=t.params.data)||void 0===i?void 0:i.isInternalData){let e=null===(o=t.params.data)||void 0===o?void 0:o.message,r=null===(s=t.params.data)||void 0===s?void 0:s.topic,n=this.parseInternalMsg(e);(0,_.logDebug)("parse internal origin: ",n),n&&n.length>0&&this.communicateEvents.emit("origin",n,r)}else try{let r=null===(a=t.params.data)||void 0===a?void 0:a.message;if(r.trimStart().startsWith("{")){let t=(0,w.safeJsonParse)(r);if(t.method){if("session_info"==t.method){let r=t.params.sessionInfo,n=(0,E.base64decode)(r,!1);(0,_.logDebug)("wallet connection manager requset base64Content:",n),(0,_.logDebug)("base64Content:"+n);let i=n.toObject();this.updateClientId(e,i.clientId)}(0,_.logDebug)("<<< parse raw msg:",e,t),this.communicateEvents.emit(e,r)}}else{let r=p.crypto.decryptWallet(null===(c=t.params.data)||void 0===c?void 0:c.message,p.dappPublicKey);(0,_.logDebug)("<<< receive msg:",e,r),this.communicateEvents.emit(e,r)}}catch(r){let n=p.crypto.decryptWallet(null===(u=t.params.data)||void 0===u?void 0:u.message,p.dappPublicKey);(0,_.logDebug)("<<< receive msg:",e,n),this.communicateEvents.emit(e,n)}if(!r&&(yield this.sendACK(t.id,!0),e)){let r=t;(null===(l=null===(h=r.params)||void 0===h?void 0:h.data)||void 0===l?void 0:l.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(f=null===(d=r.params)||void 0===d?void 0:d.data)||void 0===f?void 0:f.messageId,e))}}))}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(f.WalletConnectionManagerTopicInfoCacheKey);if(v.logDebug("get cached sessionInfos:",e),e){let t=(0,w.safeJsonParse)(e);for(let e in t){let r=t[e];v.logDebug("make topicItem:",r);let n={topic:e,crypto:new m.SessionCrypto({publicKey:r.cryptoKeyPair.publicKey,secretKey:r.cryptoKeyPair.secretKey}),dappPublicKey:r.dappPublicKey,cid:r.cid};this.sessionCryptoInfoMap.set(e,n)}}v.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[t,r]of this.sessionCryptoInfoMap)v.logDebug("for each Keys",t),r&&(e[t]={cryptoKeyPair:r.crypto.stringifyKeypair(),dappPublicKey:r.dappPublicKey,cid:r.cid});let t=(0,w.safeJsonStringify)(e);v.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,f.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t,r=!0){let n=t.dappPublicKey,i=[];for(let[e,t]of this.sessionCryptoInfoMap)v.logDebug("for each Keys",e),t.dappPublicKey==n&&(v.logDebug("duplicated dapp public key:",e,n),i.push(e));for(let[e,t]of this.sessionCryptoInfoMap)i.includes(e)&&this.sessionCryptoInfoMap.delete(e);return v.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),v.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),r&&this.syncCacheSessionInfo(),i}appendTopic(e,t,r){return a(this,void 0,void 0,(function*(){return(0,_.logDebug)("4.1. get append Topic:",e),new Promise(((n,i)=>a(this,void 0,void 0,(function*(){if(!this.isLogined){var o=new Error;return o.message="connection is not logined",o.name="append error",void i(o)}let s={topic:e,crypto:new m.SessionCrypto,dappPublicKey:t||"",cid:r},a=this.cacheSessionInfo(e,s,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),v.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`),v.reportLog("5. subscribe callback then fetch append message");const c=(new Date).getTime();(0,_.logDebug)("Append --subscribe callback->",c-this.timeLog),n(a)}))))}))}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return a(this,void 0,void 0,(function*(){this.timeLog=(new Date).getTime(),(0,_.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog),v.reportLog("wallet connect connect called");let e=Date.now().toString();var t=yield this.makeJWT(e);return v.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise(((e,r)=>{this.inLogin=!0,this.connector.onOpen((()=>a(this,void 0,void 0,(function*(){v.logDebug("1. connector on open"),v.reportLog("1. wallet connect connect on open");const n=(new Date).getTime();(0,_.logDebug)("ConnectTime---open->",n-this.timeLog),this.events.once(this.packageId.toString(),(t=>a(this,void 0,void 0,(function*(){if(t&&t.error){v.logError("failed when login"),yield this.connector.disconnect();var n=new Error;n.message=t.error.message,n.name=t.error.code.toString(),r(n)}else this.isLogined=!0,e(),v.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),v.reportLog("3. wallet connect connect subscribe cached topics"),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})))),v.logDebug("2. login called"),v.reportLog("2. wallet connect login called"),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_LOGIN,params:{token:t}})})))),this.connector.connect().catch((e=>{(0,_.logDebug)("WalletConnectionManager connect error",e),r(e)})),this.connector.addPackageParse((e=>{var t,r;v.logDebug("connect: parse package"),v.logDebug(e),"params"in e&&"data"in e.params?(null===(t=e.params.data)||void 0===t?void 0:t.topic)&&this.parsePackage(null===(r=e.params.data)||void 0===r?void 0:r.topic,e,e.method===u.CONNECT_METHOD_RECEIVE):this.parsePackage("",e,!0)}))}))}))}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,y.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return a(this,arguments,void 0,(function*(e=!1){yield this.connector.disconnect(),this.connectStorage.clearCache(h.OKXCONNECTOR_TOKEN_CACHE),e||this.connectStorage.clearCache(h.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)}))}send(e,t){return a(this,arguments,void 0,(function*(e,t,r=!1,n=d.OKXCONNECTOR_MESSAGE_TTL,i=!1){var o,s;if(v.logDebug(`message send =====> ${t}`),!this.isTopicPublicKeyExist(e))throw new Error("connection not finish");let c,h=null===(o=this.sessionCryptoInfoMap.get(e))||void 0===o?void 0:o.dappPublicKey,l=null===(s=this.sessionCryptoInfoMap.get(e))||void 0===s?void 0:s.crypto;if(i&&(c={message:t}),l&&h&&!i){c={message:l.encryptWallet(t,h)}}if(c){r&&l&&(c.clientId=(0,y.toHexString)(l.keyPair.publicKey)),this.refreshPackageId();const t={id:this.packageId.toString(),method:u.CONNECT_METHOD_PUBLISH,jsonrpc:d.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:(0,w.safeJsonStringify)(c),ttl:n}}};return this.events.once(this.packageId.toString(),(e=>a(this,void 0,void 0,(function*(){e&&e.error?v.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&v.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t),this.packageId}}))}sendACK(e,t){return a(this,arguments,void 0,(function*(e,t,r=void 0){if(!0===t){const t={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(r){const t={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,error:{code:r.code,message:r.message}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}))}sendReceive(e,t,r){return a(this,void 0,void 0,(function*(){const n={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:r}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),n)}))}sendUnsubscribe(e){return a(this,void 0,void 0,(function*(){yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()}))}sendFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,(function*(){this.events.once(e,(e=>a(this,void 0,void 0,(function*(){var r,n;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let r=o[e];if(r&&r.topic==t){let e=r.messageId;yield this.connector.getMsgPayloadFromHistory(r),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else v.logDebug(`CONNECT: get error rsp ${null===(r=e.error)||void 0===r?void 0:r.code} : ${null===(n=e.error)||void 0===n?void 0:n.message}`)})))),v.logDebug("5. send fetch more");const r=(new Date).getTime();(0,_.logDebug)("ConnectTime---5->",r-this.timeLog);const n={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),n)}))}sendBatchFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,(function*(){this.events.once(e,(e=>a(this,void 0,void 0,(function*(){var r,n;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let t=o[e];if(t&&t.topic){let r=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),r,t.topic)}}i&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else v.logDebug(`CONNECT: get error rsp ${null===(r=e.error)||void 0===r?void 0:r.code} : ${null===(n=e.error)||void 0===n?void 0:n.message}`)})))),v.logDebug("5. send fetch more"),v.reportLog("5. send fetch more");const r=(new Date).getTime();(0,_.logDebug)("ConnectTime---5->",r-this.timeLog);const n={id:e,jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),n)}))}cleanCache(){return a(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(h.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let r=(0,w.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(r,h.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(h.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t){return(0,w.safeJsonParse)(t)}}subscribeTopics(e){return a(this,void 0,void 0,(function*(){(0,_.logDebug)("4. topicid list",e),v.reportLog("4. topicid list"),this.refreshPackageId();const t=(new Date).getTime();return(0,_.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise(((t,r)=>a(this,void 0,void 0,(function*(){let r=0;for(let n=0;n<e.length;++n){let i=e[n];this.refreshPackageId(n),this.events.once(this.packageId.toString(),(o=>a(this,void 0,void 0,(function*(){if(o&&o.error){v.logError("failed when subscribe"),yield this.connector.disconnect();var s=new Error;s.message=o.error.message,s.name=o.error.code.toString(),r+=1,r==e.length&&t()}this.refreshPackageId(n);const a=(new Date).getTime();(0,_.logDebug)("ConnectTime--subscribe callback->",a-this.timeLog),r+=1,r==e.length&&(v.logDebug(`5. send fetch msg: ${this.packageId}, ${i}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),t())})))),v.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${i}`),v.reportLog("3. login callback then send subscribe");const o=(new Date).getTime();(0,_.logDebug)("ConnectTime---login callback->",o-this.timeLog),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return v.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:d.CONNECT_JSONRPC_VER,method:u.CONNECT_METHOD_SUB,params:{topic:i}})}}))))}))}}},4929:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionCrypto=void 0;const i=n(r(8947)),o=r(8629);t.SessionCrypto=class{constructor(e=void 0){this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return i.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,o.hexToByteArray)(e.publicKey),secretKey:(0,o.hexToByteArray)(e.secretKey)}}createNonce(){return i.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){const r=(new TextEncoder).encode(e),n=this.createNonce(),s=i.default.box(r,n,(0,o.hexToByteArray)(t),this.keyPair.secretKey);let a=(0,o.concatUint8Arrays)(n,s);var c=(0,o.toHexString)(a),u=(new TextEncoder).encode(c);return(0,o.base64encode)(u,!1)}encryptWallet(e,t){const r=(new TextEncoder).encode(e),n=this.createNonce(),s=i.default.box(r,n,(0,o.hexToByteArray)(t),this.keyPair.secretKey);let a=(0,o.concatUint8Arrays)(n,s);return(0,o.base64encode)(a,!1)}decrypt(e,t){let r=(0,o.base64decode)(e,!0).toUint8Array();const[n,s]=(0,o.splitToUint8Arrays)(r,this.nonceLength),a=i.default.box.open(s,n,(0,o.hexToByteArray)(t),this.keyPair.secretKey);if(!a)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,o.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,o.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(a)}decryptWallet(e,t){let r=(0,o.base64decode)(e,!0),n=(0,o.hexToByteArray)(r.toString());const[s,a]=(0,o.splitToUint8Arrays)(n,this.nonceLength),c=i.default.box.open(a,s,(0,o.hexToByteArray)(t),this.keyPair.secretKey);if(!c)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,o.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,o.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(c)}stringifyKeypair(){return{publicKey:(0,o.toHexString)(this.keyPair.publicKey),secretKey:(0,o.toHexString)(this.keyPair.secretKey)}}}},5746:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9144),t),i(r(6627),t),i(r(6940),t)},8782:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IEngine=t.ISignClient=t.ISignClientEvents=t.IEngineEvents=void 0;const i=n(r(228));class o extends i.default{constructor(){super()}}t.IEngineEvents=o;class s extends i.default{constructor(){super()}}t.ISignClientEvents=s;t.ISignClient=class{constructor(e){this.data=e}};t.IEngine=class{constructor(e){this.client=e}}},1946:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.creatOKXMiniAppWalletInfo=t.creatOKXWalletInfo=t.ISignClientEvents=t.IEngine=t.IEngineEvents=t.ISignClient=t.getBigIntRpcId=t.formatJsonRpcRequest=t.isJsonRpcError=t.isJsonRpcResponse=t.parseConnectionError=t.isHttpUrl=t.formatJsonRpcError=void 0;var o=r(9308);Object.defineProperty(t,"formatJsonRpcError",{enumerable:!0,get:function(){return o.formatJsonRpcError}}),Object.defineProperty(t,"isHttpUrl",{enumerable:!0,get:function(){return o.isHttpUrl}}),Object.defineProperty(t,"parseConnectionError",{enumerable:!0,get:function(){return o.parseConnectionError}}),Object.defineProperty(t,"isJsonRpcResponse",{enumerable:!0,get:function(){return o.isJsonRpcResponse}}),Object.defineProperty(t,"isJsonRpcError",{enumerable:!0,get:function(){return o.isJsonRpcError}}),Object.defineProperty(t,"formatJsonRpcRequest",{enumerable:!0,get:function(){return o.formatJsonRpcRequest}}),Object.defineProperty(t,"getBigIntRpcId",{enumerable:!0,get:function(){return o.getBigIntRpcId}});var s=r(8782);Object.defineProperty(t,"ISignClient",{enumerable:!0,get:function(){return s.ISignClient}}),Object.defineProperty(t,"IEngineEvents",{enumerable:!0,get:function(){return s.IEngineEvents}}),Object.defineProperty(t,"IEngine",{enumerable:!0,get:function(){return s.IEngine}}),Object.defineProperty(t,"ISignClientEvents",{enumerable:!0,get:function(){return s.ISignClientEvents}}),i(r(4448),t);var a=r(4074);Object.defineProperty(t,"creatOKXWalletInfo",{enumerable:!0,get:function(){return a.creatOKXWalletInfo}}),Object.defineProperty(t,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return a.creatOKXMiniAppWalletInfo}})},9308:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function i(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function o(e){return"result"in e}function s(e){return"error"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonRpcPayload=i,t.isJsonRpcRequest=function(e){return i(e)&&"method"in e},t.isJsonRpcResponse=function(e){return i(e)&&(o(e)||s(e))},t.isJsonRpcResult=o,t.isJsonRpcError=s,t.payloadId=d,t.getBigIntRpcId=function(){const e=BigInt(Date.now())*BigInt(1e6),t=BigInt(l.getNextValue());return e+t},t.formatJsonRpcRequest=function(e,t,r){return{id:r||d(),jsonrpc:"2.0",method:e,params:t}},t.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},t.formatJsonRpcError=function(e,t,r){return{id:e,jsonrpc:"2.0",error:y(t,r)}},t.isReservedErrorCode=f,t.getError=p,t.getErrorByCode=g,t.formatErrorMessage=y,t.isHttpUrl=function(e){return m(e,"^https?:")},t.isWsUrl=function(e){return m(e,"^wss?:")},t.parseConnectionError=function(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e};const a=r(4095),c=n(r(8947));class u{constructor(e){this.i=1;8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1);this.initialValue=e?c.default.randomBytes(e/8)[0]:0}getNextValue(){return this.initialValue+this.i++}}const h=new u(8),l=new u(16);function d(){return 1e3*Date.now()+h.getNextValue()}function f(e){return a.RESERVED_ERROR_CODES.includes(e)}function p(e){return Object.keys(a.STANDARD_ERROR_MAP).includes(e)?a.STANDARD_ERROR_MAP[e]:a.STANDARD_ERROR_MAP[a.DEFAULT_ERROR]}function g(e){const t=Object.values(a.STANDARD_ERROR_MAP).find((t=>t.code===e));return t||a.STANDARD_ERROR_MAP[a.DEFAULT_ERROR]}function y(e,t){return void 0===e?p(a.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},p(a.SERVER_ERROR)),{message:e})),void 0!==t&&(e.data=t),f(e.code)&&(e=g(e.code)),e)}function m(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}},8555:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(r||(t.CONNECT_ITEM_ERROR_CODES=r={}))},138:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TONCHAIN=void 0,function(e){e.MAINNET="-239"}(r||(t.TONCHAIN=r={}))},4448:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=t.TONCHAIN=void 0;var n=r(138);Object.defineProperty(t,"TONCHAIN",{enumerable:!0,get:function(){return n.TONCHAIN}});var i=r(8555);Object.defineProperty(t,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return i.CONNECT_ITEM_ERROR_CODES}})},4074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:"OKX Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:n.downloadUrl,universalLink:n.standardUniversalLink,deepLink:n.standardDeeplink,platforms:["ios","android"]}},t.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:"OKX Mini Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:n.downloadUrl,universalLink:`https://t.me/${n.tgwalletName}/start`,deepLink:"",platforms:["ios","android","macos","windows"]}};const n=r(8358)},8358:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tgwalletAppName=t.tgwalletName=t.tonConnectSdkVersion=t.shortUniversalLink=t.standardDeeplink=t.downloadUrl=t.standardUniversalLink=t.okxDeeplink=void 0,t.getTestTwaUrl=function(){return window.okxTesttwaUrl},t.getTestTgTwaUrl=function(){return window.okxTestTgtwaUrl},t.okxDeeplink="okx://web3",t.standardUniversalLink="undefined"!=typeof window&&window.location.hostname.includes("okx.com")?"https://link.okx.com/download":"https://www.okx.com/download",t.downloadUrl="https://www.okx.com/download",t.standardDeeplink=`${t.okxDeeplink}/wallet/connect`,t.shortUniversalLink="https://www.okx.com/ul/connect",t.tonConnectSdkVersion="1",t.tgwalletName="OKX_WALLET_BOT",t.tgwalletAppName="start"},2194:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;var n=r(4095);Object.defineProperty(t,"OKXConnectError",{enumerable:!0,get:function(){return n.OKXConnectError}}),Object.defineProperty(t,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return n.OKX_CONNECT_ERROR_CODES}})},4095:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR=t.STANDARD_ERROR_MAP=t.SERVER_ERROR_CODE_RANGE=t.RESERVED_ERROR_CODES=t.SERVER_ERROR=t.INTERNAL_ERROR=t.INVALID_PARAMS=t.METHOD_NOT_FOUND=t.INVALID_REQUEST=t.PARSE_ERROR=t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;class r extends Error{constructor(e,t){null==t&&(t=function(e){if(e==n.UNKNOWN_ERROR)return"unknown error";if(e==n.BAD_REQUEST_ERROR)return"bad request error";if(e==n.ALREADY_CONNECTED_ERROR)return"already connected error";if(e==n.NOT_CONNECTED_ERROR)return"not connected error";if(e==n.UNKNOWN_APP_ERROR)return"unknown app error";if(e==n.USER_REJECTS_ERROR)return"user rejects error";if(e==n.USER_REJECTS_ERROR_CAUSE_REGISTER)return"wallet address are registering";if(e==n.METHOD_NOT_SUPPORTED)return"method not supported";if(e==n.CONNECTION_ERROR)return"connect error";if(e==n.CHAIN_NOT_SUPPORTED)return"chain not supported";return"unknown error"}(e)),super(t),this.code=e,this.message=`${r.prefix} ${t?"\n"+t:""}`,Object.setPrototypeOf(this,r.prototype)}toJSON(){return{message:this.message,code:this.code}}}var n;t.OKXConnectError=r,r.prefix="[OKX_CONNECT_SDK_ERROR]",function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",e[e.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",e[e.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",e[e.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",e[e.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",e[e.USER_REJECTS_ERROR_CAUSE_REGISTER=301]="USER_REJECTS_ERROR_CAUSE_REGISTER",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",e[e.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",e[e.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",e[e.CONNECTION_ERROR=700]="CONNECTION_ERROR"}(n||(t.OKX_CONNECT_ERROR_CODES=n={})),t.PARSE_ERROR="PARSE_ERROR",t.INVALID_REQUEST="INVALID_REQUEST",t.METHOD_NOT_FOUND="METHOD_NOT_FOUND",t.INVALID_PARAMS="INVALID_PARAMS",t.INTERNAL_ERROR="INTERNAL_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],t.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],t.STANDARD_ERROR_MAP={[t.PARSE_ERROR]:{code:-32700,message:"Parse error"},[t.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[t.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[t.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[t.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[t.SERVER_ERROR]:{code:-32e3,message:"Server error"}},t.DEFAULT_ERROR=t.SERVER_ERROR},6627:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.downloadUrl=t.okxDeeplink=t.tonConnectSdkVersion=t.standardDeeplink=t.standardUniversalLink=t.NameSpaceKeyStarknet=t.NameSpaceKeyTron=t.NameSpaceKeyCosmos=t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,i(r(2194),t);var o=r(6543);Object.defineProperty(t,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return o.NameSpaceKeyEip155}}),Object.defineProperty(t,"NameSpaceKeySOL",{enumerable:!0,get:function(){return o.NameSpaceKeySOL}}),Object.defineProperty(t,"NameSpaceKeyTON",{enumerable:!0,get:function(){return o.NameSpaceKeyTON}}),Object.defineProperty(t,"NameSpaceKeySui",{enumerable:!0,get:function(){return o.NameSpaceKeySui}}),Object.defineProperty(t,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return o.NameSpaceKeyBtc}}),Object.defineProperty(t,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return o.NameSpaceKeyAptos}}),Object.defineProperty(t,"NameSpaceKeyCosmos",{enumerable:!0,get:function(){return o.NameSpaceKeyCosmos}}),Object.defineProperty(t,"NameSpaceKeyTron",{enumerable:!0,get:function(){return o.NameSpaceKeyTron}}),Object.defineProperty(t,"NameSpaceKeyStarknet",{enumerable:!0,get:function(){return o.NameSpaceKeyStarknet}});var s=r(8358);Object.defineProperty(t,"standardUniversalLink",{enumerable:!0,get:function(){return s.standardUniversalLink}}),Object.defineProperty(t,"standardDeeplink",{enumerable:!0,get:function(){return s.standardDeeplink}}),Object.defineProperty(t,"tonConnectSdkVersion",{enumerable:!0,get:function(){return s.tonConnectSdkVersion}}),Object.defineProperty(t,"okxDeeplink",{enumerable:!0,get:function(){return s.okxDeeplink}}),Object.defineProperty(t,"downloadUrl",{enumerable:!0,get:function(){return s.downloadUrl}}),i(r(1946),t)},6543:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameSpaceKeyStarknet=t.NameSpaceKeyTron=t.NameSpaceKeyCosmos=t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,t.NameSpaceKeyEip155="eip155",t.NameSpaceKeySOL="solana",t.NameSpaceKeyTON="ton",t.NameSpaceKeySui="sui",t.NameSpaceKeyBtc="btc",t.NameSpaceKeyAptos="aptos",t.NameSpaceKeyCosmos="cosmos",t.NameSpaceKeyTron="tron",t.NameSpaceKeyStarknet="starknet"},9466:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function n(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{var i,o;if(null===(i=null==t?void 0:t.signal)||void 0===i?void 0:i.aborted)return void n(new Error("Delay aborted"));const s=setTimeout((()=>r()),e);null===(o=null==t?void 0:t.signal)||void 0===o||o.addEventListener("abort",(()=>{clearTimeout(s),n(new Error("Delay aborted"))}))}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.callForSuccess=function(e,t){return r(this,void 0,void 0,(function*(){var r,i;const o=null!==(r=null==t?void 0:t.attempts)&&void 0!==r?r:3,s=null!==(i=null==t?void 0:t.delayMs)&&void 0!==i?i:800;if("function"!=typeof e)throw new Error("Expected a function, got "+typeof e);let a,c=0;for(;c<o;)try{return yield e()}catch(e){a=e,c++,c<o&&(yield n(s))}throw a}))},t.delay=n},6940:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.checkMetaData=t.versionCompare=t.isBrowser=t.isOS=t.isMobileUserAgent=t.openDeeplinkWithFallback=t.openLinkBlank=t.openLink=t.useShortLink=t.toSafeBase64FromBase64=t.isValidObject=t.isIos=t.base64decode=t.base64encode=t.splitToUint8Arrays=t.concatUint8Arrays=t.toHexString=t.hexToByteArray=t.getOKXLink=t.openOKXUniversalLink=t.getAppWalletShortDeepLink=t.encodeTWAConnectURLParams=t.encodeConnectParams=t.openOKXTMAWalletlinkWithFallback=t.getTelegramWalletTWAUrl=t.getAppWalletDeepLink=t.encodeTelegramUrlParameters=t.isTelegramUrl=t.openOKXDeeplinkWithFallback=t.openOKXDeeplink=t.getUniversalLink=t.safeJsonStringify=t.safeJsonParse=t.getDefaultReporter=t.reportEvent=t.reportLog=t.logWarning=t.logError=t.logDebug=t.callForSuccess=void 0;var o=r(9466);Object.defineProperty(t,"callForSuccess",{enumerable:!0,get:function(){return o.callForSuccess}});var s=r(7990);Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return s.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return s.logError}}),Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return s.logWarning}}),Object.defineProperty(t,"reportLog",{enumerable:!0,get:function(){return s.reportLog}}),Object.defineProperty(t,"reportEvent",{enumerable:!0,get:function(){return s.reportEvent}}),Object.defineProperty(t,"getDefaultReporter",{enumerable:!0,get:function(){return s.getDefaultReporter}}),i(r(5767),t),i(r(796),t);var a=r(2617);Object.defineProperty(t,"safeJsonParse",{enumerable:!0,get:function(){return a.safeJsonParse}}),Object.defineProperty(t,"safeJsonStringify",{enumerable:!0,get:function(){return a.safeJsonStringify}});var c=r(757);Object.defineProperty(t,"getUniversalLink",{enumerable:!0,get:function(){return c.getUniversalLink}}),Object.defineProperty(t,"openOKXDeeplink",{enumerable:!0,get:function(){return c.openOKXDeeplink}}),Object.defineProperty(t,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return c.openOKXDeeplinkWithFallback}}),Object.defineProperty(t,"isTelegramUrl",{enumerable:!0,get:function(){return c.isTelegramUrl}}),Object.defineProperty(t,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return c.encodeTelegramUrlParameters}}),Object.defineProperty(t,"getAppWalletDeepLink",{enumerable:!0,get:function(){return c.getAppWalletDeepLink}}),Object.defineProperty(t,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return c.getTelegramWalletTWAUrl}}),Object.defineProperty(t,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return c.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(t,"encodeConnectParams",{enumerable:!0,get:function(){return c.encodeConnectParams}}),Object.defineProperty(t,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return c.encodeTWAConnectURLParams}}),Object.defineProperty(t,"getAppWalletShortDeepLink",{enumerable:!0,get:function(){return c.getAppWalletShortDeepLink}}),Object.defineProperty(t,"openOKXUniversalLink",{enumerable:!0,get:function(){return c.openOKXUniversalLink}}),Object.defineProperty(t,"getOKXLink",{enumerable:!0,get:function(){return c.getOKXLink}});var u=r(8629);Object.defineProperty(t,"hexToByteArray",{enumerable:!0,get:function(){return u.hexToByteArray}}),Object.defineProperty(t,"toHexString",{enumerable:!0,get:function(){return u.toHexString}}),Object.defineProperty(t,"concatUint8Arrays",{enumerable:!0,get:function(){return u.concatUint8Arrays}}),Object.defineProperty(t,"splitToUint8Arrays",{enumerable:!0,get:function(){return u.splitToUint8Arrays}}),Object.defineProperty(t,"base64encode",{enumerable:!0,get:function(){return u.base64encode}}),Object.defineProperty(t,"base64decode",{enumerable:!0,get:function(){return u.base64decode}}),Object.defineProperty(t,"isIos",{enumerable:!0,get:function(){return u.isIos}}),Object.defineProperty(t,"isValidObject",{enumerable:!0,get:function(){return u.isValidObject}}),Object.defineProperty(t,"toSafeBase64FromBase64",{enumerable:!0,get:function(){return u.toSafeBase64FromBase64}}),Object.defineProperty(t,"useShortLink",{enumerable:!0,get:function(){return u.useShortLink}});var h=r(3503);Object.defineProperty(t,"openLink",{enumerable:!0,get:function(){return h.openLink}}),Object.defineProperty(t,"openLinkBlank",{enumerable:!0,get:function(){return h.openLinkBlank}}),Object.defineProperty(t,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return h.openDeeplinkWithFallback}}),Object.defineProperty(t,"isMobileUserAgent",{enumerable:!0,get:function(){return h.isMobileUserAgent}}),Object.defineProperty(t,"isOS",{enumerable:!0,get:function(){return h.isOS}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return h.isBrowser}});var l=r(5487);Object.defineProperty(t,"versionCompare",{enumerable:!0,get:function(){return l.versionCompare}});var d=r(6081);Object.defineProperty(t,"checkMetaData",{enumerable:!0,get:function(){return d.checkMetaData}})},7990:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultReporter=function(){return a},t.logDebug=function(...e){if("undefined"!=typeof console)try{(i||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.log(`[OKX_CONNECT_SDK] ${c} `,...e)}catch(e){}},t.logError=function(...e){if("undefined"!=typeof console)try{if((i||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.error(`[OKX_CONNECT_SDK] ${c} `,...e),o||!i){let t="";t+=[...e].reduce(((e,t)=>{"string"==typeof t?","+t:"object"==typeof t&&JSON.stringify(t)})),a.sendRecordContent(t,s.OKXReportType.LOG,"")}}catch(e){}},t.logWarning=function(...e){if("undefined"!=typeof console)try{(i||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.warn(`[OKX_CONNECT_SDK] ${c} `,...e)}catch(e){}},t.reportEvent=function(e,t,r){return n(this,void 0,void 0,(function*(){yield a.sendRecordContent(r,e,t)}))},t.reportLog=function(e){return n(this,arguments,void 0,(function*(e,t="default"){}))};const i=!1,o=!1,s=r(796),a=new s.OKXReporter;const c=r(9792).version},796:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXReporter=t.OKXReportSide=t.OKXReportType=t.versionStr=void 0;const o=i(r(3187)),s=r(7990),a=r(757),c=r(6940),u=i(r(3790)),h=i(r(8947));t.versionStr="1.6.1";const l=["https://www.okx.com/dappstat/wallet-connect","https://www.okx.ac/dappstat/wallet-connect"],d="OKX_RP_UUID_CK",f={headers:{Accept:"*/*","Content-Type":"text/plain"},method:"POST"};t.OKXReportType={PAGE_IN:"page_in",PAGE_OUT:"page_out",CLICK:"click",LOG:"log"},t.OKXReportSide={DAPP:"dapp",WALLET:"wallet"};t.OKXReporter=class{constructor(){this.currentSide=t.OKXReportSide.DAPP,this.currentVersion=t.versionStr,this.storage=u.default.createInstance({name:"OKXReporter"}),this.recordList=new Array,this.currentUUID=(0,c.toHexString)(h.default.randomBytes(16))}configVersionAndSide(e,t,r){this.currentVersion=e,this.currentSide=t,this.appName=r}get recordCacheKey(){return"OKX_RP_CK@"+this.appName}get reportPlatform(){return(0,c.isMobileUserAgent)()?(0,c.isIos)()?"iOS":"android":"pc"}beginReport(){return n(this,void 0,void 0,(function*(){this.startErrorCatching();let e=yield this.storage.getItem(this.recordCacheKey),t=yield this.storage.getItem(d);t?this.currentUUID=t:this.storage.setItem(d,this.currentUUID),e&&(this.recordList=e,(0,s.logDebug)("resume records from cache length: ",this.recordList.length),yield this.sendCachedRecords())}))}startErrorCatching(){(0,a.getWindow)()&&(0,s.logDebug)("begin capture console error")}cachedErrors(){return this.recordList}sendRecord(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>n(this,void 0,void 0,(function*(){try{const i=JSON.stringify(e);(0,s.logDebug)("[REPORT] record: ",i);const a=yield((e,...t)=>n(void 0,[e,...t],void 0,(function*(e,t={},r=5e3){for(const n of e)try{const e=new AbortController,i=e.signal,s=(0,o.default)(n,Object.assign(Object.assign({},t),{signal:i})),a=new Promise(((t,n)=>setTimeout((()=>{e.abort(),n(new Error("Request timed out"))}),r))),c=yield Promise.race([s,a]);if(c.ok)return c;if(502==c.status)return console.error("Fetch error status 502",n),c}catch(e){console.error(`Fetch error for ${n}:`,e)}throw console.error("'All fetch attempts failed.'"),new Error("All fetch attempts failed.")})))(l,Object.assign(Object.assign({},f),{body:i}));(0,s.logDebug)("[REPORT] get rsp:",a),a&&a.status&&200==a.status?(this.recordList=this.recordList.filter((t=>t.timestamp!=e.timestamp||t.content!=e.content)),yield this.storage.setItem(this.recordCacheKey,this.recordList),t(!0)):r(!1)}catch(e){(0,s.logDebug)("send record error:",e),t(!0)}}))))}))}sendRecordContent(e,t,r){return n(this,void 0,void 0,(function*(){var n,i,o,s;let c=null===(n=(0,a.getWindow)())||void 0===n?void 0:n.location.pathname,u=null===(i=(0,a.getWindow)())||void 0===i?void 0:i.location.origin;c&&u&&(u+=c);let h=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.navigator.language,l=null===(s=(0,a.getWindow)())||void 0===s?void 0:s.navigator.userAgent,d=this.reportPlatform,f={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:this.currentSide,timestamp:(new Date).getTime(),url:u,lang:h,type:t,platform:d,"user-agent":l};yield this.markRecordItem(f),yield this.sendRecord(f)}))}sendCachedRecords(){return n(this,void 0,void 0,(function*(){return new Promise(((e,t)=>n(this,void 0,void 0,(function*(){let r=this.recordList.map((e=>this.sendRecord(e)));(0,s.logDebug)("[REPORT] submit & clean recorded caches begin @",(new Date).toUTCString()),Promise.allSettled(r).then((r=>{(0,s.logDebug)("[REPORT] submit & clean recorded caches ends @",(new Date).toUTCString());let n=[];r.forEach(((e,t)=>{"rejected"==e.status&&n.push(t)})),this.recordList=this.recordList.filter(((e,t)=>!n.includes(t))),this.storage.setItem(this.recordCacheKey,this.recordList).then((function(t){e()})).catch((function(e){t(e)}))}))}))))}))}markRecordItem(e){return n(this,void 0,void 0,(function*(){if(this.recordList.push(e),this.recordList.length>100){let e=this.recordList.length-100;this.recordList.splice(0,e)}return new Promise(((t,r)=>{this.storage.setItem(this.recordCacheKey,this.recordList).then((function(r){t(e)})).catch((function(e){r(e)}))}))}))}markRecord(e,t,r,i){return n(this,void 0,void 0,(function*(){var n,o,s,c;let u=null===(n=(0,a.getWindow)())||void 0===n?void 0:n.location.pathname,h=null===(o=(0,a.getWindow)())||void 0===o?void 0:o.location.origin;u&&h&&(h+=u);let l=null===(s=(0,a.getWindow)())||void 0===s?void 0:s.navigator.language,d=this.reportPlatform,f=null===(c=(0,a.getWindow)())||void 0===c?void 0:c.navigator.userAgent,p={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:i,timestamp:(new Date).getTime(),url:h,lang:l,type:t,platform:d,"user-agent":f};return yield this.markRecordItem(p)}))}}},5767:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Report_WalletType_Key=t.Report_Proceed_QRCode_Click=t.Report_ChooseType_Download_Click=t.Report_ChooseType_ConnectWallet_Click=t.Report_Proceed_Retry_Click=t.Report_ChooseType_ConnectWallet_View=t.Report_Loading_ConnectWallet_View=t.Report_Proceed_QRCode_View=t.Report_Proceed_Proceed_View=void 0,t.Report_Proceed_Proceed_View="OKXConnectSDK_Proceed_Proceed_View",t.Report_Proceed_QRCode_View="OKXConnectSDK_Proceed_QRCode_View",t.Report_Loading_ConnectWallet_View="OKXConnectSDK_Loading_ConnectWallet_View",t.Report_ChooseType_ConnectWallet_View="OKXConnectSDK_ChooseType_ConnectWallet_View",t.Report_Proceed_Retry_Click="OKXConnectSDK_Proceed_Retry_Click",t.Report_ChooseType_ConnectWallet_Click="OKXConnectSDK_ChooseType_ConnectWallet_Click",t.Report_ChooseType_Download_Click="OKXConnectSDK_ChooseType_Download_Click",t.Report_Proceed_QRCode_Click="OKXConnectSDK_Proceed_QRCode_Click",t.Report_WalletType_Key="wallet_type"},6081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkMetaData=function(e){if(!e)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"You have to specify a `dappMetaData`in the options.");if(!e.name)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"dappName is required");if(!e.icon)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"icon is required");return!0};const n=r(6627)},2617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeJsonParse=function(e){if("string"!=typeof e)throw(0,n.logDebug)(e),new Error("Cannot safe json parse value of type "+typeof e);try{return o(e)}catch(t){return console.error("safeJsonParse error:",t),e}},t.safeJsonStringify=function(e){return"string"==typeof e?e:i(e)||""};const n=r(7990),i=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),o=e=>{const t=e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,((e,t)=>`:"${t}n"`));try{return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))}catch(t){return JSON.parse(e)}}},9954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.okxfromString=function(e,t="utf8"){const r=u[t];if((0,i.logDebug)("okxfromstring ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)},t.okxtoString=function(e,t="utf8"){const r=u[t];if((0,i.logDebug)("okxtoString ====> "),!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)},t.alloc=function(e=0){return new Uint8Array(e)},t.allocUnsafe=o;const n=r(2571),i=r(7990);function o(e=0){return new Uint8Array(e)}function s(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const a=s("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),c=s("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){let n=e[r];n&&String.fromCharCode(n)&&(t+=String.fromCharCode(n))}return t}),(e=>{const t=o((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),u=Object.assign({utf8:a,"utf-8":a,hex:n.bases.base16,latin1:c,ascii:c,binary:c},n.bases)},5487:(e,t,r)=>{"use strict";var n,i,o,s,a,c,u;Object.defineProperty(t,"__esModule",{value:!0}),t.isTmaPlatform=function(...e){return e.includes(g)},t.isInTMA=m,t.isInTelegramBrowser=function(){var e;const t=!!(null===(e=(0,h.getWindow)())||void 0===e?void 0:e.TelegramWebview);return(m()||t)&&"unknown"===g},t.sendExpand=function(){w("web_app_expand",{})},t.sendOpenTelegramLink=function(e,t){const r=new URL(e);if("http:"!==r.protocol&&"https:"!==r.protocol){if(t)return t();throw new d.OKXConnectError(d.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${r}`)}if("t.me"!==r.hostname){if(t)return t();throw new d.OKXConnectError(d.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${r}`)}const n=r.pathname+r.search;b()||(i="6.1",_(y,i)>=0)?w("web_app_open_tg_link",{path_full:n}):(0,f.openLinkBlank)("https://t.me"+n);var i},t.versionCompare=_;const h=r(757),l=r(7990),d=r(6627),f=r(3503);let p={};try{p=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=v(e),t;let r=e.indexOf("?");if(r>=0){let n=e.substr(0,r);t._path=v(n),e=e.substr(r+1)}let n=function(e){let t={};if(!e.length)return t;let r,n,i,o,s=e.split("&");for(r=0;r<s.length;r++)n=s[r].split("="),i=v(n[0]),o=null==n[1]?null:v(n[1]),t[i]=o;return t}(e);for(let e in n)t[e]=n[e];return t}(location.hash.toString())}catch(e){}let g="unknown";if((null==p?void 0:p.tgWebAppPlatform)&&(g=null!==(n=p.tgWebAppPlatform)&&void 0!==n?n:"unknown"),"unknown"===g){const e=(0,h.getWindow)();g=null!==(s=null===(o=null===(i=null==e?void 0:e.Telegram)||void 0===i?void 0:i.WebApp)||void 0===o?void 0:o.platform)&&void 0!==s?s:"unknown"}let y="6.0";if((null==p?void 0:p.tgWebAppVersion)&&(y=p.tgWebAppVersion),!y){const e=(0,h.getWindow)();y=null!==(u=null===(c=null===(a=null==e?void 0:e.Telegram)||void 0===a?void 0:a.WebApp)||void 0===c?void 0:c.version)&&void 0!==u?u:"6.0"}function m(){var e;return"unknown"!==g||!!(null===(e=(0,h.getWindow)())||void 0===e?void 0:e.TelegramWebviewProxy)}function b(){try{const e=(0,h.getWindow)();return!!e&&(null!=e.parent&&e!==e.parent)}catch(e){return!1}}function w(e,t){try{const r=(0,h.getWindow)();if(!r)throw new d.OKXConnectError(d.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==r.TelegramWebviewProxy)(0,l.logDebug)("postEvent",e,t),r.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(r.external&&"notify"in r.external)(0,l.logDebug)("postEvent",e,t),r.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!b())throw new d.OKXConnectError(d.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA");{const n="*",i=JSON.stringify({eventType:e,eventData:t});(0,l.logDebug)("postEvent",e,t),r.parent.postMessage(i,n)}}}catch(e){(0,l.logError)(`Can't post event to parent window: ${e}`)}}function v(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(t){return e}}function _(e,t){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let r,n,i,o,s=e.replace(/^\s+|\s+$/g,"").split("."),a=t.replace(/^\s+|\s+$/g,"").split(".");for(r=Math.max(s.length,a.length),n=0;n<r;n++)if(i=parseInt(s[n])||0,o=parseInt(a[n])||0,i!==o)return i>o?1:-1;return 0}},757:(e,t,r)=>{"use strict";var n,i,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.removeUrlLastSlash=d,t.addPathToUrl=function(e,t){return d(e)+"/"+t},t.getUniversalLink=f,t.openOKXDeeplink=function(e){var t;const r=f(e),n=!!(null===(t=g())||void 0===t?void 0:t.TelegramWebviewProxy);if(console.log("openOKXDeeplink fullUrl:",r),(0,h.isIos)())p(r);else{let t=null;n?t=window.open(e,"_blank"):window.location.href=e}},t.openOKXUniversalLink=p,t.openOKXDeeplinkWithFallback=function(e){var t;const r=f(e),n=!!(null===(t=g())||void 0===t?void 0:t.TelegramWebviewProxy);console.log("openOKXDeeplinkWithFallback fullUrl:",r);let i=!1;a.standardUniversalLink;if(console.log("openOKXDeeplinkWithFallback standardUniversalLink:",a.standardUniversalLink),(0,h.isIos)())n?window.open(r,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null===window||void 0===window?void 0:window.okxLogDebug)?window.open(r,"_blank"):window.open(r,"_self"),console.log("windowOpen[after]: ",Date.now()));else{let t=null;n?t=window.open(e,"_blank"):window.location.href=e,setTimeout((()=>{i||(t?t.open(r,"_self"):window.open(r,"_blank"))}),3e3),window.addEventListener("blur",(()=>{i=!0}),{once:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(i=!0)}))}},t.getWindow=g,t.isTelegramUrl=function(e){if(!e)return!1;const t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},t.encodeTelegramUrlParameters=function(e){let t=e;return t=t.replace(/\./g,"%2E"),t=t.replace(/-/g,"%2D"),t=t.replace(/_/g,"%5F"),t=t.replace(/&/g,"-"),t=t.replace(/=/g,"__"),t=t.replace(/%/g,"--"),t},t.encodeConnectParams=y,t.encodeTWAConnectURLParams=m,t.getAppWalletDeepLink=function(e){return`${a.standardDeeplink}?param=${e}`},t.getAppWalletShortDeepLink=b,t.getTelegramWalletTWAUrl=w,t.openOKXTMAWalletlinkWithFallback=function(e){var t,r,n,i,o;(0,c.logDebug)("[TWA] open link:",e,"isInTMA ==> ",S()),S()?(null===(r=null===(t=g())||void 0===t?void 0:t.Telegram)||void 0===r?void 0:r.WebApp)?null===(o=null===(i=null===(n=g())||void 0===n?void 0:n.Telegram)||void 0===i?void 0:i.WebApp)||void 0===o||o.openTelegramLink(e):(0,l.sendOpenTelegramLink)(e):(0,u.getTestTwaUrl)()?window.open(e,"_blank"):window.open(e,"_self")},t.isInTMA=S,t.isInTelegramBrowser=function(){var e;const t=!!(null===(e=g())||void 0===e?void 0:e.TelegramWebview);return(S()||t)&&"unknown"===E},t.getOKXLink=function(e,t=!1,r){if((0,c.logDebug)(`url  getOKXLink() called connectRequest==> ${JSON.stringify(e)}  useMini=> ${t}  tmaReturnUrl==> ${r}`),t)return w(m(e),null!=r?r:"back");if((0,h.useShortLink)())return b(e.topic,e.clientId);{const t=y(e);return`${a.standardDeeplink}?param=${t}`}};const a=r(6627),c=r(7990),u=r(8358),h=r(8629),l=r(5487);function d(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function f(e,t=!1){console.log("getUniversalLink deeplinkUrl:",e,", useStandardUniversalLink:",t);const r=`${a.standardDeeplink}?param=`;if(!t&&e.startsWith(r)){const t=e.replace(r,"");(0,c.logDebug)("getUniversalLink cleanUrl:",t);const n=encodeURIComponent(t);return(0,c.logDebug)("getUniversalLink standardUniversalLink:",a.standardUniversalLink),(0,c.logDebug)("getUniversalLink `${shortUniversalLink}?param=${deeplinkEncodeUrl}`:",`${u.shortUniversalLink}?param=${n}`),`${u.shortUniversalLink}?param=${n}`}if(t||e!=a.standardDeeplink){const t=encodeURIComponent(e);return console.log("getUniversalLink standardUniversalLink:",a.standardUniversalLink),`${a.standardUniversalLink}?deeplink=${t}`}return(0,c.logDebug)("getUniversalLink shortUniversalLink:",u.shortUniversalLink),u.shortUniversalLink}function p(e){(0,h.isIos)()?S()?window.open(e,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null===window||void 0===window?void 0:window.okxLogDebug)?window.open(e,"_blank"):window.open(e,"_self"),console.log("windowOpen[after]: ",Date.now())):window.open(e,"_blank")}function g(){if("undefined"!=typeof window)return window}function y(e){const t=JSON.stringify(e);(0,c.logDebug)("url encodeConnectParams connectRequestStr ",t);const r=(new TextEncoder).encode(t),n=btoa(String.fromCharCode(...r));return(0,c.logDebug)("url encodeConnectParams base64Encoded ",n),n}function m(e){const t=JSON.stringify({topic:e.topic,clientId:e.clientId});(0,c.logDebug)("url encodeConnectParams connectRequestStr",t);const r=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...r))}function b(e,t){return`${u.shortUniversalLink}?topic=${e}${(0,h.getLastSixMd5Hash)(t)}`}function w(e,t){let r={okxconnect:"",redirect:"",extraparams:""};e&&(r.okxconnect=e),t&&(r.redirect=t);let n=JSON.stringify(r);const i=(new TextEncoder).encode(n),o=btoa(String.fromCharCode(...i)),s=(0,h.toSafeBase64FromBase64)(o);return(0,c.logDebug)("[TWA] open link:",r,o),e||t?S()?(0,u.getTestTgTwaUrl)()?`${(0,u.getTestTgTwaUrl)()}?startapp=${s}`:`https://t.me/${u.tgwalletName}/start?startapp=${s}`:(0,u.getTestTwaUrl)()?`${(0,u.getTestTwaUrl)()}?tgWebAppStartParam=${s}`:`tg://resolve?domain=${u.tgwalletName}&appname=${u.tgwalletAppName}&startapp=${s}`:S()?(0,u.getTestTgTwaUrl)()?`${(0,u.getTestTgTwaUrl)()}`:`https://t.me/${u.tgwalletName}/start`:(0,u.getTestTwaUrl)()?`${(0,u.getTestTwaUrl)()}`:`tg://resolve?domain=${u.tgwalletName}&appname=${u.tgwalletAppName}`}function v(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(t){return e}}let _={};try{_=function(e){let t={};if(!(e=e.replace(/^#/,"")).length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=v(e),t;let r=e.indexOf("?");if(r>=0){let n=e.substr(0,r);t._path=v(n),e=e.substr(r+1)}let n=function(e){let t={};if(!e.length)return t;let r,n,i,o,s=e.split("&");for(r=0;r<s.length;r++)n=s[r].split("="),i=v(n[0]),o=null==n[1]?null:v(n[1]),t[i]=o;return t}(e);for(let e in n)t[e]=n[e];return t}(location.hash.toString())}catch(e){}let E="unknown";if((null==_?void 0:_.tgWebAppPlatform)&&(E=null!==(n=_.tgWebAppPlatform)&&void 0!==n?n:"unknown"),"unknown"===E){const e=g();E=null!==(s=null===(o=null===(i=null==e?void 0:e.Telegram)||void 0===i?void 0:i.WebApp)||void 0===o?void 0:o.platform)&&void 0!==s?s:"unknown"}function S(){var e;return"unknown"!==E||!!(null===(e=g())||void 0===e?void 0:e.TelegramWebviewProxy)}},8629:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidObject=t.RANDOM_LENGTH=t.isBrowser=t.resolveLocalStorage=t.hasLocalStorage=t.hasBuiltInWebSocket=t.resolveWebSocketImplementation=void 0,t.hexToByteArray=function(e){if(e.length%2!=0)throw new Error(`Cannot convert ${e} to bytesArray`);const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.slice(r,r+2),16);return t},t.toHexString=function(e){let t="";return e.forEach((e=>{t+=("0"+(255&e).toString(16)).slice(-2)})),t},t.concatUint8Arrays=function(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r},t.splitToUint8Arrays=function(e,t){if(t>=e.length)throw new Error("Index is out of buffer");const r=e.slice(0,t),n=e.slice(t);return[r,n]},t.base64encode=function(e,t){let r;e instanceof Uint8Array?r=e:("string"!=typeof e&&(e=(0,c.safeJsonStringify)(e)),r=o.default.decodeUTF8(e));return function(e,t){const r=o.default.encodeBase64(e);if(!t)return r;return encodeURIComponent(r)}(r,t)},t.base64decode=function(e,t){const r=function(e,t){t&&(e=decodeURIComponent(e));return o.default.decodeBase64(e)}(e,t);return{toString:()=>o.default.encodeUTF8(r),toObject(){try{return(0,c.safeJsonParse)(o.default.encodeUTF8(r))}catch(e){return null}},toUint8Array:()=>r}},t.checkWSUrl=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let r=t[0];if(void 0===r)return!1;return new RegExp("^wss?:").test(r)},t.hashKey=f,t.generateRandomBytes32=p,t.generateTopic=function(){let e=p();return(0,u.logDebug)(`generate topic called ${e}`),f((0,s.toString)(e,d))},t.isIos=function(){const e=navigator.userAgent,t=navigator.maxTouchPoints||0,r=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,n=e.includes("Mac")&&t>1;return(0,u.logDebug)(`utils isIos >>>isIOSDevice: ${r}    >> isIPadOS: ${n}`),r||n},t.getLastSixMd5Hash=function(e){return l.default.MD5(e).toString().slice(-6)},t.toSafeBase64FromBase64=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},t.useShortLink=function(){return!!window.useShortLink};const i=n(r(8947)),o=n(r(6386)),s=r(7870),a=r(204),c=r(2617),u=r(7990),h=r(9954),l=n(r(1396)),d="base16";t.resolveWebSocketImplementation=()=>"undefined"!=typeof WebSocket?WebSocket:void 0!==r.g&&void 0!==r.g.WebSocket?r.g.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:"undefined"!=typeof self&&void 0!==self.WebSocket?self.WebSocket:WebSocket;t.hasBuiltInWebSocket=()=>"undefined"!=typeof WebSocket||void 0!==r.g&&void 0!==r.g.WebSocket||"undefined"!=typeof window&&void 0!==window.WebSocket||"undefined"!=typeof self&&void 0!==self.WebSocket;t.hasLocalStorage=()=>void 0!==r.g&&void 0!==r.g.localStorage||"undefined"!=typeof window&&void 0!==window.localStorage;t.resolveLocalStorage=()=>void 0!==r.g&&void 0!==r.g.localStorage?r.g.localStorage:"undefined"!=typeof window&&void 0!==window.localStorage?window.localStorage:localStorage;function f(e,t=d){(0,u.logDebug)(`hash key called ${e}`);const r=(0,a.hash)((0,h.okxfromString)(e,t));return(0,s.toString)(r,t)}function p(){return i.default.randomBytes(t.RANDOM_LENGTH)}t.isBrowser=()=>"undefined"!=typeof window,t.RANDOM_LENGTH=32;t.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length},3503:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.openLink=s,t.openLinkBlank=function(e){s(e,"_blank")},t.openDeeplinkWithFallback=function(e,t){const r=setTimeout((()=>{u("safari")||c("android")&&u("firefox")||t()}),500);window.addEventListener("blur",(()=>clearTimeout(r)),{once:!0}),s(e,"_self")},t.isMobileUserAgent=function(){let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.slice(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},t.getUserAgent=a,t.isOS=c,t.isBrowser=u;const i=n(r(7232)),o=r(7990);function s(e,t="_self"){(0,o.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function a(){var e,t,r;const n=(new i.default).getResult(),o=null===(e=n.os.name)||void 0===e?void 0:e.toLowerCase();let s;switch(!0){case"ipad"===(null===(t=n.device.model)||void 0===t?void 0:t.toLowerCase()):s="ipad";break;case"ios"===o:s="ios";break;case"android"===o:s="android";break;case"mac os"===o:s="macos";break;case"linux"===o:s="linux";break;case null==o?void 0:o.includes("windows"):s="windows"}const a=null===(r=n.browser.name)||void 0===r?void 0:r.toLowerCase();let c;switch(!0){case"chrome"===a:c="chrome";break;case"firefox"===a:c="firefox";break;case null==a?void 0:a.includes("safari"):c="safari";break;case null==a?void 0:a.includes("opera"):c="opera"}return{os:s,browser:c}}function c(...e){return e.includes(a().os)}function u(...e){return e.includes(a().browser)}},601:(e,t,r)=>{"use strict";t.I0=t.DH=t.NX=t.u8=t.cY=void 0,t.av=t.O6=t.w3=t.Wg=void 0;const n=r(8287);function i(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function o(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}class s{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}class c extends s{isCount(){throw new Error("ExternalLayout is abstract")}}class u extends c{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){i(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}class h extends c{constructor(e,t=0,r){if(!(e instanceof s))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof l||this.layout instanceof d}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class l extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readUIntLE(t,this.span)}encode(e,t,r=0){return o(t).writeUIntLE(e,r,this.span),this.span}}class d extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readUIntBE(t,this.span)}encode(e,t,r=0){return o(t).writeUIntBE(e,r,this.span),this.span}}class f extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readIntLE(t,this.span)}encode(e,t,r=0){return o(t).writeIntLE(e,r,this.span),this.span}}class p extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readIntBE(t,this.span)}encode(e,t,r=0){return o(t).writeIntBE(e,r,this.span),this.span}}const g=Math.pow(2,32);function y(e){const t=Math.floor(e/g);return{hi32:t,lo32:e-t*g}}function m(e,t){return e*g+t}class b extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e),n=r.readUInt32LE(t);return m(r.readUInt32LE(t+4),n)}encode(e,t,r=0){const n=y(e),i=o(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class w extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e);return m(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){const n=y(e),i=o(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class v extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e),n=r.readUInt32LE(t);return m(r.readInt32LE(t+4),n)}encode(e,t,r=0){const n=y(e),i=o(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class _ extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e);return m(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){const n=y(e),i=o(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class E extends s{constructor(e){super(4,e)}decode(e,t=0){return o(e).readFloatLE(t)}encode(e,t,r=0){return o(t).writeFloatLE(e,r),4}}class S extends s{constructor(e){super(4,e)}decode(e,t=0){return o(e).readFloatBE(t)}encode(e,t,r=0){return o(t).writeFloatBE(e,r),4}}class k extends s{constructor(e){super(8,e)}decode(e,t=0){return o(e).readDoubleLE(t)}encode(e,t,r=0){return o(t).writeDoubleLE(e,r),8}}class O extends s{constructor(e){super(8,e)}decode(e,t=0){return o(e).readDoubleBE(t)}encode(e,t,r=0){return o(t).writeDoubleBE(e,r),8}}class A extends s{constructor(e,t,r){if(!(e instanceof s))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof c)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof c&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;for(i instanceof c&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof c&&this.count.encode(e.length,t,r),i}}class C extends s{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof s),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t=0){i(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,o=0;for(const n of this.fields){let s=n.span;if(o=0<s?s:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(o=n.encode(i,t,r),0>s&&(s=n.getSpan(t,r)))}i=r,r+=s}return i+o-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class I{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}class T extends I{constructor(e,t){if(!(e instanceof c&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class R extends s{constructor(e,t,r){let n;if(e instanceof l||e instanceof d)n=new T(new h(e));else if(e instanceof c&&e.isCount())n=new T(e);else{if(!(e instanceof I))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=e}if(void 0===t&&(t=null),!(null===t||t instanceof s))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof l||e instanceof d)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof l||e instanceof d,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const n=this.discriminator,i=n.decode(e,t),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[o.property]=o.decode(e,t+s)}else r=o.decode(e,t);return r}encode(e,t,r=0){const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(e[n.property],t,r),o+i.encode(e[i.property],t,r+o)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new x(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}class x extends s{constructor(e,t,r,n){if(!(e instanceof R))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof s))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function N(e){return 0>e&&(e+=4294967296),e}class B extends s{constructor(e,t,r){if(!(e instanceof l||e instanceof d))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=N(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){const r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);for(const t of this.fields)void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){const n=this.word.decode(t,r);this._packedSetValue(n);for(const t of this.fields)if(void 0!==t.property){const r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new P(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new M(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class P{constructor(e,t,r){if(!(e instanceof B))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=N(this.valueMask<<this.start),this.property=r}decode(e,t){return N(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==N(e&this.valueMask))throw new TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=N(e<<this.start);this.container._packedSetValue(N(t&~this.wordMask)|r)}}class M extends P{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}class D extends s{constructor(e,t){if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof c||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),o(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof c&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=o(e);return o(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof c&&this.length.encode(n,t,r),n}}class L extends s{constructor(e){super(-1,e)}getSpan(e,t=0){i(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return o(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");const a=o(t);return i.copy(a,r),a[r+s]=0,s+1}}class U extends s{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return i(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return o(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(o(t),r),s}}class K extends s{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}t.cY=(e,t,r)=>new h(e,t,r),t.u8=e=>new l(1,e),t.NX=e=>new l(2,e),t.DH=e=>new l(4,e),t.I0=e=>new b(e),t.Wg=e=>new v(e),t.w3=(e,t,r)=>new C(e,t,r),t.O6=(e,t,r)=>new A(e,t,r),t.av=(e,t)=>new D(e,t)},474:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Account:()=>mn,AddressLookupTableAccount:()=>Ri,AddressLookupTableInstruction:()=>Cs,AddressLookupTableProgram:()=>Is,Authorized:()=>Ks,BLOCKHASH_CACHE_TIMEOUT_MS:()=>Di,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>bn,BPF_LOADER_PROGRAM_ID:()=>wi,BpfLoader:()=>vi,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Rs,ComputeBudgetInstruction:()=>Ts,ComputeBudgetProgram:()=>xs,Connection:()=>ks,Ed25519Program:()=>Bs,Enum:()=>hn,EpochSchedule:()=>Ci,FeeCalculatorLayout:()=>ci,Keypair:()=>Os,LAMPORTS_PER_SOL:()=>ca,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>As,Loader:()=>bi,Lockup:()=>Ws,MAX_SEED_LENGTH:()=>fn,Message:()=>Ln,MessageAccountKeys:()=>On,MessageV0:()=>Un,NONCE_ACCOUNT_LENGTH:()=>hi,NonceAccount:()=>li,PACKET_DATA_SIZE:()=>wn,PUBLIC_KEY_LENGTH:()=>pn,PublicKey:()=>yn,SIGNATURE_LENGTH_IN_BYTES:()=>_n,SOLANA_SCHEMA:()=>ln,STAKE_CONFIG_ID:()=>Us,STAKE_INSTRUCTION_LAYOUTS:()=>zs,SYSTEM_INSTRUCTION_LAYOUTS:()=>gi,SYSVAR_CLOCK_PUBKEY:()=>$n,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>Vn,SYSVAR_INSTRUCTIONS_PUBKEY:()=>Xn,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>Jn,SYSVAR_RENT_PUBKEY:()=>Gn,SYSVAR_REWARDS_PUBKEY:()=>Yn,SYSVAR_SLOT_HASHES_PUBKEY:()=>Zn,SYSVAR_SLOT_HISTORY_PUBKEY:()=>Qn,SYSVAR_STAKE_HISTORY_PUBKEY:()=>ei,Secp256k1Program:()=>Ds,SendTransactionError:()=>ti,SolanaJSONRPCError:()=>ni,SolanaJSONRPCErrorCode:()=>ri,StakeAuthorizationLayout:()=>js,StakeInstruction:()=>Hs,StakeProgram:()=>Fs,Struct:()=>un,SystemInstruction:()=>pi,SystemProgram:()=>yi,Transaction:()=>jn,TransactionExpiredBlockheightExceededError:()=>En,TransactionExpiredNonceInvalidError:()=>kn,TransactionExpiredTimeoutError:()=>Sn,TransactionInstruction:()=>zn,TransactionMessage:()=>Fn,TransactionStatus:()=>Wn,VALIDATOR_INFO_KEY:()=>Gs,VERSION_PREFIX_MASK:()=>vn,VOTE_PROGRAM_ID:()=>Qs,ValidatorInfo:()=>Zs,VersionedMessage:()=>Kn,VersionedTransaction:()=>qn,VoteAccount:()=>ta,VoteAuthorizationLayout:()=>Xs,VoteInit:()=>qs,VoteInstruction:()=>$s,VoteProgram:()=>Js,clusterApiUrl:()=>sa,sendAndConfirmRawTransaction:()=>aa,sendAndConfirmTransaction:()=>ii});var n={};r.r(n),r.d(n,{aK:()=>G,e8:()=>P,DO:()=>B,dJ:()=>Y,OG:()=>Z,My:()=>D,Ph:()=>z,lX:()=>j,Id:()=>V,fg:()=>te,qj:()=>$,aT:()=>H,r4:()=>J,aY:()=>N,x:()=>ie,lq:()=>F,z:()=>q,zW:()=>L,Q5:()=>ne});var i=r(8287);function o(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function s(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");o(e.outputLen),o(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const h="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const l=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),d=(e,t)=>e<<32-t|e>>>t;function f(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),s(e),e}class p{clone(){return this._cloneInto()}}function g(e){const t=t=>e().update(f(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function y(e=32){if(h&&"function"==typeof h.getRandomValues)return h.getRandomValues(new Uint8Array(e));if(h&&"function"==typeof h.randomBytes)return h.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const m=(e,t,r)=>e&t^e&r^t&r;class b extends p{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=l(this.buffer)}update(e){c(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=f(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=l(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){c(this),u(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=l(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=a/4,d=this.get();if(h>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<h;e++)s.setUint32(4*e,d[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const w=BigInt(2**32-1),v=BigInt(32);function _(e,t=!1){return t?{h:Number(e&w),l:Number(e>>v&w)}:{h:0|Number(e>>v&w),l:0|Number(e&w)}}const E={fromBig:_,split:function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=_(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]},toBig:(e,t)=>BigInt(e>>>0)<<v|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[S,k]=(()=>E.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),O=new Uint32Array(80),A=new Uint32Array(80);class C extends b{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:h,Fl:l,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,o,s,a,c,u,h,l,d,f,p,g]}set(e,t,r,n,i,o,s,a,c,u,h,l,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|h,this.Fl=0|l,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)O[r]=e.getUint32(t),A[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|O[e-15],r=0|A[e-15],n=E.rotrSH(t,r,1)^E.rotrSH(t,r,8)^E.shrSH(t,r,7),i=E.rotrSL(t,r,1)^E.rotrSL(t,r,8)^E.shrSL(t,r,7),o=0|O[e-2],s=0|A[e-2],a=E.rotrSH(o,s,19)^E.rotrBH(o,s,61)^E.shrSH(o,s,6),c=E.rotrSL(o,s,19)^E.rotrBL(o,s,61)^E.shrSL(o,s,6),u=E.add4L(i,c,A[e-7],A[e-16]),h=E.add4H(u,n,a,O[e-7],O[e-16]);O[e]=0|h,A[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:h,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){const t=E.rotrSH(h,l,14)^E.rotrSH(h,l,18)^E.rotrBH(h,l,41),b=E.rotrSL(h,l,14)^E.rotrSL(h,l,18)^E.rotrBL(h,l,41),w=h&d^~h&p,v=l&f^~l&g,_=E.add5L(m,b,v,k[e],A[e]),C=E.add5H(_,y,t,w,S[e],O[e]),I=0|_,T=E.rotrSH(r,n,28)^E.rotrBH(r,n,34)^E.rotrBH(r,n,39),R=E.rotrSL(r,n,28)^E.rotrBL(r,n,34)^E.rotrBL(r,n,39),x=r&i^r&s^i&s,N=n&o^n&a^o&a;y=0|p,m=0|g,p=0|d,g=0|f,d=0|h,f=0|l,({h,l}=E.add(0|c,0|u,0|C,0|I)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const B=E.add3L(I,R,N);r=E.add3H(B,C,T,x),n=0|B}({h:r,l:n}=E.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=E.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=E.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=E.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h,l}=E.add(0|this.Eh,0|this.El,0|h,0|l)),({h:d,l:f}=E.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=E.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=E.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(r,n,i,o,s,a,c,u,h,l,d,f,p,g,y,m)}roundClean(){O.fill(0),A.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const I=g((()=>new C)),T=BigInt(0),R=BigInt(1),x=BigInt(2);function N(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function B(e){if(!N(e))throw new Error("Uint8Array expected")}function P(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const M=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function D(e){B(e);let t="";for(let r=0;r<e.length;r++)t+=M[e[r]];return t}function L(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function U(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?T:BigInt("0x"+e)}const K={_0:48,_9:57,A:65,F:70,a:97,f:102};function W(e){return e>=K._0&&e<=K._9?e-K._0:e>=K.A&&e<=K.F?e-(K.A-10):e>=K.a&&e<=K.f?e-(K.a-10):void 0}function H(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=W(e.charCodeAt(i)),o=W(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n}function z(e){return U(D(e))}function j(e){return B(e),U(D(Uint8Array.from(e).reverse()))}function F(e,t){return H(e.toString(16).padStart(2*t,"0"))}function q(e,t){return F(e,t).reverse()}function $(e,t,r){let n;if("string"==typeof t)try{n=H(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!N(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function V(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];B(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const X=e=>"bigint"==typeof e&&T<=e;function J(e,t,r){return X(e)&&X(t)&&X(r)&&t<=e&&e<r}function G(e,t,r,n){if(!J(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Y(e){let t;for(t=0;e>T;e>>=R,t+=1);return t}const Z=e=>(x<<BigInt(e-1))-R,Q=e=>new Uint8Array(e),ee=e=>Uint8Array.from(e);function te(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Q(e),i=Q(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),c=(e=Q())=>{i=a(ee([0]),e),n=a(),0!==e.length&&(i=a(ee([1]),e),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return V(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}}const re={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||N(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ne(e,t,r={}){const n=(t,r,n)=>{const i=re[r];if("function"!=typeof i)throw new Error("invalid validator function");const o=e[t];if(!(n&&void 0===o||i(o,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function ie(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const o=e(r,...n);return t.set(r,o),o}}const oe=BigInt(0),se=BigInt(1),ae=BigInt(2),ce=BigInt(3),ue=BigInt(4),he=BigInt(5),le=BigInt(8);function de(e,t){const r=e%t;return r>=oe?r:t+r}function fe(e,t,r){if(t<oe)throw new Error("invalid exponent, negatives unsupported");if(r<=oe)throw new Error("invalid modulus");if(r===se)return oe;let n=se;for(;t>oe;)t&se&&(n=n*e%r),e=e*e%r,t>>=se;return n}function pe(e,t,r){let n=e;for(;t-- >oe;)n*=n,n%=r;return n}function ge(e,t){if(e===oe)throw new Error("invert: expected non-zero number");if(t<=oe)throw new Error("invert: expected positive modulus, got "+t);let r=de(e,t),n=t,i=oe,o=se,s=se,a=oe;for(;r!==oe;){const e=n/r,t=n%r,c=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=c,a=u}if(n!==se)throw new Error("invert: does not exist");return de(i,t)}function ye(e){if(e%ue===ce){const t=(e+se)/ue;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%le===he){const t=(e-he)/le;return function(e,r){const n=e.mul(r,ae),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,ae),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-se)/ae;let r,n,i;for(r=e-se,n=0;r%ae===oe;r/=ae,n++);for(i=ae;i<e&&fe(i,t,e)!==e-se;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+se)/ue;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+se)/ae;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(s,o),h=e.pow(s,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,se<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),h=e.mul(h,c),a=t}return u}}(e)}const me=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function be(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function we(e,t,r=!1,n={}){if(e<=oe)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=be(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Z(i),ZERO:oe,ONE:se,create:t=>de(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return oe<=t&&t<e},is0:e=>e===oe,isOdd:e=>(e&se)===se,neg:t=>de(-t,e),eql:(e,t)=>e===t,sqr:t=>de(t*t,e),add:(t,r)=>de(t+r,e),sub:(t,r)=>de(t-r,e),mul:(t,r)=>de(t*r,e),pow:(e,t)=>function(e,t,r){if(r<oe)throw new Error("invalid exponent, negatives unsupported");if(r===oe)return e.ONE;if(r===se)return t;let n=e.ONE,i=t;for(;r>oe;)r&se&&(n=e.mul(n,i)),i=e.sqr(i),r>>=se;return n}(a,e,t),div:(t,r)=>de(t*ge(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ge(t,e),sqrt:n.sqrt||(t=>(s||(s=ye(e)),s(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?q(e,o):F(e,o),fromBytes:e=>{if(e.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?j(e):z(e)}});return Object.freeze(a)}function ve(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function _e(e){const t=ve(e);return t+Math.ceil(t/2)}const Ee=BigInt(0),Se=BigInt(1);function ke(e,t){const r=t.negate();return e?r:t}function Oe(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Ae(e,t){Oe(e,t);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function Ce(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}function Ie(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}const Te=new WeakMap,Re=new WeakMap;function xe(e){return Re.get(e)||1}function Ne(e,t){return{constTimeNegate:ke,hasPrecomputes:e=>1!==xe(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>Ee;)r&Se&&(n=n.add(i)),i=i.double(),r>>=Se;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Ae(r,t),o=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){const{windows:o,windowSize:s}=Ae(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let e=0;e<o;e++){const t=e*s;let r=Number(i&u);i>>=l,r>s&&(r-=h,i+=Se);const o=t,d=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?c=c.add(ke(f,n[o])):a=a.add(ke(p,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,o=e.ZERO){const{windows:s,windowSize:a}=Ae(r,t),c=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<s;e++){const t=e*a;if(i===Ee)break;let r=Number(i&c);if(i>>=h,r>a&&(r-=u,i+=Se),0===r)continue;let s=n[t+Math.abs(r)-1];r<0&&(s=s.negate()),o=o.add(s)}return o},getPrecomputes(e,t,r){let n=Te.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Te.set(t,r(n))),n},wNAFCached(e,t,r){const n=xe(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=xe(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Oe(r,t),Re.set(e,r),Te.delete(e)}}}function Be(e,t,r,n){if(Ce(r,e),Ie(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,o=Y(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,a=(1<<s)-1,c=new Array(a+1).fill(i);let u=i;for(let e=Math.floor((t.BITS-1)/s)*s;e>=0;e-=s){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],o=Number(i>>BigInt(e)&BigInt(a));c[o]=c[o].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<s;e++)u=u.double()}return u}function Pe(e){return function(e){const t=me.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});ne(e,t)}(e.Fp),ne(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...be(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const Me=BigInt(0),De=BigInt(1),Le=BigInt(2),Ue=BigInt(8),Ke={zip215:!0};function We(e){const t=function(e){const t=Pe(e);return ne(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=t,u=Le<<BigInt(8*a)-De,h=r.create,l=we(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:Me}}}),f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(P("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){G("coordinate "+e,t,Me,u)}function y(e){if(!(e instanceof w))throw new Error("ExtendedPoint expected")}const m=ie(((e,t)=>{const{ex:n,ey:i,ez:o}=e,s=e.is0();null==t&&(t=s?Ue:r.inv(o));const a=h(n*t),c=h(i*t),u=h(o*t);if(s)return{x:Me,y:De};if(u!==De)throw new Error("invZ was invalid");return{x:a,y:c}})),b=ie((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:o,ez:s,et:a}=e,c=h(i*i),u=h(o*o),l=h(s*s),d=h(l*l),f=h(c*r);if(h(l*h(f+u))!==h(d+h(n*h(c*u))))throw new Error("bad point: equation left != right (1)");if(h(i*o)!==h(s*a))throw new Error("bad point: equation left != right (2)");return!0}));class w{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new w(t,r,De,h(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(w.fromAffine)}static msm(e,t){return Be(w,l,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){y(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=e,a=h(t*s),c=h(i*n),u=h(r*s),l=h(o*n);return a===c&&u===l}is0(){return this.equals(w.ZERO)}negate(){return new w(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,o=h(r*r),s=h(n*n),a=h(Le*h(i*i)),c=h(e*o),u=r+n,l=h(h(u*u)-o-s),d=c+s,f=d-a,p=c-s,g=h(l*f),y=h(d*p),m=h(l*p),b=h(f*d);return new w(g,y,b,m)}add(e){y(e);const{a:r,d:n}=t,{ex:i,ey:o,ez:s,et:a}=this,{ex:c,ey:u,ez:l,et:d}=e;if(r===BigInt(-1)){const e=h((o-i)*(u+c)),t=h((o+i)*(u-c)),r=h(t-e);if(r===Me)return this.double();const n=h(s*Le*d),f=h(a*Le*l),p=f+n,g=t+e,y=f-n,m=h(p*r),b=h(g*y),v=h(p*y),_=h(r*g);return new w(m,b,_,v)}const f=h(i*c),p=h(o*u),g=h(a*n*d),m=h(s*l),b=h((i+o)*(c+u)-f-p),v=m-g,_=m+g,E=h(p-r*f),S=h(b*v),k=h(_*E),O=h(b*E),A=h(v*_);return new w(S,k,A,O)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,e,w.normalizeZ)}multiply(e){const t=e;G("scalar",t,De,n);const{p:r,f:i}=this.wNAF(t);return w.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=w.ZERO){const r=e;return G("scalar",r,Me,n),r===Me?_:this.is0()||r===De?this:E.wNAFCachedUnsafe(this,r,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(e){return m(this,e)}clearCofactor(){const{h:e}=t;return e===De?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:o}=t,s=r.BYTES;e=$("pointHex",e,s),P("zip215",n);const a=e.slice(),c=e[s-1];a[s-1]=-129&c;const l=j(a),f=n?u:r.ORDER;G("pointHex.y",l,Me,f);const p=h(l*l),g=h(p-De),y=h(i*p-o);let{isValid:m,value:b}=d(g,y);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const v=(b&De)===De,_=!!(128&c);if(!n&&b===Me&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==v&&(b=h(-b)),w.fromAffine({x:b,y:l})}static fromPrivateKey(e){return O(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=q(t,r.BYTES);return n[n.length-1]|=e&De?128:0,n}toHex(){return D(this.toRawBytes())}}w.BASE=new w(t.Gx,t.Gy,De,h(t.Gx*t.Gy)),w.ZERO=new w(Me,De,De,Me);const{BASE:v,ZERO:_}=w,E=Ne(w,8*a);function S(e){return de(e,n)}function k(e){return S(j(e))}function O(e){const t=r.BYTES;e=$("private key",e,t);const n=$("hashed private key",o(e),2*t),i=f(n.slice(0,t)),s=n.slice(t,2*t),a=k(i),c=v.multiply(a),u=c.toRawBytes();return{head:i,prefix:s,scalar:a,point:c,pointBytes:u}}function A(e=new Uint8Array,...t){const r=V(...t);return k(o(p(r,$("context",e),!!i)))}const C=Ke;v._setWindowSize(8);return{CURVE:t,getPublicKey:function(e){return O(e).pointBytes},sign:function(e,t,o={}){e=$("message",e),i&&(e=i(e));const{prefix:s,scalar:a,pointBytes:c}=O(t),u=A(o.context,s,e),h=v.multiply(u).toRawBytes(),l=S(u+A(o.context,h,c,e)*a);return G("signature.s",l,Me,n),$("result",V(h,q(l,r.BYTES)),2*r.BYTES)},verify:function(e,t,n,o=C){const{context:s,zip215:a}=o,c=r.BYTES;e=$("signature",e,2*c),t=$("message",t),n=$("publicKey",n,c),void 0!==a&&P("zip215",a),i&&(t=i(t));const u=j(e.slice(c,2*c));let h,l,d;try{h=w.fromHex(n,a),l=w.fromHex(e.slice(0,c),a),d=v.multiplyUnsafe(u)}catch(e){return!1}if(!a&&h.isSmallOrder())return!1;const f=A(s,l.toRawBytes(),h.toRawBytes(),t);return l.add(h.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>s(r.BYTES),precompute:(e=8,t=w.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}const He=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ze=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),je=(BigInt(0),BigInt(1)),Fe=BigInt(2),qe=(BigInt(3),BigInt(5)),$e=BigInt(8);function Ve(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=He,s=e*e%o*e%o,a=pe(s,Fe,o)*s%o,c=pe(a,je,o)*e%o,u=pe(c,qe,o)*c%o,h=pe(u,t,o)*u%o,l=pe(h,r,o)*h%o,d=pe(l,n,o)*l%o,f=pe(d,i,o)*d%o,p=pe(f,i,o)*d%o,g=pe(p,t,o)*u%o;return{pow_p_5_8:pe(g,Fe,o)*e%o,b2:s}}function Xe(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Je(e,t){const r=He,n=de(t*t*t,r),i=de(n*n*t,r);let o=de(e*n*Ve(e*i).pow_p_5_8,r);const s=de(t*o*o,r),a=o,c=de(o*ze,r),u=s===e,h=s===de(-e,r),l=s===de(-e*ze,r);return u&&(o=a),(h||l)&&(o=c),((e,t)=>(de(e,t)&se)===se)(o,r)&&(o=de(-o,r)),{isValid:u||h,value:o}}const Ge=(()=>we(He,void 0,!0))(),Ye=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:$e,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:I,randomBytes:y,adjustScalarBytes:Xe,uvRatio:Je}))(),Ze=(()=>We(Ye))();var Qe=r(9404),et=r.n(Qe),tt=r(3466),rt=r.n(tt);function nt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function it(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ot(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function st(e,t){it(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const at=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ct=(e,t)=>e<<32-t|e>>>t,ut=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),ht=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function lt(e){for(let t=0;t<e.length;t++)e[t]=ht(e[t])}function dt(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),it(e),e}class ft{clone(){return this._cloneInto()}}function pt(e){const t=t=>e().update(dt(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}const gt=(e,t,r)=>e&t^e&r^t&r;class yt extends ft{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=at(this.buffer)}update(e){ot(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=dt(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=at(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){ot(this),st(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=at(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const mt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wt=new Uint32Array(64);class vt extends yt{constructor(){super(64,32,8,!1),this.A=0|bt[0],this.B=0|bt[1],this.C=0|bt[2],this.D=0|bt[3],this.E=0|bt[4],this.F=0|bt[5],this.G=0|bt[6],this.H=0|bt[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)wt[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=wt[e-15],r=wt[e-2],n=ct(t,7)^ct(t,18)^t>>>3,i=ct(r,17)^ct(r,19)^r>>>10;wt[e]=i+wt[e-7]+n+wt[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(ct(s,6)^ct(s,11)^ct(s,25))+((h=s)&a^~h&c)+mt[e]+wt[e]|0,l=(ct(r,2)^ct(r,13)^ct(r,22))+gt(r,n,i)|0;u=c,c=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+l|0}var h;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,c,u)}roundClean(){wt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const _t=pt((()=>new vt));var Et=r(2755),St=r(601),kt=r(184);class Ot extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...o}=e,{path:s}=e,a=0===s.length?n:`At path: ${s.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function At(e){return"object"==typeof e&&null!=e}function Ct(e){return At(e)&&!Array.isArray(e)}function It(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function Tt(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${It(n)}\``}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*Rt(e,t,r,n){var i;At(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const i of e){const e=Tt(i,t,r,n);e&&(yield e)}}function*xt(e,t,r={}){const{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i,mask:s};o&&(e=t.coercer(e,a));let c="valid";for(const n of t.validator(e,a))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[u,h,l]of t.entries(e,a)){const t=xt(h,l,{path:void 0===u?n:[...n,u],branch:void 0===u?i:[...i,h],coerce:o,mask:s,message:r.message});for(const r of t)r[0]?(c=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):o&&(h=r[1],void 0===u?e=h:e instanceof Map?e.set(u,h):e instanceof Set?e.add(h):At(e)&&(void 0!==h||u in e)&&(e[u]=h))}if("not_valid"!==c)for(const n of t.refiner(e,a))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,e])}class Nt{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:o=e=>e,entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(e,t)=>Rt(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>Rt(i(e,t),t,this,e):()=>[]}assert(e,t){return Bt(e,this,t)}create(e,t){return Pt(e,this,t)}is(e){return Mt(e,this)}mask(e,t){return function(e,t,r){const n=Dt(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return Dt(e,this,t)}}function Bt(e,t,r){const n=Dt(e,t,{message:r});if(n[0])throw n[0]}function Pt(e,t,r){const n=Dt(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Mt(e,t){return!Dt(e,t)[0]}function Dt(e,t,r={}){const n=xt(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);if(i[0]){return[new Ot(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function Lt(e,t){return new Nt({type:e,schema:null,validator:t})}function Ut(e){return new Nt({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${It(e)}`})}function Kt(){return Lt("boolean",(e=>"boolean"==typeof e))}function Wt(e){return Lt("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${It(t)}`))}function Ht(e){const t=It(e),r=typeof e;return new Nt({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${It(r)}`})}function zt(){return Lt("never",(()=>!1))}function jt(e){return new Nt({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function Ft(){return Lt("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${It(e)}`))}function qt(e){return new Nt({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function $t(e,t){return new Nt({type:"record",schema:null,*entries(r){if(At(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>Ct(e)||`Expected an object, but received: ${It(e)}`,coercer:e=>Ct(e)?{...e}:e})}function Vt(){return Lt("string",(e=>"string"==typeof e||`Expected a string, but received: ${It(e)}`))}function Xt(e){const t=zt();return new Nt({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${It(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function Jt(e){const t=Object.keys(e);return new Nt({type:"type",schema:e,*entries(r){if(At(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>Ct(e)||`Expected an object, but received: ${It(e)}`,coercer:e=>Ct(e)?{...e}:e})}function Gt(e){const t=e.map((e=>e.type)).join(" | ");return new Nt({type:"union",schema:null,coercer(t,r){for(const n of e){const[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){const i=[];for(const t of e){const[...e]=xt(r,t,n),[o]=e;if(!o[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${It(r)}`,...i]}})}function Yt(){return Lt("unknown",(()=>!0))}function Zt(e,t,r){return new Nt({...e,coercer:(n,i)=>Mt(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}var Qt=r(22),er=r.n(Qt),tr=r(228);var rr=class extends tr{socket;constructor(e,t,r){super(),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){const n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function nr(e,t){return new rr(e,t)}var ir=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},or=class extends tr{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...s}={},a,c){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=a||(()=>++this.rpc_id),this.dataPack=c||new ir,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise(((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const s=this.generate_request_id(e,t),a={jsonrpc:"2.0",method:e,params:t||void 0,id:s};this.socket.send(this.dataPack.encode(a),n,(e=>{if(e)return o(e);this.queue[s]={promise:[i,o]},r&&(this.queue[s].timeout=setTimeout((()=>{delete this.queue[s],o(new Error("reply timeout"))}),r))}))}))}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise(((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),(e=>{if(e)return n(e);r()}))}))}async subscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(({data:e})=>{e instanceof ArrayBuffer&&(e=i.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then((()=>{this.emit.apply(this,t)}))}if(!this.queue[e.id])return e.method?Promise.resolve().then((()=>{this.emit(e.method,e?.params)})):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(({code:r,reason:n})=>{this.ready&&setTimeout((()=>this.emit("close",r,n)),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,t)),this.reconnect_interval)))}))}};const sr=BigInt(2**32-1),ar=BigInt(32);function cr(e,t=!1){return t?{h:Number(e&sr),l:Number(e>>ar&sr)}:{h:0|Number(e>>ar&sr),l:0|Number(e&sr)}}function ur(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=cr(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}const hr=(e,t,r)=>e<<r|t>>>32-r,lr=(e,t,r)=>t<<r|e>>>32-r,dr=(e,t,r)=>t<<r-32|e>>>64-r,fr=(e,t,r)=>e<<r-32|t>>>64-r;const pr=[],gr=[],yr=[],mr=BigInt(0),br=BigInt(1),wr=BigInt(2),vr=BigInt(7),_r=BigInt(256),Er=BigInt(113);for(let e=0,t=br,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],pr.push(2*(5*n+r)),gr.push((e+1)*(e+2)/2%64);let i=mr;for(let e=0;e<7;e++)t=(t<<br^(t>>vr)*Er)%_r,t&wr&&(i^=br<<(br<<BigInt(e))-br);yr.push(i)}const[Sr,kr]=ur(yr,!0),Or=(e,t,r)=>r>32?dr(e,t,r):hr(e,t,r),Ar=(e,t,r)=>r>32?fr(e,t,r):lr(e,t,r);class Cr extends ft{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,nt(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var o;this.state=new Uint8Array(200),this.state32=(o=this.state,new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)))}keccak(){ut||lt(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=Or(o,s,1)^r[n],c=Ar(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=gr[r],o=Or(t,i,n),s=Ar(t,i,n),a=pr[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=Sr[n],e[1]^=kr[n]}r.fill(0)}(this.state32,this.rounds),ut||lt(this.state32),this.posOut=0,this.pos=0}update(e){ot(this);const{blockLen:t,state:r}=this,n=(e=dt(e)).length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){ot(this,!1),it(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(st(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new Cr(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Ir=(e,t,r)=>pt((()=>new Cr(t,e,r))),Tr=Ir(1,136,32),Rr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nr=new Uint32Array(64);class Br extends b{constructor(){super(64,32,8,!1),this.A=0|xr[0],this.B=0|xr[1],this.C=0|xr[2],this.D=0|xr[3],this.E=0|xr[4],this.F=0|xr[5],this.G=0|xr[6],this.H=0|xr[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Nr[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Nr[e-15],r=Nr[e-2],n=d(t,7)^d(t,18)^t>>>3,i=d(r,17)^d(r,19)^r>>>10;Nr[e]=i+Nr[e-7]+n+Nr[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(d(s,6)^d(s,11)^d(s,25))+((h=s)&a^~h&c)+Rr[e]+Nr[e]|0,l=(d(r,2)^d(r,13)^d(r,22))+m(r,n,i)|0;u=c,c=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+l|0}var h;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,c,u)}roundClean(){Nr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Pr=g((()=>new Br));class Mr extends p{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,a(e);const r=f(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return c(this),this.iHash.update(e),this}digestInto(e){c(this),s(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Dr=(e,t,r)=>new Mr(e,t).update(r).digest();function Lr(e){void 0!==e.lowS&&P("lowS",e.lowS),void 0!==e.prehash&&P("prehash",e.prehash)}Dr.create=(e,t)=>new Mr(e,t);const{Ph:Ur,aT:Kr}=n,Wr={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:r}=Wr;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=L(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?L(i.length/2|128):"";return L(e)+o+i+t},decode(e,t){const{Err:r}=Wr;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let o=0;if(!!(128&i)){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;const s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=Wr;if(e<Hr)throw new t("integer: negative integers are not allowed");let r=L(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=Wr;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Ur(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=Wr,i="string"==typeof e?Kr(e):e;B(i);const{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,o),{v:u,l:h}=n.decode(2,c);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=Wr,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},Hr=BigInt(0),zr=BigInt(1),jr=(BigInt(2),BigInt(3));BigInt(4);function Fr(e){const t=function(e){const t=Pe(e);ne(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=we(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return V(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),o=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=t;if(r&&"bigint"!=typeof e){if(N(e)&&(e=D(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let s;try{s="bigint"==typeof e?e:z($("private key",e,n))}catch(t){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(s=de(s,o)),G("private key",s,zr,o),s}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const u=ie(((e,t)=>{const{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};const s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));const a=r.mul(n,t),c=r.mul(i,t),u=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),h=ie((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const o=r.sqr(i),a=s(n);if(!r.eql(o,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(o($("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(a(e))}static msm(e,t){return Be(l,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(o,i)),h=r.eql(r.mul(n,a),r.mul(s,i));return u&&h}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,jr),{px:o,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,h=r.ZERO,d=r.mul(o,o),f=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),h=r.mul(o,a),h=r.add(h,h),c=r.mul(e,h),u=r.mul(i,p),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(g,c),h=r.mul(i,h),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,h),h=r.add(d,d),d=r.add(h,d),d=r.add(d,p),d=r.mul(d,g),u=r.add(u,d),p=r.mul(s,a),p=r.add(p,p),d=r.mul(p,g),c=r.sub(c,d),h=r.mul(p,f),h=r.add(h,h),h=r.add(h,h),new l(c,u,h)}add(e){c(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=e;let h=r.ZERO,d=r.ZERO,f=r.ZERO;const p=t.a,g=r.mul(t.b,jr);let y=r.mul(n,s),m=r.mul(i,a),b=r.mul(o,u),w=r.add(n,i),v=r.add(s,a);w=r.mul(w,v),v=r.add(y,m),w=r.sub(w,v),v=r.add(n,o);let _=r.add(s,u);return v=r.mul(v,_),_=r.add(y,b),v=r.sub(v,_),_=r.add(i,o),h=r.add(a,u),_=r.mul(_,h),h=r.add(m,b),_=r.sub(_,h),f=r.mul(p,v),h=r.mul(g,b),f=r.add(h,f),h=r.sub(m,f),f=r.add(m,f),d=r.mul(h,f),m=r.add(y,y),m=r.add(m,y),b=r.mul(p,b),v=r.mul(g,v),m=r.add(m,b),b=r.sub(y,b),b=r.mul(p,b),v=r.add(v,b),y=r.mul(m,v),d=r.add(d,y),y=r.mul(_,v),h=r.mul(w,h),h=r.sub(h,y),y=r.mul(w,m),f=r.mul(_,f),f=r.add(f,y),new l(h,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return f.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;G("scalar",e,Hr,i);const o=l.ZERO;if(e===Hr)return o;if(this.is0()||e===zr)return this;if(!n||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,l.normalizeZ);let{k1neg:s,k1:a,k2neg:c,k2:u}=n.splitScalar(e),h=o,d=o,p=this;for(;a>Hr||u>Hr;)a&zr&&(h=h.add(p)),u&zr&&(d=d.add(p)),p=p.double(),a>>=zr,u>>=zr;return s&&(h=h.negate()),c&&(d=d.negate()),d=new l(r.mul(d.px,n.beta),d.py,d.pz),h.add(d)}multiply(e){const{endo:n,n:i}=t;let o,s;if(G("scalar",e,zr,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:u,f:h}=this.wNAF(i),{p:d,f:p}=this.wNAF(c);u=f.constTimeNegate(t,u),d=f.constTimeNegate(a,d),d=new l(r.mul(d.px,n.beta),d.py,d.pz),o=u.add(d),s=h.add(p)}else{const{p:t,f:r}=this.wNAF(e);o=t,s=r}return l.normalizeZ([o,s])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==Hr&&t!==zr&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===zr)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===zr?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return P("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(e=!0){return P("isCompressed",e),D(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,f=Ne(l,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(e){return J(e,zr,t.n)}}}function qr(e){const t=function(e){const t=Pe(e);return ne(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return de(e,n)}function a(e){return ge(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:l}=Fr({...t,toBytes(e,t,n){const i=t.toAffine(),o=r.toBytes(i.x),s=V;return P("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],s=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===o&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error("invalid Point, expected length of "+i+", or uncompressed "+o+", got "+t)}{const e=z(s);if(!J(e,zr,r.ORDER))throw new Error("Point is not on curve");const t=h(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!==((i&zr)===zr)&&(i=r.neg(i)),{x:e,y:i}}}}),d=e=>D(F(e,t.nByteLength));function f(e){return e>n>>zr}const p=(e,t,r)=>z(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=$("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=Wr.toSig($("DER",e));return new g(t,r)}assertValidity(){G("r",this.r,zr,n),G("s",this.s,zr,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:o}=this,u=w($("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const h=2===o||3===o?n+t.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&o?"03":"02",f=c.fromHex(l+d(h)),p=a(h),g=s(-u*p),y=s(i*p),m=c.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return H(this.toDERHex())}toDERHex(){return Wr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return H(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=_e(t.n);return function(e,t,r=!1){const n=e.length,i=ve(t),o=_e(t);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const s=de(r?z(e):j(e),t-se)+se;return r?q(s,i):F(s,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function m(e){const t=N(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof c}const b=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=z(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},w=t.bits2int_modN||function(e){return s(b(e))},v=Z(t.nBitLength);function _(e){return G("num < 2^"+t.nBitLength,e,Hr,v),F(e,t.nByteLength)}function E(e,n,i=S){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:h}=t;let{lowS:d,prehash:p,extraEntropy:y}=i;null==d&&(d=!0),e=$("msgHash",e),Lr(i),p&&(e=$("prehashed msgHash",o(e)));const m=w(e),v=u(n),E=[_(v),_(m)];if(null!=y&&!1!==y){const e=!0===y?h(r.BYTES):y;E.push($("extraEntropy",e))}const k=V(...E),O=m;return{seed:k,k2sig:function(e){const t=b(e);if(!l(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=s(n.x);if(i===Hr)return;const o=s(r*s(O+i*v));if(o===Hr)return;let u=(n.x===i?0:2)|Number(n.y&zr),h=o;return d&&f(o)&&(h=function(e){return f(e)?s(-e):e}(o),u^=1),new g(i,h,u)}}}const S={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(m(e))throw new Error("first arg must be private key");if(!m(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,r,n=S){const{seed:i,k2sig:o}=E(e,r,n),s=t;return te(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(e,r,n,i=k){const o=e;r=$("msgHash",r),n=$("publicKey",n);const{lowS:u,prehash:h,format:l}=i;if(Lr(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==l&&"compact"!==l&&"der"!==l)throw new Error("format must be compact or der");const d="string"==typeof o||N(o),f=!d&&!l&&"object"==typeof o&&null!==o&&"bigint"==typeof o.r&&"bigint"==typeof o.s;if(!d&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,y;try{if(f&&(p=new g(o.r,o.s)),d){try{"compact"!==l&&(p=g.fromDER(o))}catch(e){if(!(e instanceof Wr.Err))throw e}p||"der"===l||(p=g.fromCompact(o))}y=c.fromHex(n)}catch(e){return!1}if(!p)return!1;if(u&&p.hasHighS())return!1;h&&(r=t.hash(r));const{r:m,s:b}=p,v=w(r),_=a(b),E=s(v*_),S=s(m*_),O=c.BASE.multiplyAndAddUnsafe(y,E,S)?.toAffine();return!!O&&s(O.x)===m},ProjectivePoint:c,Signature:g,utils:y}}function $r(e){return{hash:e,hmac:(t,...r)=>Dr(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];s(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:y}}const Vr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Xr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Jr=BigInt(1),Gr=BigInt(2),Yr=(e,t)=>(e+t/Gr)/t;function Zr(e){const t=Vr,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,l=pe(h,r,t)*h%t,d=pe(l,r,t)*h%t,f=pe(d,Gr,t)*u%t,p=pe(f,i,t)*f%t,g=pe(p,o,t)*p%t,y=pe(g,a,t)*g%t,m=pe(y,c,t)*y%t,b=pe(m,a,t)*g%t,w=pe(b,r,t)*h%t,v=pe(w,s,t)*p%t,_=pe(v,n,t)*u%t,E=pe(_,Gr,t);if(!Qr.eql(Qr.sqr(E),e))throw new Error("Cannot find square root");return E}const Qr=we(Vr,void 0,void 0,{sqrt:Zr}),en=function(e,t){const r=t=>qr({...e,...$r(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Qr,n:Xr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Xr,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Jr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Yr(o*e,t),c=Yr(-n*e,t);let u=de(e-a*r-c*i,t),h=de(-a*n-c*o,t);const l=u>s,d=h>s;if(l&&(u=t-u),d&&(h=t-h),u>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:d,k2:h}}}},Pr);BigInt(0);en.ProjectivePoint;const tn=Ze.utils.randomPrivateKey,rn=()=>{const e=Ze.utils.randomPrivateKey(),t=nn(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},nn=Ze.getPublicKey;function on(e){try{return Ze.ExtendedPoint.fromHex(e),!0}catch{return!1}}const sn=(e,t)=>Ze.sign(e,t.slice(0,32)),an=Ze.verify,cn=e=>i.Buffer.isBuffer(e)?e:e instanceof Uint8Array?i.Buffer.from(e.buffer,e.byteOffset,e.byteLength):i.Buffer.from(e);class un{constructor(e){Object.assign(this,e)}encode(){return i.Buffer.from((0,Et.serialize)(ln,this))}static decode(e){return(0,Et.deserialize)(ln,this,e)}static decodeUnchecked(e){return(0,Et.deserializeUnchecked)(ln,this,e)}}class hn extends un{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((e=>{this.enum=e}))}}const ln=new Map;var dn;const fn=32,pn=32;let gn=1;class yn extends un{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=rt().decode(e);if(t.length!=pn)throw new Error("Invalid public key input");this._bn=new(et())(t)}else this._bn=new(et())(e);if(this._bn.byteLength()>pn)throw new Error("Invalid public key input")}}static unique(){const e=new yn(gn);return gn+=1,new yn(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return rt().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(i.Buffer);if(e.length===pn)return e;const t=i.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=i.Buffer.concat([e.toBuffer(),i.Buffer.from(t),r.toBuffer()]),o=_t(n);return new yn(o)}static createProgramAddressSync(e,t){let r=i.Buffer.alloc(0);e.forEach((function(e){if(e.length>fn)throw new TypeError("Max seed length exceeded");r=i.Buffer.concat([r,cn(e)])})),r=i.Buffer.concat([r,t.toBuffer(),i.Buffer.from("ProgramDerivedAddress")]);const n=_t(r);if(on(n))throw new Error("Invalid seeds, address must fall off the curve");return new yn(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{const o=e.concat(i.Buffer.from([n]));r=this.createProgramAddressSync(o,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return on(new yn(e).toBytes())}}dn=yn,yn.default=new dn("11111111111111111111111111111111"),ln.set(yn,{kind:"struct",fields:[["_bn","u256"]]});class mn{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=cn(e);if(64!==e.length)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=cn(tn()),this._publicKey=cn(nn(this._secretKey))}get publicKey(){return new yn(this._publicKey)}get secretKey(){return i.Buffer.concat([this._secretKey,this._publicKey],64)}}const bn=new yn("BPFLoader1111111111111111111111111111111111"),wn=1232,vn=127,_n=64;class En extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(En.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Sn extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Sn.prototype,"name",{value:"TransactionExpiredTimeoutError"});class kn extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(kn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class On{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach(((e,r)=>{t.set(e.toBase58(),r)}));const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((e=>r(e.pubkey))),data:e.data})))}}const An=(e="publicKey")=>St.av(32,e),Cn=(e="signature")=>St.av(64,e),In=(e="string")=>{const t=St.w3([St.DH("length"),St.DH("lengthPadding"),St.av(St.cY(St.DH(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),o=t;return o.decode=(e,t)=>r(e,t).chars.toString(),o.encode=(e,t,r)=>{const o={chars:i.Buffer.from(e,"utf8")};return n(o,t,r)},o.alloc=e=>St.DH().span+St.DH().span+i.Buffer.from(e,"utf8").length,o};function Tn(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return Tn({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach((e=>{n+=r(e)})),n}function Rn(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,!(128&n))break}return t}function xn(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function Nn(e,t){if(!e)throw new Error(t||"Assertion failed")}class Bn{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const t of e){n(t.programId).isInvoked=!0;for(const e of t.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new Bn(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Nn(e.length<=256,"Max static account keys length exceeded");const t=e.filter((([,e])=>e.isSigner&&e.isWritable)),r=e.filter((([,e])=>e.isSigner&&!e.isWritable)),n=e.filter((([,e])=>!e.isSigner&&e.isWritable)),i=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Nn(t.length>0,"Expected at least one writable signer key");const[e]=t[0];Nn(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map((([e])=>new yn(e))),...r.map((([e])=>new yn(e))),...n.map((([e])=>new yn(e))),...i.map((([e])=>new yn(e)))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const t=new yn(i),o=e.findIndex((e=>e.equals(t)));o>=0&&(Nn(o<256,"Max lookup table index exceeded"),r.push(o),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const Pn="Reached end of buffer unexpectedly";function Mn(e){if(0===e.length)throw new Error(Pn);return e.shift()}function Dn(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(Pn);return e.splice(...t)}class Ln{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new yn(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:rt().decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new On(this.staticAccountKeys)}static compile(e){const t=Bn.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new On(n).compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:rt().encode(e.data)})));return new Ln({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){return e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];xn(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=Array.from(rt().decode(e.data));let o=[];xn(o,t.length);let s=[];return xn(s,n.length),{programIdIndex:r,keyIndicesCount:i.Buffer.from(o),keyIndices:t,dataLength:i.Buffer.from(s),data:n}}));let n=[];xn(n,r.length);let o=i.Buffer.alloc(wn);i.Buffer.from(n).copy(o);let s=n.length;r.forEach((e=>{const t=St.w3([St.u8("programIdIndex"),St.av(e.keyIndicesCount.length,"keyIndicesCount"),St.O6(St.u8("keyIndex"),e.keyIndices.length,"keyIndices"),St.av(e.dataLength.length,"dataLength"),St.O6(St.u8("userdatum"),e.data.length,"data")]).encode(e,o,s);s+=t})),o=o.slice(0,s);const a=St.w3([St.av(1,"numRequiredSignatures"),St.av(1,"numReadonlySignedAccounts"),St.av(1,"numReadonlyUnsignedAccounts"),St.av(t.length,"keyCount"),St.O6(An("key"),e,"keys"),An("recentBlockhash")]),c={numRequiredSignatures:i.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:i.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:i.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:i.Buffer.from(t),keys:this.accountKeys.map((e=>cn(e.toBytes()))),recentBlockhash:rt().decode(this.recentBlockhash)};let u=i.Buffer.alloc(2048);const h=a.encode(c,u);return o.copy(u,h),u.slice(0,h+o.length)}static from(e){let t=[...e];const r=Mn(t);if(r!==(r&vn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=Mn(t),o=Mn(t),s=Rn(t);let a=[];for(let e=0;e<s;e++){const e=Dn(t,0,pn);a.push(new yn(i.Buffer.from(e)))}const c=Dn(t,0,pn),u=Rn(t);let h=[];for(let e=0;e<u;e++){const e=Mn(t),r=Dn(t,0,Rn(t)),n=Dn(t,0,Rn(t)),o=rt().encode(i.Buffer.from(n));h.push({programIdIndex:e,accounts:r,data:o})}const l={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:rt().encode(i.Buffer.from(c)),accountKeys:a,instructions:h};return new Ln(l)}}class Un{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new On(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){return e-r<this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0)}if(e>=this.header.numRequiredSignatures){return e-t<r-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=Bn.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const e of i){const i=t.extractTableLookup(e);if(void 0!==i){const[e,{writable:t,readonly:o}]=i;r.push(e),n.writable.push(...t),n.readonly.push(...o)}}const[o,s]=t.getMessageComponents(),a=new On(s,n).compileInstructions(e.instructions);return new Un({header:o,staticAccountKeys:s,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const e=Array();xn(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();xn(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();xn(i,this.addressTableLookups.length);const o=St.w3([St.u8("prefix"),St.w3([St.u8("numRequiredSignatures"),St.u8("numReadonlySignedAccounts"),St.u8("numReadonlyUnsignedAccounts")],"header"),St.av(e.length,"staticAccountKeysLength"),St.O6(An(),this.staticAccountKeys.length,"staticAccountKeys"),An("recentBlockhash"),St.av(r.length,"instructionsLength"),St.av(t.length,"serializedInstructions"),St.av(i.length,"addressTableLookupsLength"),St.av(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(wn),a=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:rt().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,a)}serializeInstructions(){let e=0;const t=new Uint8Array(wn);for(const r of this.compiledInstructions){const n=Array();xn(n,r.accountKeyIndexes.length);const i=Array();xn(i,r.data.length);e+=St.w3([St.u8("programIdIndex"),St.av(n.length,"encodedAccountKeyIndexesLength"),St.O6(St.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),St.av(i.length,"encodedDataLength"),St.av(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(wn);for(const r of this.addressTableLookups){const n=Array();xn(n,r.writableIndexes.length);const i=Array();xn(i,r.readonlyIndexes.length);e+=St.w3([An("accountKey"),St.av(n.length,"encodedWritableIndexesLength"),St.O6(St.u8(),r.writableIndexes.length,"writableIndexes"),St.av(i.length,"encodedReadonlyIndexesLength"),St.O6(St.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Mn(t),n=r&vn;Nn(r!==n,"Expected versioned message but received legacy message");Nn(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:Mn(t),numReadonlySignedAccounts:Mn(t),numReadonlyUnsignedAccounts:Mn(t)},o=[],s=Rn(t);for(let e=0;e<s;e++)o.push(new yn(Dn(t,0,pn)));const a=rt().encode(Dn(t,0,pn)),c=Rn(t),u=[];for(let e=0;e<c;e++){const e=Mn(t),r=Dn(t,0,Rn(t)),n=Rn(t),i=new Uint8Array(Dn(t,0,n));u.push({programIdIndex:e,accountKeyIndexes:r,data:i})}const h=Rn(t),l=[];for(let e=0;e<h;e++){const e=new yn(Dn(t,0,pn)),r=Dn(t,0,Rn(t)),n=Dn(t,0,Rn(t));l.push({accountKey:e,writableIndexes:r,readonlyIndexes:n})}return new Un({header:i,staticAccountKeys:o,recentBlockhash:a,compiledInstructions:u,addressTableLookups:l})}}const Kn={deserializeMessageVersion(e){const t=e[0],r=t&vn;return r===t?"legacy":r},deserialize:e=>{const t=Kn.deserializeMessageVersion(e);if("legacy"===t)return Ln.from(e);if(0===t)return Un.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Wn=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const Hn=i.Buffer.alloc(_n).fill(0);class zn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=i.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class jn{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new zn(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new yn(e),isSigner:!1,isWritable:!1})}));const o=[];i.forEach((e=>{const t=e.pubkey.toString(),r=o.findIndex((e=>e.pubkey.toString()===t));r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)})),o.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const s=o.findIndex((e=>e.pubkey.equals(r)));if(s>-1){const[e]=o.splice(s,1);e.isSigner=!0,e.isWritable=!0,o.unshift(e)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=o.findIndex((t=>t.pubkey.equals(e.publicKey)));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);o[t].isSigner||(o[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,u=0;const h=[],l=[];o.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(h.push(e.toString()),a+=1,r||(c+=1)):(l.push(e.toString()),r||(u+=1))}));const d=h.concat(l),f=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map((e=>d.indexOf(e.pubkey.toString()))),data:rt().encode(t)}}));return f.forEach((e=>{Nn(e.programIdIndex>=0),e.accounts.forEach((e=>Nn(e>=0)))})),new Ln({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:e,instructions:f})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){if(this.signatures.every(((e,r)=>t[r].equals(e.publicKey))))return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=sn(r,e.secretKey);this._addSignature(e.publicKey,cn(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Nn(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=i.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):an(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];xn(r,t.length);const n=r.length+64*t.length+e.length,o=i.Buffer.alloc(n);return Nn(t.length<256),i.Buffer.from(r).copy(o,0),t.forEach((({signature:e},t)=>{null!==e&&(Nn(64===e.length,"signature has invalid length"),i.Buffer.from(e).copy(o,r.length+64*t))})),e.copy(o,r.length+64*t.length),Nn(o.length<=wn,`Transaction too large: ${o.length} > ${wn}`),o}get keys(){return Nn(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return Nn(1===this.instructions.length),this.instructions[0].programId}get data(){return Nn(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=Rn(t);let n=[];for(let e=0;e<r;e++){const e=Dn(t,0,_n);n.push(rt().encode(i.Buffer.from(e)))}return jn.populate(Ln.from(t),n)}static populate(e,t=[]){const r=new jn;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==rt().encode(Hn)?null:rt().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new zn({keys:n,programId:e.accountKeys[t.programIdIndex],data:rt().decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class Fn{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:n,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:a}=r,c=o-s;Nn(c>0,"Message header is invalid");const u=e.staticAccountKeys.length-o-a;Nn(u>=0,"Message header is invalid");const h=e.getAccountKeys(t),l=h.get(0);if(void 0===l)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const e of n){const t=[];for(const n of e.accountKeyIndexes){const e=h.get(n);if(void 0===e)throw new Error(`Failed to find key for account key index ${n}`);let i;i=n<o?n<c:n<h.staticAccountKeys.length?n-o<u:n-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:i})}const n=h.get(e.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${e.programIdIndex}`);d.push(new zn({programId:n,data:cn(e.data),keys:t}))}return new Fn({payerKey:l,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return Ln.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Un.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class qn{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)Nn(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(_n));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();xn(t,this.signatures.length);const r=St.w3([St.av(t.length,"encodedSignaturesLength"),St.O6(Cn(),this.signatures.length,"signatures"),St.av(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=Rn(t);for(let e=0;e<n;e++)r.push(new Uint8Array(Dn(t,0,_n)));const i=Kn.deserialize(new Uint8Array(t));return new qn(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));Nn(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=sn(t,n.secretKey)}}addSignature(e,t){Nn(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((t=>t.equals(e)));Nn(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}const $n=new yn("SysvarC1ock11111111111111111111111111111111"),Vn=new yn("SysvarEpochSchedu1e111111111111111111111111"),Xn=new yn("Sysvar1nstructions1111111111111111111111111"),Jn=new yn("SysvarRecentB1ockHashes11111111111111111111"),Gn=new yn("SysvarRent111111111111111111111111111111111"),Yn=new yn("SysvarRewards111111111111111111111111111111"),Zn=new yn("SysvarS1otHashes111111111111111111111111111"),Qn=new yn("SysvarS1otHistory11111111111111111111111111"),ei=new yn("SysvarStakeHistory1111111111111111111111111");class ti extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let s;switch(e){case"send":s=`Transaction ${t} resulted in an error. \n${r}. `+i+o;break;case"simulate":s=`Simulation failed. \nMessage: ${r}. \n`+i+o;break;default:s=`Unknown action '${e}'`}super(s),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}const ri={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ni extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function ii(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await e.sendTransaction(t,r,i);let s;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)s=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;s=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await e.confirmTransaction(o,n&&n.commitment)).value;if(s.err){if(null!=o)throw new ti({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(s)})`});throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`)}return o}function oi(e){return new Promise((t=>setTimeout(t,e)))}function si(e,t){const r=e.layout.span>=0?e.layout.span:Tn(e,t),n=i.Buffer.alloc(r),o=Object.assign({instruction:e.index},t);return e.layout.encode(o,n),n}function ai(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}const ci=St.I0("lamportsPerSignature"),ui=St.w3([St.DH("version"),St.DH("state"),An("authorizedPubkey"),An("nonce"),St.w3([ci],"feeCalculator")]),hi=ui.span;class li{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=ui.decode(cn(e),0);return new li({authorizedPubkey:new yn(t.authorizedPubkey),nonce:new yn(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const di=(fi=8,e=>{const t=(0,St.av)(fi,e),{encode:r,decode:n}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(t),o=t;return o.decode=(e,t)=>{const r=n(e,t);return(0,kt.k5)(i.Buffer.from(r))},o.encode=(e,t,n)=>{const i=(0,kt.Bq)(e,fi);return r(i,t,n)},o});var fi;class pi{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=St.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(gi))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:n}=ai(gi.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new yn(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ai(gi.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:n}=ai(gi.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new yn(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ai(gi.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:n,programId:i}=ai(gi.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new yn(t),seed:r,space:n,programId:new yn(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ai(gi.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new yn(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:n}=ai(gi.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new yn(t),seed:r,programId:new yn(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:n,space:i,programId:o}=ai(gi.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new yn(t),seed:r,lamports:n,space:i,programId:new yn(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ai(gi.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new yn(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ai(gi.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ai(gi.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ai(gi.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new yn(t)}}static checkProgramId(e){if(!e.equals(yi.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const gi=Object.freeze({Create:{index:0,layout:St.w3([St.DH("instruction"),St.Wg("lamports"),St.Wg("space"),An("programId")])},Assign:{index:1,layout:St.w3([St.DH("instruction"),An("programId")])},Transfer:{index:2,layout:St.w3([St.DH("instruction"),di("lamports")])},CreateWithSeed:{index:3,layout:St.w3([St.DH("instruction"),An("base"),In("seed"),St.Wg("lamports"),St.Wg("space"),An("programId")])},AdvanceNonceAccount:{index:4,layout:St.w3([St.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:St.w3([St.DH("instruction"),St.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:St.w3([St.DH("instruction"),An("authorized")])},AuthorizeNonceAccount:{index:7,layout:St.w3([St.DH("instruction"),An("authorized")])},Allocate:{index:8,layout:St.w3([St.DH("instruction"),St.Wg("space")])},AllocateWithSeed:{index:9,layout:St.w3([St.DH("instruction"),An("base"),In("seed"),St.Wg("space"),An("programId")])},AssignWithSeed:{index:10,layout:St.w3([St.DH("instruction"),An("base"),In("seed"),An("programId")])},TransferWithSeed:{index:11,layout:St.w3([St.DH("instruction"),di("lamports"),In("seed"),An("programId")])},UpgradeNonceAccount:{index:12,layout:St.w3([St.DH("instruction")])}});class yi{constructor(){}static createAccount(e){const t=si(gi.Create,{lamports:e.lamports,space:e.space,programId:cn(e.programId.toBuffer())});return new zn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;if("basePubkey"in e){t=si(gi.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:cn(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{t=si(gi.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new zn({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){t=si(gi.AssignWithSeed,{base:cn(e.basePubkey.toBuffer()),seed:e.seed,programId:cn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=si(gi.Assign,{programId:cn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new zn({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=si(gi.CreateWithSeed,{base:cn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:cn(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new zn({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new jn;"basePubkey"in e&&"seed"in e?t.add(yi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:hi,programId:this.programId})):t.add(yi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:hi,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=si(gi.InitializeNonceAccount,{authorized:cn(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:Gn,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new zn(r)}static nonceAdvance(e){const t=si(gi.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new zn(r)}static nonceWithdraw(e){const t=si(gi.WithdrawNonceAccount,{lamports:e.lamports});return new zn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Jn,isSigner:!1,isWritable:!1},{pubkey:Gn,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=si(gi.AuthorizeNonceAccount,{authorized:cn(e.newAuthorizedPubkey.toBuffer())});return new zn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;if("basePubkey"in e){t=si(gi.AllocateWithSeed,{base:cn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:cn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=si(gi.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new zn({keys:r,programId:this.programId,data:t})}}yi.programId=new yn("11111111111111111111111111111111");const mi=wn-300;class bi{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/bi.chunkSize)+1+1)}static async load(e,t,r,n,o){{const i=await e.getMinimumBalanceForRentExemption(o.length),s=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==o.length&&(a=a||new jn,a.add(yi.allocate({accountPubkey:r.publicKey,space:o.length}))),s.owner.equals(n)||(a=a||new jn,a.add(yi.assign({accountPubkey:r.publicKey,programId:n}))),s.lamports<i&&(a=a||new jn,a.add(yi.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:i-s.lamports})))}else a=(new jn).add(yi.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:i>0?i:1,space:o.length,programId:n}));null!==a&&await ii(e,a,[t,r],{commitment:"confirmed"})}const s=St.w3([St.DH("instruction"),St.DH("offset"),St.DH("bytesLength"),St.DH("bytesLengthPadding"),St.O6(St.u8("byte"),St.cY(St.DH(),-8),"bytes")]),a=bi.chunkSize;let c=0,u=o,h=[];for(;u.length>0;){const o=u.slice(0,a),l=i.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:o,bytesLength:0,bytesLengthPadding:0},l);const d=(new jn).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:l});if(h.push(ii(e,d,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await oi(1e3/e)}c+=a,u=u.slice(a)}await Promise.all(h);{const o=St.w3([St.DH("instruction")]),s=i.Buffer.alloc(o.span);o.encode({instruction:1},s);const a=(new jn).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Gn,isSigner:!1,isWritable:!1}],programId:n,data:s}),c="processed",u=await e.sendTransaction(a,[t,r],{preflightCommitment:c}),{context:h,value:l}=await e.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(l.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(l)})`);for(;;){try{if(await e.getSlot({commitment:c})>h.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(200))))}}return!0}}bi.chunkSize=mi;const wi=new yn("BPFLoader2111111111111111111111111111111111");class vi{static getMinNumSignatures(e){return bi.getMinNumSignatures(e)}static load(e,t,r,n,i){return bi.load(e,t,r,i,n)}}function _i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ei,Si;function ki(){if(Si)return Ei;Si=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var o,s,a,c,u,h,l;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(l=e.call(n))){for(a="[",s=n.length-1,o=0;o<s;o++)a+=r(n[o],!0)+",";return s>-1&&(a+=r(n[o],!0)),a+"]"}if("[object Object]"===l){for(s=(c=t(n).sort()).length,a="",o=0;o<s;)void 0!==(h=r(n[u=c[o]],!1))&&(a&&(a+=","),a+=JSON.stringify(u)+":"+h),o++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Ei=function(e){var t=r(e,!1);if(void 0!==t)return""+t}}var Oi=_i(ki());function Ai(e){let t=0;for(;e>1;)e/=2,t++;return t}class Ci{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=Ai(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,1+(t|=t>>32)))-Ai(32)-1;return[r,e-(this.getSlotsInEpoch(r)-32)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}var t}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ai(32)):this.slotsPerEpoch}}var Ii=globalThis.fetch;class Ti extends or{constructor(e,t,r){super((e=>{const r=nr(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r}),e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class Ri{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(xi,e),r=e.length-56;Nn(r>=0,"lookup table is invalid"),Nn(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=St.w3([St.O6(An(),n,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new yn(t.authority[0]):void 0,addresses:i.map((e=>new yn(e)))}}}const xi={index:1,layout:St.w3([St.DH("typeIndex"),di("deactivationSlot"),St.I0("lastExtendedSlot"),St.u8("lastExtendedStartIndex"),St.u8(),St.O6(An(),St.cY(St.u8(),-1),"authority")])},Ni=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;const Bi=Zt(Wt(yn),Vt(),(e=>new yn(e))),Pi=Xt([Vt(),Ht("base64")]),Mi=Zt(Wt(i.Buffer),Pi,(e=>i.Buffer.from(e[0],"base64"))),Di=3e4;function Li(e){let t,r;if("string"==typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function Ui(e){return e.map((e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e))}function Ki(e){return Gt([Jt({jsonrpc:Ht("2.0"),id:Vt(),result:e}),Jt({jsonrpc:Ht("2.0"),id:Vt(),error:Jt({code:Yt(),message:Vt(),data:qt(Lt("any",(()=>!0)))})})])}const Wi=Ki(Yt());function Hi(e){return Zt(Ki(e),Wi,(t=>"error"in t?t:{...t,result:Pt(t.result,e)}))}function zi(e){return Hi(Jt({context:Jt({slot:Ft()}),value:e}))}function ji(e){return Jt({context:Jt({slot:Ft()}),value:e})}function Fi(e,t){return 0===e?new Un({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new yn(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:rt().decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new Ln(t)}const qi=Jt({foundation:Ft(),foundationTerm:Ft(),initial:Ft(),taper:Ft(),terminal:Ft()}),$i=Hi(Ut(jt(Jt({epoch:Ft(),effectiveSlot:Ft(),amount:Ft(),postBalance:Ft(),commission:qt(jt(Ft()))})))),Vi=Ut(Jt({slot:Ft(),prioritizationFee:Ft()})),Xi=Jt({total:Ft(),validator:Ft(),foundation:Ft(),epoch:Ft()}),Ji=Jt({epoch:Ft(),slotIndex:Ft(),slotsInEpoch:Ft(),absoluteSlot:Ft(),blockHeight:qt(Ft()),transactionCount:qt(Ft())}),Gi=Jt({slotsPerEpoch:Ft(),leaderScheduleSlotOffset:Ft(),warmup:Kt(),firstNormalEpoch:Ft(),firstNormalSlot:Ft()}),Yi=$t(Vt(),Ut(Ft())),Zi=jt(Gt([Jt({}),Vt()])),Qi=Jt({err:Zi}),eo=Ht("receivedSignature"),to=Jt({"solana-core":Vt(),"feature-set":qt(Ft())}),ro=Jt({program:Vt(),programId:Bi,parsed:Yt()}),no=Jt({programId:Bi,accounts:Ut(Bi),data:Vt()}),io=zi(Jt({err:jt(Gt([Jt({}),Vt()])),logs:jt(Ut(Vt())),accounts:qt(jt(Ut(jt(Jt({executable:Kt(),owner:Vt(),lamports:Ft(),data:Ut(Vt()),rentEpoch:qt(Ft())}))))),unitsConsumed:qt(Ft()),returnData:qt(jt(Jt({programId:Vt(),data:Xt([Vt(),Ht("base64")])}))),innerInstructions:qt(jt(Ut(Jt({index:Ft(),instructions:Ut(Gt([ro,no]))}))))})),oo=zi(Jt({byIdentity:$t(Vt(),Ut(Ft())),range:Jt({firstSlot:Ft(),lastSlot:Ft()})}));const so=Hi(qi),ao=Hi(Xi),co=Hi(Vi),uo=Hi(Ji),ho=Hi(Gi),lo=Hi(Yi),fo=Hi(Ft()),po=zi(Jt({total:Ft(),circulating:Ft(),nonCirculating:Ft(),nonCirculatingAccounts:Ut(Bi)})),go=Jt({amount:Vt(),uiAmount:jt(Ft()),decimals:Ft(),uiAmountString:qt(Vt())}),yo=zi(Ut(Jt({address:Bi,amount:Vt(),uiAmount:jt(Ft()),decimals:Ft(),uiAmountString:qt(Vt())}))),mo=zi(Ut(Jt({pubkey:Bi,account:Jt({executable:Kt(),owner:Bi,lamports:Ft(),data:Mi,rentEpoch:Ft()})}))),bo=Jt({program:Vt(),parsed:Yt(),space:Ft()}),wo=zi(Ut(Jt({pubkey:Bi,account:Jt({executable:Kt(),owner:Bi,lamports:Ft(),data:bo,rentEpoch:Ft()})}))),vo=zi(Ut(Jt({lamports:Ft(),address:Bi}))),_o=Jt({executable:Kt(),owner:Bi,lamports:Ft(),data:Mi,rentEpoch:Ft()}),Eo=Jt({pubkey:Bi,account:_o}),So=Zt(Gt([Wt(i.Buffer),bo]),Gt([Pi,bo]),(e=>Array.isArray(e)?Pt(e,Mi):e)),ko=Jt({executable:Kt(),owner:Bi,lamports:Ft(),data:So,rentEpoch:Ft()}),Oo=Jt({pubkey:Bi,account:ko}),Ao=Jt({state:Gt([Ht("active"),Ht("inactive"),Ht("activating"),Ht("deactivating")]),active:Ft(),inactive:Ft()}),Co=Hi(Ut(Jt({signature:Vt(),slot:Ft(),err:Zi,memo:jt(Vt()),blockTime:qt(jt(Ft()))}))),Io=Hi(Ut(Jt({signature:Vt(),slot:Ft(),err:Zi,memo:jt(Vt()),blockTime:qt(jt(Ft()))}))),To=Jt({subscription:Ft(),result:ji(_o)}),Ro=Jt({pubkey:Bi,account:_o}),xo=Jt({subscription:Ft(),result:ji(Ro)}),No=Jt({parent:Ft(),slot:Ft(),root:Ft()}),Bo=Jt({subscription:Ft(),result:No}),Po=Gt([Jt({type:Gt([Ht("firstShredReceived"),Ht("completed"),Ht("optimisticConfirmation"),Ht("root")]),slot:Ft(),timestamp:Ft()}),Jt({type:Ht("createdBank"),parent:Ft(),slot:Ft(),timestamp:Ft()}),Jt({type:Ht("frozen"),slot:Ft(),timestamp:Ft(),stats:Jt({numTransactionEntries:Ft(),numSuccessfulTransactions:Ft(),numFailedTransactions:Ft(),maxTransactionsPerEntry:Ft()})}),Jt({type:Ht("dead"),slot:Ft(),timestamp:Ft(),err:Vt()})]),Mo=Jt({subscription:Ft(),result:Po}),Do=Jt({subscription:Ft(),result:ji(Gt([Qi,eo]))}),Lo=Jt({subscription:Ft(),result:Ft()}),Uo=Jt({pubkey:Vt(),gossip:jt(Vt()),tpu:jt(Vt()),rpc:jt(Vt()),version:jt(Vt())}),Ko=Jt({votePubkey:Vt(),nodePubkey:Vt(),activatedStake:Ft(),epochVoteAccount:Kt(),epochCredits:Ut(Xt([Ft(),Ft(),Ft()])),commission:Ft(),lastVote:Ft(),rootSlot:jt(Ft())}),Wo=Hi(Jt({current:Ut(Ko),delinquent:Ut(Ko)})),Ho=Gt([Ht("processed"),Ht("confirmed"),Ht("finalized")]),zo=Jt({slot:Ft(),confirmations:jt(Ft()),err:Zi,confirmationStatus:qt(Ho)}),jo=zi(Ut(jt(zo))),Fo=Hi(Ft()),qo=Jt({accountKey:Bi,writableIndexes:Ut(Ft()),readonlyIndexes:Ut(Ft())}),$o=Jt({signatures:Ut(Vt()),message:Jt({accountKeys:Ut(Vt()),header:Jt({numRequiredSignatures:Ft(),numReadonlySignedAccounts:Ft(),numReadonlyUnsignedAccounts:Ft()}),instructions:Ut(Jt({accounts:Ut(Ft()),data:Vt(),programIdIndex:Ft()})),recentBlockhash:Vt(),addressTableLookups:qt(Ut(qo))})}),Vo=Jt({pubkey:Bi,signer:Kt(),writable:Kt(),source:qt(Gt([Ht("transaction"),Ht("lookupTable")]))}),Xo=Jt({accountKeys:Ut(Vo),signatures:Ut(Vt())}),Jo=Jt({parsed:Yt(),program:Vt(),programId:Bi}),Go=Jt({accounts:Ut(Bi),data:Vt(),programId:Bi}),Yo=Zt(Gt([Go,Jo]),Gt([Jt({parsed:Yt(),program:Vt(),programId:Vt()}),Jt({accounts:Ut(Vt()),data:Vt(),programId:Vt()})]),(e=>Pt(e,"accounts"in e?Go:Jo))),Zo=Jt({signatures:Ut(Vt()),message:Jt({accountKeys:Ut(Vo),instructions:Ut(Yo),recentBlockhash:Vt(),addressTableLookups:qt(jt(Ut(qo)))})}),Qo=Jt({accountIndex:Ft(),mint:Vt(),owner:qt(Vt()),programId:qt(Vt()),uiTokenAmount:go}),es=Jt({writable:Ut(Bi),readonly:Ut(Bi)}),ts=Jt({err:Zi,fee:Ft(),innerInstructions:qt(jt(Ut(Jt({index:Ft(),instructions:Ut(Jt({accounts:Ut(Ft()),data:Vt(),programIdIndex:Ft()}))})))),preBalances:Ut(Ft()),postBalances:Ut(Ft()),logMessages:qt(jt(Ut(Vt()))),preTokenBalances:qt(jt(Ut(Qo))),postTokenBalances:qt(jt(Ut(Qo))),loadedAddresses:qt(es),computeUnitsConsumed:qt(Ft())}),rs=Jt({err:Zi,fee:Ft(),innerInstructions:qt(jt(Ut(Jt({index:Ft(),instructions:Ut(Yo)})))),preBalances:Ut(Ft()),postBalances:Ut(Ft()),logMessages:qt(jt(Ut(Vt()))),preTokenBalances:qt(jt(Ut(Qo))),postTokenBalances:qt(jt(Ut(Qo))),loadedAddresses:qt(es),computeUnitsConsumed:qt(Ft())}),ns=Gt([Ht(0),Ht("legacy")]),is=Jt({pubkey:Vt(),lamports:Ft(),postBalance:jt(Ft()),rewardType:jt(Vt()),commission:qt(jt(Ft()))}),os=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),transactions:Ut(Jt({transaction:$o,meta:jt(ts),version:qt(ns)})),rewards:qt(Ut(is)),blockTime:jt(Ft()),blockHeight:jt(Ft())}))),ss=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),rewards:qt(Ut(is)),blockTime:jt(Ft()),blockHeight:jt(Ft())}))),as=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),transactions:Ut(Jt({transaction:Xo,meta:jt(ts),version:qt(ns)})),rewards:qt(Ut(is)),blockTime:jt(Ft()),blockHeight:jt(Ft())}))),cs=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),transactions:Ut(Jt({transaction:Zo,meta:jt(rs),version:qt(ns)})),rewards:qt(Ut(is)),blockTime:jt(Ft()),blockHeight:jt(Ft())}))),us=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),transactions:Ut(Jt({transaction:Xo,meta:jt(rs),version:qt(ns)})),rewards:qt(Ut(is)),blockTime:jt(Ft()),blockHeight:jt(Ft())}))),hs=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),rewards:qt(Ut(is)),blockTime:jt(Ft()),blockHeight:jt(Ft())}))),ls=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),transactions:Ut(Jt({transaction:$o,meta:jt(ts)})),rewards:qt(Ut(is)),blockTime:jt(Ft())}))),ds=Hi(jt(Jt({blockhash:Vt(),previousBlockhash:Vt(),parentSlot:Ft(),signatures:Ut(Vt()),blockTime:jt(Ft())}))),fs=Hi(jt(Jt({slot:Ft(),meta:jt(ts),blockTime:qt(jt(Ft())),transaction:$o,version:qt(ns)}))),ps=Hi(jt(Jt({slot:Ft(),transaction:Zo,meta:jt(rs),blockTime:qt(jt(Ft())),version:qt(ns)}))),gs=zi(Jt({blockhash:Vt(),lastValidBlockHeight:Ft()})),ys=zi(Kt()),ms=Hi(Ut(Jt({slot:Ft(),numTransactions:Ft(),numSlots:Ft(),samplePeriodSecs:Ft()}))),bs=zi(jt(Jt({feeCalculator:Jt({lamportsPerSignature:Ft()})}))),ws=Hi(Vt()),vs=Hi(Vt()),_s=Jt({err:Zi,logs:Ut(Vt()),signature:Vt()}),Es=Jt({result:ji(_s),subscription:Ft()}),Ss={"solana-client":"js/1.0.0-maintenance"};class ks{constructor(e,t){let r,n,i,o,s,a;var c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:n}=Li(t),i=this._buildArgs([],r,void 0,n),o=Oi(i);return e[o]=e[o]??(async()=>{try{const e=Pt(await this._rpcRequest("getBlockHeight",i),Hi(Ft()));if("error"in e)throw new ni(e.error,"failed to get block height information");return e.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,s=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=r||function(e){const t=e.match(Ni);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${s}//${n}${null==a?"":`:${a+1}`}${o}`}(e),this._rpcClient=function(e,t,r,n,i,o){const s=r||Ii;let a;return null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(e,t)=>{const r=await new Promise(((r,i)=>{try{n(e,t,((e,t)=>r([e,t])))}catch(e){i(e)}}));return await s(...r)}),new(er())((async(r,n)=>{const o={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Ss)};try{let t,r=5,c=500;for(;t=a?await a(e,o):await s(e,o),429===t.status&&!0!==i&&(r-=1,0!==r);)console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${c}ms delay...`),await oi(c),c*=2;const u=await t.text();t.ok?n(null,u):n(new Error(`${t.status} ${t.statusText}: ${u}`))}catch(e){e instanceof Error&&n(e)}}),{})}(e,n,i,o,s,a),this._rpcRequest=(c=this._rpcClient,(e,t)=>new Promise(((r,n)=>{c.request(e,t,((e,t)=>{e?n(e):r(t)}))}))),this._rpcBatchRequest=function(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}(this._rpcClient),this._rpcWebSocket=new Ti(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgs([e.toBase58()],r,void 0,n),o=Pt(await this._rpcRequest("getBalance",i),zi(Ft()));if("error"in o)throw new ni(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=Pt(await this._rpcRequest("getBlockTime",[e]),Hi(jt(Ft())));if("error"in t)throw new ni(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){const e=Pt(await this._rpcRequest("minimumLedgerSlot",[]),Hi(Ft()));if("error"in e)throw new ni(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const e=Pt(await this._rpcRequest("getFirstAvailableBlock",[]),fo);if("error"in e)throw new ni(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=Pt(await this._rpcRequest("getSupply",[t]),po);if("error"in r)throw new ni(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=Pt(await this._rpcRequest("getTokenSupply",r),zi(go));if("error"in n)throw new ni(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=Pt(await this._rpcRequest("getTokenAccountBalance",r),zi(go));if("error"in n)throw new ni(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=Li(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const s=this._buildArgs(o,n,"base64",i),a=Pt(await this._rpcRequest("getTokenAccountsByOwner",s),mo);if("error"in a)throw new ni(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),o=Pt(await this._rpcRequest("getTokenAccountsByOwner",i),wo);if("error"in o)throw new ni(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=Pt(await this._rpcRequest("getLargestAccounts",r),vo);if("error"in n)throw new ni(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=Pt(await this._rpcRequest("getTokenLargestAccounts",r),yo);if("error"in n)throw new ni(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgs([e.toBase58()],r,"base64",n),o=Pt(await this._rpcRequest("getAccountInfo",i),zi(jt(_o)));if("error"in o)throw new ni(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=Pt(await this._rpcRequest("getAccountInfo",i),zi(jt(ko)));if("error"in o)throw new ni(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw new Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=Li(t),i=e.map((e=>e.toBase58())),o=this._buildArgs([i],r,"jsonParsed",n),s=Pt(await this._rpcRequest("getMultipleAccounts",o),zi(Ut(jt(ko))));if("error"in s)throw new ni(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=Li(t),i=e.map((e=>e.toBase58())),o=this._buildArgs([i],r,"base64",n),s=Pt(await this._rpcRequest("getMultipleAccounts",o),zi(Ut(jt(_o))));if("error"in s)throw new ni(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=Li(t),o=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),s=Pt(await this._rpcRequest("getStakeActivation",o),Hi(Ao));if("error"in s)throw new ni(s.error,`failed to get Stake Activation ${e.toBase58()}`);return s.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=Li(t),{encoding:i,...o}=n||{},s=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:Ui(o.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",s),c=Ut(Eo),u=!0===o.withContext?Pt(a,zi(c)):Pt(a,Hi(c));if("error"in u)throw new ni(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=Pt(await this._rpcRequest("getProgramAccounts",i),Hi(Ut(Oo)));if("error"in o)throw new ni(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{const t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=rt().decode(r)}catch(e){throw new Error("signature must be base58 encoded: "+r)}return Nn(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(()=>{r(e.reason)})))}))}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise(((o,s)=>{try{r=this.onSignature(t,((e,t)=>{r=void 0;const n={context:t,value:e};o({__type:Wn.PROCESSED,response:n})}),e);const a=new Promise((e=>{null==r?e():n=this._onSubscriptionStateChange(r,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(t);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(c?.err)s(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,o({__type:Wn.PROCESSED,response:{context:n,value:c}})}})()}catch(e){s(e)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1;const o=new Promise((t=>{const n=async()=>{try{return await this.getBlockHeight(e)}catch(e){return-1}};(async()=>{let e=await n();if(!i){for(;e<=r;){if(await oi(1e3),i)return;if(e=await n(),i)return}t({__type:Wn.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);let u;try{const e=await Promise.race([c,a,o]);if(e.__type!==Wn.PROCESSED)throw new En(n);u=e.response}finally{i=!0,s()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:o}}){let s=!1;const a=new Promise((t=>{let o=i,a=null;const c=async()=>{try{const{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch(e){return o}};(async()=>{if(o=await c(),!s)for(;;){if(i!==o)return void t({__type:Wn.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await oi(2e3),s)return;if(o=await c(),s)return}})()})),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(t);let l;try{const t=await Promise.race([h,u,a]);if(t.__type===Wn.PROCESSED)l=t.response;else{let n;for(;;){const e=await this.getSignatureStatus(o);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){n=e;break}await oi(400)}if(!n?.value)throw new kn(o);{const t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new kn(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new kn(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new kn(o)}l={context:n.context,value:{err:n.value.err}}}}}finally{s=!0,c()}return l}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const n=new Promise((t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout((()=>t({__type:Wn.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let s;try{const e=await Promise.race([o,n]);if(e.__type!==Wn.PROCESSED)throw new Sn(t,e.timeoutMs/1e3);s=e.response}finally{clearTimeout(r),i()}return s}async getClusterNodes(){const e=Pt(await this._rpcRequest("getClusterNodes",[]),Hi(Ut(Uo)));if("error"in e)throw new ni(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=Pt(await this._rpcRequest("getVoteAccounts",t),Wo);if("error"in r)throw new ni(r.error,"failed to get vote accounts");return r.result}async getSlot(e){const{commitment:t,config:r}=Li(e),n=this._buildArgs([],t,void 0,r),i=Pt(await this._rpcRequest("getSlot",n),Hi(Ft()));if("error"in i)throw new ni(i.error,"failed to get slot");return i.result}async getSlotLeader(e){const{commitment:t,config:r}=Li(e),n=this._buildArgs([],t,void 0,r),i=Pt(await this._rpcRequest("getSlotLeader",n),Hi(Vt()));if("error"in i)throw new ni(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){const r=[e,t],n=Pt(await this._rpcRequest("getSlotLeaders",r),Hi(Ut(Bi)));if("error"in n)throw new ni(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);Nn(1===n.length);return{context:r,value:n[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=Pt(await this._rpcRequest("getSignatureStatuses",r),jo);if("error"in n)throw new ni(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){const{commitment:t,config:r}=Li(e),n=this._buildArgs([],t,void 0,r),i=Pt(await this._rpcRequest("getTransactionCount",n),Hi(Ft()));if("error"in i)throw new ni(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=Pt(await this._rpcRequest("getInflationGovernor",t),so);if("error"in r)throw new ni(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=Li(r),o=this._buildArgs([e.map((e=>e.toBase58()))],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),s=Pt(await this._rpcRequest("getInflationReward",o),$i);if("error"in s)throw new ni(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){const e=Pt(await this._rpcRequest("getInflationRate",[]),ao);if("error"in e)throw new ni(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){const{commitment:t,config:r}=Li(e),n=this._buildArgs([],t,void 0,r),i=Pt(await this._rpcRequest("getEpochInfo",n),uo);if("error"in i)throw new ni(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const e=Pt(await this._rpcRequest("getEpochSchedule",[]),ho);if("error"in e)throw new ni(e.error,"failed to get epoch schedule");const t=e.result;return new Ci(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){const e=Pt(await this._rpcRequest("getLeaderSchedule",[]),lo);if("error"in e)throw new ni(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=Pt(await this._rpcRequest("getMinimumBalanceForRentExemption",r),Fo);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){const t=Pt(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),ms);if("error"in t)throw new ni(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=Pt(await this._rpcRequest("getFeeCalculatorForBlockhash",r),bs);if("error"in n)throw new ni(n.error,"failed to get fee calculator");const{context:i,value:o}=n.result;return{context:i,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){const r=cn(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=Pt(await this._rpcRequest("getFeeForMessage",n),zi(jt(Ft())));if("error"in i)throw new ni(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map((e=>e.toBase58())),r=t?.length?[t]:[],n=Pt(await this._rpcRequest("getRecentPrioritizationFees",r),co);if("error"in n)throw new ni(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=Li(e),n=this._buildArgs([],t,void 0,r),i=Pt(await this._rpcRequest("getLatestBlockhash",n),gs);if("error"in i)throw new ni(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgs([e],r,void 0,n),o=Pt(await this._rpcRequest("isBlockhashValid",i),ys);if("error"in o)throw new ni(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){const e=Pt(await this._rpcRequest("getVersion",[]),Hi(to));if("error"in e)throw new ni(e.error,"failed to get version");return e.result}async getGenesisHash(){const e=Pt(await this._rpcRequest("getGenesisHash",[]),Hi(Vt()));if("error"in e)throw new ni(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=Pt(o,as);if("error"in e)throw e.error;return e.result}case"none":{const e=Pt(o,ss);if("error"in e)throw e.error;return e.result}default:{const e=Pt(o,os);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map((({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:Fi(r,e.message)},version:r})))}:null}}}catch(e){throw new ni(e,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=Pt(o,us);if("error"in e)throw e.error;return e.result}case"none":{const e=Pt(o,hs);if("error"in e)throw e.error;return e.result}default:{const e=Pt(o,cs);if("error"in e)throw e.error;return e.result}}}catch(e){throw new ni(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=Pt(await this._rpcRequest("getBlockProduction",n),oo);if("error"in i)throw new ni(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=Pt(await this._rpcRequest("getTransaction",i),fs);if("error"in o)throw new ni(o.error,"failed to get transaction");const s=o.result;return s?{...s,transaction:{...s.transaction,message:Fi(s.version,s.transaction.message)}}:s}async getParsedTransaction(e,t){const{commitment:r,config:n}=Li(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=Pt(await this._rpcRequest("getTransaction",i),ps);if("error"in o)throw new ni(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=Li(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=Pt(e,ps);if("error"in t)throw new ni(t.error,"failed to get transactions");return t.result}))}async getTransactions(e,t){const{commitment:r,config:n}=Li(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=Pt(e,fs);if("error"in t)throw new ni(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:Fi(r.version,r.transaction.message)}}:r}))}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=Pt(await this._rpcRequest("getBlock",r),ls);if("error"in n)throw new ni(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");const o={...i,transactions:i.transactions.map((({transaction:e,meta:t})=>{const r=new Ln(e.message);return{meta:t,transaction:{...e,message:r}}}))};return{...o,transactions:o.transactions.map((({transaction:e,meta:t})=>({meta:t,transaction:jn.populate(e.message,e.signatures)})))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=Pt(await this._rpcRequest("getBlocks",n),Hi(Ut(Ft())));if("error"in i)throw new ni(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=Pt(await this._rpcRequest("getBlock",r),ds);if("error"in n)throw new ni(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=Pt(await this._rpcRequest("getBlock",r),ds);if("error"in n)throw new ni(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=Pt(await this._rpcRequest("getTransaction",r),fs);if("error"in n)throw new ni(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const o=new Ln(i.transaction.message),s=i.transaction.signatures;return{...i,transaction:jn.populate(o,s)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=Pt(await this._rpcRequest("getTransaction",r),ps);if("error"in n)throw new ni(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((e=>{const t=Pt(e,ps);if("error"in t)throw new ni(t.error,"failed to get confirmed transactions");return t.result}))}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let o=await this.getSlot("finalized");for(;!("before"in n||++r>o);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=Pt(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),Co);if("error"in i)throw new ni(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=Pt(await this._rpcRequest("getSignaturesForAddress",n),Io);if("error"in i)throw new ni(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new Ri({key:e,state:Ri.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=li.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=Pt(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),ws);if("error"in r)throw new ni(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await oi(100);const e=Date.now()-this._blockhashInfo.lastFetch>=Di;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await oi(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=Li(e),n=this._buildArgs([],t,"base64",r),i=Pt(await this._rpcRequest("getStakeMinimumDelegation",n),zi(Ft()));if("error"in i)throw new ni(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){if("message"in e){const n=e.serialize(),o=i.Buffer.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const s=t||{};s.encoding="base64","commitment"in s||(s.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(s.innerInstructions=t.innerInstructions);const a=[o,s],c=Pt(await this._rpcRequest("simulateTransaction",a),io);if("error"in c)throw new Error("failed to simulate transaction: "+c.error.message);return c.result}let n;if(e instanceof jn){let t=e;n=new jn,n.feePayer=t.feePayer,n.instructions=e.instructions,n.nonceInfo=t.nonceInfo,n.signatures=t.signatures}else n=jn.populate(e),n._message=n._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const o=t;if(n.nonceInfo&&o)n.sign(...o);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=t.lastValidBlockHeight,n.recentBlockhash=t.blockhash,!o)break;if(n.sign(...o),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const s=n._compile(),a=s.serialize(),c=n._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:s.nonProgramIds()).map((e=>e.toBase58()));u.accounts={encoding:"base64",addresses:e}}o&&(u.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(u.innerInstructions=t.innerInstructions);const h=[c,u],l=Pt(await this._rpcRequest("simulateTransaction",h),io);if("error"in l){let e;if("data"in l.error&&(e=l.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(l.error.message,r)}throw new ti({action:"simulate",signature:"",transactionMessage:l.error.message,logs:e})}return l.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=cn(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const o=[e,r],s=Pt(await this._rpcRequest("sendTransaction",o),vs);if("error"in s){let e;throw"data"in s.error&&(e=s.error.data.logs),new ti({action:n?"send":"simulate",signature:"",transactionMessage:s.error.message,logs:e})}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:o}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(e){console.error(e)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=Pt(e,To);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=Oi([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];Nn(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=Li(r),o=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=Pt(e,xo);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:o}=Li(r),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(n?{filters:Ui(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=Pt(e,Es);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=Pt(e,Bo);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=Pt(e,Mo);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=Pt(e,Do);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],n,void 0,i),s=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(s)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=Pt(e,Lo);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Os{constructor(e){this._keypair=void 0,this._keypair=e??rn()}static generate(){return new Os(rn())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=nn(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new Os({publicKey:r,secretKey:e})}static fromSeed(e){const t=nn(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Os({publicKey:t,secretKey:r})}get publicKey(){return new yn(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const As=Object.freeze({CreateLookupTable:{index:0,layout:St.w3([St.DH("instruction"),di("recentSlot"),St.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:St.w3([St.DH("instruction")])},ExtendLookupTable:{index:2,layout:St.w3([St.DH("instruction"),di(),St.O6(An(),St.cY(St.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:St.w3([St.DH("instruction")])},CloseLookupTable:{index:4,layout:St.w3([St.DH("instruction")])}});class Cs{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=St.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(As))if(n.index==t){r=e;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ai(As.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ai(As.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map((e=>new yn(e)))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Is.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Is{constructor(){}static createLookupTable(e){const[t,r]=yn.findProgramAddressSync([e.authority.toBuffer(),(0,kt.Bq)(BigInt(e.recentSlot),8)],this.programId),n=si(As.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:yi.programId,isSigner:!1,isWritable:!1}];return[new zn({programId:this.programId,keys:i,data:n}),t]}static freezeLookupTable(e){const t=si(As.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new zn({programId:this.programId,keys:r,data:t})}static extendLookupTable(e){const t=si(As.ExtendLookupTable,{addresses:e.addresses.map((e=>e.toBytes()))}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:yi.programId,isSigner:!1,isWritable:!1}),new zn({programId:this.programId,keys:r,data:t})}static deactivateLookupTable(e){const t=si(As.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new zn({programId:this.programId,keys:r,data:t})}static closeLookupTable(e){const t=si(As.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new zn({programId:this.programId,keys:r,data:t})}}Is.programId=new yn("AddressLookupTab1e1111111111111111111111111");class Ts{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=St.u8("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Rs))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=ai(Rs.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ai(Rs.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ai(Rs.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ai(Rs.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(xs.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Rs=Object.freeze({RequestUnits:{index:0,layout:St.w3([St.u8("instruction"),St.DH("units"),St.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:St.w3([St.u8("instruction"),St.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:St.w3([St.u8("instruction"),St.DH("units")])},SetComputeUnitPrice:{index:3,layout:St.w3([St.u8("instruction"),di("microLamports")])}});class xs{constructor(){}static requestUnits(e){const t=si(Rs.RequestUnits,e);return new zn({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){const t=si(Rs.RequestHeapFrame,e);return new zn({keys:[],programId:this.programId,data:t})}static setComputeUnitLimit(e){const t=si(Rs.SetComputeUnitLimit,e);return new zn({keys:[],programId:this.programId,data:t})}static setComputeUnitPrice(e){const t=si(Rs.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new zn({keys:[],programId:this.programId,data:t})}}xs.programId=new yn("ComputeBudget111111111111111111111111111111");const Ns=St.w3([St.u8("numSignatures"),St.u8("padding"),St.NX("signatureOffset"),St.NX("signatureInstructionIndex"),St.NX("publicKeyOffset"),St.NX("publicKeyInstructionIndex"),St.NX("messageDataOffset"),St.NX("messageDataSize"),St.NX("messageInstructionIndex")]);class Bs{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,instructionIndex:o}=e;Nn(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),Nn(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const s=Ns.span,a=s+t.length,c=a+n.length,u=i.Buffer.alloc(c+r.length),h=null==o?65535:o;return Ns.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:s,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},u),u.fill(t,s),u.fill(n,a),u.fill(r,c),new zn({keys:[],programId:Bs.programId,data:u})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Nn(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=Os.fromSecretKey(t),i=e.publicKey.toBytes(),o=sn(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}Bs.programId=new yn("Ed25519SigVerify111111111111111111111111111");en.utils.isValidPrivateKey;const Ps=en.getPublicKey,Ms=St.w3([St.u8("numSignatures"),St.NX("signatureOffset"),St.u8("signatureInstructionIndex"),St.NX("ethAddressOffset"),St.u8("ethAddressInstructionIndex"),St.NX("messageDataOffset"),St.NX("messageDataSize"),St.u8("messageInstructionIndex"),St.av(20,"ethAddress"),St.av(64,"signature"),St.u8("recoveryId")]);class Ds{constructor(){}static publicKeyToEthAddress(e){Nn(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return i.Buffer.from(Tr(cn(e))).slice(-20)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:o}=e;return Ds.createInstructionWithEthAddress({ethAddress:Ds.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:n,recoveryId:o,instructionIndex:s=0}=e;let a;a="string"==typeof t?t.startsWith("0x")?i.Buffer.from(t.substr(2),"hex"):i.Buffer.from(t,"hex"):t,Nn(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const c=12+a.length,u=c+n.length+1,h=i.Buffer.alloc(Ms.span+r.length);return Ms.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:s,signature:cn(n),ethAddress:cn(a),recoveryId:o},h),h.fill(cn(r),Ms.span),new zn({keys:[],programId:Ds.programId,data:h})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Nn(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=cn(t),o=Ps(e,!1).slice(1),s=i.Buffer.from(Tr(cn(r))),[a,c]=((e,t)=>{const r=en.sign(e,t);return[r.toCompactRawBytes(),r.recovery]})(s,e);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:a,recoveryId:c,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}var Ls;Ds.programId=new yn("KeccakSecp256k11111111111111111111111111111");const Us=new yn("StakeConfig11111111111111111111111111111111");class Ks{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Ws{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}Ls=Ws,Ws.default=new Ls(0,0,yn.default);class Hs{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=St.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(zs))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=ai(zs.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Ks(new yn(t.staker),new yn(t.withdrawer)),lockup:new Ws(r.unixTimestamp,r.epoch,new yn(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ai(zs.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=ai(zs.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new yn(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=ai(zs.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new yn(i),newAuthorizedPubkey:new yn(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ai(zs.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ai(zs.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ai(zs.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ai(zs.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Fs.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const zs=Object.freeze({Initialize:{index:0,layout:St.w3([St.DH("instruction"),((e="authorized")=>St.w3([An("staker"),An("withdrawer")],e))(),((e="lockup")=>St.w3([St.Wg("unixTimestamp"),St.Wg("epoch"),An("custodian")],e))()])},Authorize:{index:1,layout:St.w3([St.DH("instruction"),An("newAuthorized"),St.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:St.w3([St.DH("instruction")])},Split:{index:3,layout:St.w3([St.DH("instruction"),St.Wg("lamports")])},Withdraw:{index:4,layout:St.w3([St.DH("instruction"),St.Wg("lamports")])},Deactivate:{index:5,layout:St.w3([St.DH("instruction")])},Merge:{index:7,layout:St.w3([St.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:St.w3([St.DH("instruction"),An("newAuthorized"),St.DH("stakeAuthorizationType"),In("authoritySeed"),An("authorityOwner")])}}),js=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Fs{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||Ws.default,o=si(zs.Initialize,{authorized:{staker:cn(r.staker.toBuffer()),withdrawer:cn(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:cn(i.custodian.toBuffer())}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Gn,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new zn(s)}static createAccountWithSeed(e){const t=new jn;t.add(yi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new jn;t.add(yi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=si(zs.Delegate);return(new jn).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:Us,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:o}=e,s=si(zs.Authorize,{newAuthorized:cn(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),(new jn).add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=e,c=si(zs.AuthorizeWithSeed,{newAuthorized:cn(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:cn(i.toBuffer())}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1}];return a&&u.push({pubkey:a,isSigner:!0,isWritable:!1}),(new jn).add({keys:u,programId:this.programId,data:c})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,o=si(zs.Split,{lamports:i});return new zn({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){const r=new jn;return r.add(yi.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=e,c=new jn;return c.add(yi.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),t&&t>0&&c.add(yi.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=si(zs.Merge);return(new jn).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:o}=e,s=si(zs.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:ei,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),(new jn).add({keys:a,programId:this.programId,data:s})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=si(zs.Deactivate);return(new jn).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}Fs.programId=new yn("Stake11111111111111111111111111111111111111"),Fs.space=200;class qs{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}}class $s{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=St.DH("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(Vs))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ai(Vs.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new qs(new yn(t.nodePubkey),new yn(t.authorizedVoter),new yn(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=ai(Vs.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new yn(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=ai(Vs.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new yn(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new yn(n),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ai(Vs.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Js.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Vs=Object.freeze({InitializeAccount:{index:0,layout:St.w3([St.DH("instruction"),((e="voteInit")=>St.w3([An("nodePubkey"),An("authorizedVoter"),An("authorizedWithdrawer"),St.u8("commission")],e))()])},Authorize:{index:1,layout:St.w3([St.DH("instruction"),An("newAuthorized"),St.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:St.w3([St.DH("instruction"),St.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:St.w3([St.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:St.w3([St.DH("instruction"),((e="voteAuthorizeWithSeedArgs")=>St.w3([St.DH("voteAuthorizationType"),An("currentAuthorityDerivedKeyOwnerPubkey"),In("currentAuthorityDerivedKeySeed"),An("newAuthorized")],e))()])}}),Xs=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Js{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=si(Vs.InitializeAccount,{voteInit:{nodePubkey:cn(n.nodePubkey.toBuffer()),authorizedVoter:cn(n.authorizedVoter.toBuffer()),authorizedWithdrawer:cn(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Gn,isSigner:!1,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new zn(o)}static createAccount(e){const t=new jn;return t.add(yi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,o=si(Vs.Authorize,{newAuthorized:cn(n.toBuffer()),voteAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new jn).add({keys:s,programId:this.programId,data:o})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:s}=e,a=si(Vs.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:cn(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:cn(i.toBuffer()),voteAuthorizationType:o.index}}),c=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new jn).add({keys:c,programId:this.programId,data:a})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,o=si(Vs.Withdraw,{lamports:n}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new jn).add({keys:s,programId:this.programId,data:o})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Js.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=si(Vs.UpdateValidatorIdentity),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new jn).add({keys:o,programId:this.programId,data:i})}}Js.programId=new yn("Vote111111111111111111111111111111111111111"),Js.space=3762;const Gs=new yn("Va1idator1nfo111111111111111111111111111111"),Ys=Jt({name:Vt(),website:qt(Vt()),details:qt(Vt()),iconUrl:qt(Vt()),keybaseUsername:qt(Vt())});class Zs{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(2!==Rn(t))return null;const r=[];for(let e=0;e<2;e++){const e=new yn(Dn(t,0,pn)),n=1===Mn(t);r.push({publicKey:e,isSigner:n})}if(r[0].publicKey.equals(Gs)&&r[1].isSigner){const e=In().decode(i.Buffer.from(t)),n=JSON.parse(e);return Bt(n,Ys),new Zs(r[1].publicKey,n)}return null}}const Qs=new yn("Vote111111111111111111111111111111111111111"),ea=St.w3([An("nodePubkey"),An("authorizedWithdrawer"),St.u8("commission"),St.I0(),St.O6(St.w3([St.I0("slot"),St.DH("confirmationCount")]),St.cY(St.DH(),-8),"votes"),St.u8("rootSlotValid"),St.I0("rootSlot"),St.I0(),St.O6(St.w3([St.I0("epoch"),An("authorizedVoter")]),St.cY(St.DH(),-8),"authorizedVoters"),St.w3([St.O6(St.w3([An("authorizedPubkey"),St.I0("epochOfLastAuthorizedSwitch"),St.I0("targetEpoch")]),32,"buf"),St.I0("idx"),St.u8("isEmpty")],"priorVoters"),St.I0(),St.O6(St.w3([St.I0("epoch"),St.I0("credits"),St.I0("prevCredits")]),St.cY(St.DH(),-8),"epochCredits"),St.w3([St.I0("slot"),St.I0("timestamp")],"lastTimestamp")]);class ta{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const t=ea.decode(cn(e),4);let r=t.rootSlot;return t.rootSlotValid||(r=null),new ta({nodePubkey:new yn(t.nodePubkey),authorizedWithdrawer:new yn(t.authorizedWithdrawer),commission:t.commission,votes:t.votes,rootSlot:r,authorizedVoters:t.authorizedVoters.map(ra),priorVoters:ia(t.priorVoters),epochCredits:t.epochCredits,lastTimestamp:t.lastTimestamp})}}function ra({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new yn(e)}}function na({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new yn(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function ia({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(na),...e.slice(0,t).map(na)]}const oa={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function sa(e,t){const r=!1===t?"http":"https";if(!e)return oa[r].devnet;const n=oa[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function aa(e,t,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;const s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await e.sendRawTransaction(t,s),c=o&&o.commitment,u=i?e.confirmTransaction(i,c):e.confirmTransaction(a,c),h=(await u).value;if(h.err){if(null!=a)throw new ti({action:s?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(h)})`});throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`)}return a}const ca=1e9},5621:(e,t,r)=>{"use strict";var n=r(2861).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,o=0;e[r]===c;)i++,r++;for(var s=(e.length-r)*u+1>>>0,h=new Uint8Array(s);r<e.length;){var l=t[e.charCodeAt(r)];if(255===l)return;for(var d=0,f=s-1;(0!==l||d<o)&&-1!==f;f--,d++)l+=a*h[f]>>>0,h[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=d,r++}for(var p=s-o;p!==s&&0===h[p];)p++;var g=n.allocUnsafe(i+(s-p));g.fill(0,0,i);for(var y=i;p!==s;)g[y++]=h[p++];return g}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,o=0,s=t.length;o!==s&&0===t[o];)o++,r++;for(var u=(s-o)*h+1>>>0,l=new Uint8Array(u);o!==s;){for(var d=t[o],f=0,p=u-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=256*l[p]>>>0,l[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=f,o++}for(var g=u-i;g!==u&&0===l[g];)g++;for(var y=c.repeat(r);g<u;++g)y+=e.charAt(l[g]);return y},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},3466:(e,t,r)=>{var n=r(5621);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4512);function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function o(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function s(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function u(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function h(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function l(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function d(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),h(e/4294967296>>>0,t,r),h(e>>>0,t,r+4),t}function f(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),l(e>>>0,t,r),l(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=i,t.writeInt16BE=i,t.writeUint16LE=o,t.writeInt16LE=o,t.readInt32BE=s,t.readUint32BE=a,t.readInt32LE=c,t.readUint32LE=u,t.writeUint32BE=h,t.writeInt32BE=h,t.writeUint32LE=l,t.writeInt32LE=l,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=s(e,t),n=s(e,t+4);return 4294967296*r+n-4294967296*(n>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r-4294967296*(r>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=u(e,t);return 4294967296*u(e,t+4)+r},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=e/8+r-1;o>=r;o--)n+=t[o]*i,i*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+e/8;o++)n+=t[o]*i,i*=256;return n},t.writeUintBE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,s=e/8+i-1;s>=i;s--)r[s]=t/o&255,o*=256;return r},t.writeUintLE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,s=i;s<i+e/8;s++)r[s]=t/o&255,o*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},4904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const n=r(7052),i=r(4974),o=r(6228);function s(e){const t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;new Uint8Array(32)[0]=9;const a=s(),c=s([1]),u=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t){for(let r=0;r<16;r++)e[r]=0|t[r]}function g(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function y(e,t,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(e[r]^t[r]);e[r]^=i,t[r]^=i}}function m(e,t){const r=s(),n=s();for(let e=0;e<16;e++)n[e]=t[e];g(n),g(n),g(n);for(let e=0;e<2;e++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const e=r[15]>>16&1;r[14]&=65535,y(n,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&n[t],e[2*t+1]=n[t]>>8}function b(e,t){let r=0;for(let n=0;n<32;n++)r|=e[n]^t[n];return(1&r-1>>>8)-1}function w(e,t){const r=new Uint8Array(32),n=new Uint8Array(32);return m(r,e),m(n,t),b(r,n)}function v(e){const t=new Uint8Array(32);return m(t,e),1&t[0]}function _(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function E(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function S(e,t,r){let n,i,o=0,s=0,a=0,c=0,u=0,h=0,l=0,d=0,f=0,p=0,g=0,y=0,m=0,b=0,w=0,v=0,_=0,E=0,S=0,k=0,O=0,A=0,C=0,I=0,T=0,R=0,x=0,N=0,B=0,P=0,M=0,D=r[0],L=r[1],U=r[2],K=r[3],W=r[4],H=r[5],z=r[6],j=r[7],F=r[8],q=r[9],$=r[10],V=r[11],X=r[12],J=r[13],G=r[14],Y=r[15];n=t[0],o+=n*D,s+=n*L,a+=n*U,c+=n*K,u+=n*W,h+=n*H,l+=n*z,d+=n*j,f+=n*F,p+=n*q,g+=n*$,y+=n*V,m+=n*X,b+=n*J,w+=n*G,v+=n*Y,n=t[1],s+=n*D,a+=n*L,c+=n*U,u+=n*K,h+=n*W,l+=n*H,d+=n*z,f+=n*j,p+=n*F,g+=n*q,y+=n*$,m+=n*V,b+=n*X,w+=n*J,v+=n*G,_+=n*Y,n=t[2],a+=n*D,c+=n*L,u+=n*U,h+=n*K,l+=n*W,d+=n*H,f+=n*z,p+=n*j,g+=n*F,y+=n*q,m+=n*$,b+=n*V,w+=n*X,v+=n*J,_+=n*G,E+=n*Y,n=t[3],c+=n*D,u+=n*L,h+=n*U,l+=n*K,d+=n*W,f+=n*H,p+=n*z,g+=n*j,y+=n*F,m+=n*q,b+=n*$,w+=n*V,v+=n*X,_+=n*J,E+=n*G,S+=n*Y,n=t[4],u+=n*D,h+=n*L,l+=n*U,d+=n*K,f+=n*W,p+=n*H,g+=n*z,y+=n*j,m+=n*F,b+=n*q,w+=n*$,v+=n*V,_+=n*X,E+=n*J,S+=n*G,k+=n*Y,n=t[5],h+=n*D,l+=n*L,d+=n*U,f+=n*K,p+=n*W,g+=n*H,y+=n*z,m+=n*j,b+=n*F,w+=n*q,v+=n*$,_+=n*V,E+=n*X,S+=n*J,k+=n*G,O+=n*Y,n=t[6],l+=n*D,d+=n*L,f+=n*U,p+=n*K,g+=n*W,y+=n*H,m+=n*z,b+=n*j,w+=n*F,v+=n*q,_+=n*$,E+=n*V,S+=n*X,k+=n*J,O+=n*G,A+=n*Y,n=t[7],d+=n*D,f+=n*L,p+=n*U,g+=n*K,y+=n*W,m+=n*H,b+=n*z,w+=n*j,v+=n*F,_+=n*q,E+=n*$,S+=n*V,k+=n*X,O+=n*J,A+=n*G,C+=n*Y,n=t[8],f+=n*D,p+=n*L,g+=n*U,y+=n*K,m+=n*W,b+=n*H,w+=n*z,v+=n*j,_+=n*F,E+=n*q,S+=n*$,k+=n*V,O+=n*X,A+=n*J,C+=n*G,I+=n*Y,n=t[9],p+=n*D,g+=n*L,y+=n*U,m+=n*K,b+=n*W,w+=n*H,v+=n*z,_+=n*j,E+=n*F,S+=n*q,k+=n*$,O+=n*V,A+=n*X,C+=n*J,I+=n*G,T+=n*Y,n=t[10],g+=n*D,y+=n*L,m+=n*U,b+=n*K,w+=n*W,v+=n*H,_+=n*z,E+=n*j,S+=n*F,k+=n*q,O+=n*$,A+=n*V,C+=n*X,I+=n*J,T+=n*G,R+=n*Y,n=t[11],y+=n*D,m+=n*L,b+=n*U,w+=n*K,v+=n*W,_+=n*H,E+=n*z,S+=n*j,k+=n*F,O+=n*q,A+=n*$,C+=n*V,I+=n*X,T+=n*J,R+=n*G,x+=n*Y,n=t[12],m+=n*D,b+=n*L,w+=n*U,v+=n*K,_+=n*W,E+=n*H,S+=n*z,k+=n*j,O+=n*F,A+=n*q,C+=n*$,I+=n*V,T+=n*X,R+=n*J,x+=n*G,N+=n*Y,n=t[13],b+=n*D,w+=n*L,v+=n*U,_+=n*K,E+=n*W,S+=n*H,k+=n*z,O+=n*j,A+=n*F,C+=n*q,I+=n*$,T+=n*V,R+=n*X,x+=n*J,N+=n*G,B+=n*Y,n=t[14],w+=n*D,v+=n*L,_+=n*U,E+=n*K,S+=n*W,k+=n*H,O+=n*z,A+=n*j,C+=n*F,I+=n*q,T+=n*$,R+=n*V,x+=n*X,N+=n*J,B+=n*G,P+=n*Y,n=t[15],v+=n*D,_+=n*L,E+=n*U,S+=n*K,k+=n*W,O+=n*H,A+=n*z,C+=n*j,I+=n*F,T+=n*q,R+=n*$,x+=n*V,N+=n*X,B+=n*J,P+=n*G,M+=n*Y,o+=38*_,s+=38*E,a+=38*S,c+=38*k,u+=38*O,h+=38*A,l+=38*C,d+=38*I,f+=38*T,p+=38*R,g+=38*x,y+=38*N,m+=38*B,b+=38*P,w+=38*M,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=h,e[6]=l,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=y,e[12]=m,e[13]=b,e[14]=w,e[15]=v}function k(e,t){S(e,t,t)}function O(e,t){const r=s();let n;for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)k(r,r),2!==n&&4!==n&&S(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}function A(e,t){const r=s(),n=s(),i=s(),o=s(),a=s(),c=s(),u=s(),l=s(),d=s();E(r,e[1],e[0]),E(d,t[1],t[0]),S(r,r,d),_(n,e[0],e[1]),_(d,t[0],t[1]),S(n,n,d),S(i,e[3],t[3]),S(i,i,h),S(o,e[2],t[2]),_(o,o,o),E(a,n,r),E(c,o,i),_(u,o,i),_(l,n,r),S(e[0],a,c),S(e[1],l,u),S(e[2],u,c),S(e[3],a,l)}function C(e,t,r){for(let n=0;n<4;n++)y(e[n],t[n],r)}function I(e,t){const r=s(),n=s(),i=s();O(i,t[2]),S(r,t[0],i),S(n,t[1],i),m(e,n),e[31]^=v(r)<<7}function T(e,t,r){p(e[0],a),p(e[1],c),p(e[2],c),p(e[3],a);for(let n=255;n>=0;--n){const i=r[n/8|0]>>(7&n)&1;C(e,t,i),A(t,e),A(e,e),C(e,t,i)}}function R(e,t){const r=[s(),s(),s(),s()];p(r[0],l),p(r[1],d),p(r[2],c),S(r[3],l,d),T(e,r,t)}function x(e){if(e.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const r=(0,i.hash)(e);r[0]&=248,r[31]&=127,r[31]|=64;const n=new Uint8Array(32),o=[s(),s(),s(),s()];R(o,r),I(n,o);const a=new Uint8Array(64);return a.set(e),a.set(n,32),{publicKey:n,secretKey:a}}t.generateKeyPairFromSeed=x,t.generateKeyPair=function(e){const t=(0,n.randomBytes)(32,e),r=x(t);return(0,o.wipe)(t),r},t.extractPublicKeyFromSecretKey=function(e){if(e.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(e.subarray(32))};const N=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function B(e,t){let r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*N[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*N[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*N[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function P(e){const t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=e[r];for(let t=0;t<64;t++)e[t]=0;B(e,t)}function M(e,t){const r=s(),n=s(),i=s(),o=s(),h=s(),l=s(),d=s();return p(e[2],c),function(e,t){for(let r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(e[1],t),k(i,e[1]),S(o,i,u),E(i,i,e[2]),_(o,e[2],o),k(h,o),k(l,h),S(d,l,h),S(r,d,i),S(r,r,o),function(e,t){const r=s();let n;for(n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--)k(r,r),1!==n&&S(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}(r,r),S(r,r,i),S(r,r,o),S(r,r,o),S(e[0],r,o),k(n,e[0]),S(n,n,o),w(n,i)&&S(e[0],e[0],f),k(n,e[0]),S(n,n,o),w(n,i)?-1:(v(e[0])===t[31]>>7&&E(e[0],a,e[0]),S(e[3],e[0],e[1]),0)}t.sign=function(e,t){const r=new Float64Array(64),n=[s(),s(),s(),s()],o=(0,i.hash)(e.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;const a=new Uint8Array(64);a.set(o.subarray(32),32);const c=new i.SHA512;c.update(a.subarray(32)),c.update(t);const u=c.digest();c.clean(),P(u),R(n,u),I(a,n),c.reset(),c.update(a.subarray(0,32)),c.update(e.subarray(32)),c.update(t);const h=c.digest();P(h);for(let e=0;e<32;e++)r[e]=u[e];for(let e=0;e<32;e++)for(let t=0;t<32;t++)r[e+t]+=h[e]*o[t];return B(a.subarray(32),r),a},t.verify=function(e,r,n){const o=new Uint8Array(32),a=[s(),s(),s(),s()],c=[s(),s(),s(),s()];if(n.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(M(c,e))return!1;const u=new i.SHA512;u.update(n.subarray(0,32)),u.update(e),u.update(r);const h=u.digest();return P(h),T(a,c,h),R(c,n.subarray(32)),A(a,c),I(o,a),!b(n,o)},t.convertPublicKeyToX25519=function(e){let t=[s(),s(),s(),s()];if(M(t,e))throw new Error("Ed25519: invalid public key");let r=s(),n=s(),i=t[1];_(r,c,i),E(n,c,i),O(n,n),S(r,r,n);let o=new Uint8Array(32);return m(o,r),o},t.convertSecretKeyToX25519=function(e){const t=(0,i.hash)(e.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;const r=new Uint8Array(t.subarray(0,32));return(0,o.wipe)(t),r}},4512:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},7052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const n=r(5492),i=r(972),o=r(6228);function s(e,r=t.defaultRandomSource){return r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=s,t.randomUint32=function(e=t.defaultRandomSource){const r=s(4,e),n=(0,i.readUint32LE)(r);return(0,o.wipe)(r),n};const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,r=a,n=t.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const c=r.length,u=256-256%c;for(;e>0;){const t=s(Math.ceil(256*e/u),n);for(let n=0;n<t.length&&e>0;n++){const o=t[n];o<u&&(i+=r.charAt(o%c),e--)}(0,o.wipe)(t)}return i}t.randomString=c,t.randomStringForEntropy=function(e,r=a,n=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,n)}},7029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}},5821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const n=r(6228);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=r(9432);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let e=0;e<r.length;e++)r[e]=t[e];return(0,n.wipe)(t),r}}},5492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const n=r(7029),i=r(5821);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},204:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(972),i=r(6228);t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var o=function(){function e(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=a(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,o=t<<3,s=t%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<s-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,s-8),n.writeUint32BE(o,this._buffer,s-4),a(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.state),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.SHA256=o;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,r,i,o){for(;o>=64;){for(var a=t[0],c=t[1],u=t[2],h=t[3],l=t[4],d=t[5],f=t[6],p=t[7],g=0;g<16;g++){var y=i+4*g;e[g]=n.readUint32BE(r,y)}for(g=16;g<64;g++){var m=e[g-2],b=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,w=((m=e[g-15])>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;e[g]=(b+e[g-7]|0)+(w+e[g-16]|0)}for(g=0;g<64;g++){b=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&d^~l&f)|0)+(p+(s[g]+e[g]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;p=f,f=d,d=l,l=h+b|0,h=u,u=c,c=a,a=b+w|0}t[0]+=a,t[1]+=c,t[2]+=u,t[3]+=h,t[4]+=l,t[5]+=d,t[6]+=f,t[7]+=p,i+=64,o-=64}return i}t.hash=function(e){var t=new o;t.update(e);var r=t.digest();return t.clean(),r}},4974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(972),i=r(6228);t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var o=function(){function e(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._tempHi),i.wipe(this._tempLo),this.reset()},e.prototype.update=function(e,r){if(void 0===r&&(r=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,o=t<<3,s=t%128<112?128:256;this._buffer[r]=128;for(var c=r+1;c<s-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,s-8),n.writeUint32BE(o,this._buffer,s-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,s),this._finished=!0}for(c=0;c<this.digestLength/8;c++)n.writeUint32BE(this._stateHi[c],e,8*c),n.writeUint32BE(this._stateLo[c],e,8*c+4);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.stateHi),i.wipe(e.stateLo),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.SHA512=o;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(e,t,r,i,o,a,c){for(var u,h,l,d,f,p,g,y,m=r[0],b=r[1],w=r[2],v=r[3],_=r[4],E=r[5],S=r[6],k=r[7],O=i[0],A=i[1],C=i[2],I=i[3],T=i[4],R=i[5],x=i[6],N=i[7];c>=128;){for(var B=0;B<16;B++){var P=8*B+a;e[B]=n.readUint32BE(o,P),t[B]=n.readUint32BE(o,P+4)}for(B=0;B<80;B++){var M,D,L=m,U=b,K=w,W=v,H=_,z=E,j=S,F=O,q=A,$=C,V=I,X=T,J=R,G=x;if(f=65535&(h=N),p=h>>>16,g=65535&(u=k),y=u>>>16,f+=65535&(h=(T>>>14|_<<18)^(T>>>18|_<<14)^(_>>>9|T<<23)),p+=h>>>16,g+=65535&(u=(_>>>14|T<<18)^(_>>>18|T<<14)^(T>>>9|_<<23)),y+=u>>>16,f+=65535&(h=T&R^~T&x),p+=h>>>16,g+=65535&(u=_&E^~_&S),y+=u>>>16,u=s[2*B],f+=65535&(h=s[2*B+1]),p+=h>>>16,g+=65535&u,y+=u>>>16,u=e[B%16],p+=(h=t[B%16])>>>16,g+=65535&u,y+=u>>>16,g+=(p+=(f+=65535&h)>>>16)>>>16,f=65535&(h=d=65535&f|p<<16),p=h>>>16,g=65535&(u=l=65535&g|(y+=g>>>16)<<16),y=u>>>16,f+=65535&(h=(O>>>28|m<<4)^(m>>>2|O<<30)^(m>>>7|O<<25)),p+=h>>>16,g+=65535&(u=(m>>>28|O<<4)^(O>>>2|m<<30)^(O>>>7|m<<25)),y+=u>>>16,p+=(h=O&A^O&C^A&C)>>>16,g+=65535&(u=m&b^m&w^b&w),y+=u>>>16,M=65535&(g+=(p+=(f+=65535&h)>>>16)>>>16)|(y+=g>>>16)<<16,D=65535&f|p<<16,f=65535&(h=V),p=h>>>16,g=65535&(u=W),y=u>>>16,p+=(h=d)>>>16,g+=65535&(u=l),y+=u>>>16,b=L,w=U,v=K,_=W=65535&(g+=(p+=(f+=65535&h)>>>16)>>>16)|(y+=g>>>16)<<16,E=H,S=z,k=j,m=M,A=F,C=q,I=$,T=V=65535&f|p<<16,R=X,x=J,N=G,O=D,B%16==15)for(P=0;P<16;P++)u=e[P],f=65535&(h=t[P]),p=h>>>16,g=65535&u,y=u>>>16,u=e[(P+9)%16],f+=65535&(h=t[(P+9)%16]),p+=h>>>16,g+=65535&u,y+=u>>>16,l=e[(P+1)%16],f+=65535&(h=((d=t[(P+1)%16])>>>1|l<<31)^(d>>>8|l<<24)^(d>>>7|l<<25)),p+=h>>>16,g+=65535&(u=(l>>>1|d<<31)^(l>>>8|d<<24)^l>>>7),y+=u>>>16,l=e[(P+14)%16],p+=(h=((d=t[(P+14)%16])>>>19|l<<13)^(l>>>29|d<<3)^(d>>>6|l<<26))>>>16,g+=65535&(u=(l>>>19|d<<13)^(d>>>29|l<<3)^l>>>6),y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,e[P]=65535&g|y<<16,t[P]=65535&f|p<<16}f=65535&(h=O),p=h>>>16,g=65535&(u=m),y=u>>>16,u=r[0],p+=(h=i[0])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[0]=m=65535&g|y<<16,i[0]=O=65535&f|p<<16,f=65535&(h=A),p=h>>>16,g=65535&(u=b),y=u>>>16,u=r[1],p+=(h=i[1])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[1]=b=65535&g|y<<16,i[1]=A=65535&f|p<<16,f=65535&(h=C),p=h>>>16,g=65535&(u=w),y=u>>>16,u=r[2],p+=(h=i[2])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[2]=w=65535&g|y<<16,i[2]=C=65535&f|p<<16,f=65535&(h=I),p=h>>>16,g=65535&(u=v),y=u>>>16,u=r[3],p+=(h=i[3])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[3]=v=65535&g|y<<16,i[3]=I=65535&f|p<<16,f=65535&(h=T),p=h>>>16,g=65535&(u=_),y=u>>>16,u=r[4],p+=(h=i[4])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[4]=_=65535&g|y<<16,i[4]=T=65535&f|p<<16,f=65535&(h=R),p=h>>>16,g=65535&(u=E),y=u>>>16,u=r[5],p+=(h=i[5])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[5]=E=65535&g|y<<16,i[5]=R=65535&f|p<<16,f=65535&(h=x),p=h>>>16,g=65535&(u=S),y=u>>>16,u=r[6],p+=(h=i[6])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[6]=S=65535&g|y<<16,i[6]=x=65535&f|p<<16,f=65535&(h=N),p=h>>>16,g=65535&(u=k),y=u>>>16,u=r[7],p+=(h=i[7])>>>16,g+=65535&u,y+=u>>>16,y+=(g+=(p+=(f+=65535&h)>>>16)>>>16)>>>16,r[7]=k=65535&g|y<<16,i[7]=N=65535&f|p<<16,a+=128,c-=128}return a}t.hash=function(e){var t=new o;t.update(e);var r=t.digest();return t.clean(),r}},6228:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},5364:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*c+1>>>0,u=new Uint8Array(o);e[r];){var h=t[e.charCodeAt(r)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=s*u[d]>>>0,u[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=o-i;f!==o&&0===u[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=u[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var c=(o-i)*u+1>>>0,h=new Uint8Array(c);i!==o;){for(var l=t[i],d=0,f=c-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=c-n;p!==c&&0===h[p];)p++;for(var g=a.repeat(r);p<c;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=a(e),s=o[0],c=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,c)),h=0,l=c>0?s-4:s;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[h++]=255&t);1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},184:(e,t,r)=>{"use strict";var n=r(8287).Buffer;t.k5=function(e){{const t=n.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},t.Bq=function(e,t){{const r=e.toString(16),i=n.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return i.reverse(),i}}},9404:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(7790).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,i){for(var o=0,s=0,a=Math.min(e.length,r),c=t;c<a;c++){var u=e.charCodeAt(c)-48;o*=i,s=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&s<i,"Invalid character"),o+=s}return o}function h(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(e,h,h+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(e,h,e.length,t),h=0;h<s;h++)l*=t;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){h(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(e){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?d[6-c.length]+c+r:c+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],h=p[e];r="";var l=this.clone();for(l.negative=0;!l.isZero();){var g=l.modrn(h).toString(e);r=(l=l.idivn(h)).isZero()?g+r:d[u-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,d=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=d;f++){var p=u-f|0;h+=(s=(i=0|e.words[p])*(o=0|t.words[f])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(!(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(!(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(!(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var y=function(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,h=0|s[0],l=8191&h,d=h>>>13,f=0|s[1],p=8191&f,g=f>>>13,y=0|s[2],m=8191&y,b=y>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,k=E>>>13,O=0|s[5],A=8191&O,C=O>>>13,I=0|s[6],T=8191&I,R=I>>>13,x=0|s[7],N=8191&x,B=x>>>13,P=0|s[8],M=8191&P,D=P>>>13,L=0|s[9],U=8191&L,K=L>>>13,W=0|a[0],H=8191&W,z=W>>>13,j=0|a[1],F=8191&j,q=j>>>13,$=0|a[2],V=8191&$,X=$>>>13,J=0|a[3],G=8191&J,Y=J>>>13,Z=0|a[4],Q=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,he=0|a[8],le=8191&he,de=he>>>13,fe=0|a[9],pe=8191&fe,ge=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(l,H))|0)+((8191&(i=(i=Math.imul(l,z))+Math.imul(d,H)|0))<<13)|0;u=((o=Math.imul(d,z))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,H),i=(i=Math.imul(p,z))+Math.imul(g,H)|0,o=Math.imul(g,z);var me=(u+(n=n+Math.imul(l,F)|0)|0)+((8191&(i=(i=i+Math.imul(l,q)|0)+Math.imul(d,F)|0))<<13)|0;u=((o=o+Math.imul(d,q)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(m,H),i=(i=Math.imul(m,z))+Math.imul(b,H)|0,o=Math.imul(b,z),n=n+Math.imul(p,F)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(g,F)|0,o=o+Math.imul(g,q)|0;var be=(u+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(d,V)|0))<<13)|0;u=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(v,H),i=(i=Math.imul(v,z))+Math.imul(_,H)|0,o=Math.imul(_,z),n=n+Math.imul(m,F)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(b,F)|0,o=o+Math.imul(b,q)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,X)|0;var we=(u+(n=n+Math.imul(l,G)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(d,G)|0))<<13)|0;u=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,H),i=(i=Math.imul(S,z))+Math.imul(k,H)|0,o=Math.imul(k,z),n=n+Math.imul(v,F)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(_,F)|0,o=o+Math.imul(_,q)|0,n=n+Math.imul(m,V)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,G)|0,o=o+Math.imul(g,Y)|0;var ve=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(d,Q)|0))<<13)|0;u=((o=o+Math.imul(d,ee)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(A,H),i=(i=Math.imul(A,z))+Math.imul(C,H)|0,o=Math.imul(C,z),n=n+Math.imul(S,F)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(k,F)|0,o=o+Math.imul(k,q)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,X)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(m,G)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(b,G)|0,o=o+Math.imul(b,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,ee)|0;var _e=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(d,re)|0))<<13)|0;u=((o=o+Math.imul(d,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(T,H),i=(i=Math.imul(T,z))+Math.imul(R,H)|0,o=Math.imul(R,z),n=n+Math.imul(A,F)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(C,F)|0,o=o+Math.imul(C,q)|0,n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,X)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,X)|0,n=n+Math.imul(v,G)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var Ee=(u+(n=n+Math.imul(l,oe)|0)|0)+((8191&(i=(i=i+Math.imul(l,se)|0)+Math.imul(d,oe)|0))<<13)|0;u=((o=o+Math.imul(d,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(N,H),i=(i=Math.imul(N,z))+Math.imul(B,H)|0,o=Math.imul(B,z),n=n+Math.imul(T,F)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(R,F)|0,o=o+Math.imul(R,q)|0,n=n+Math.imul(A,V)|0,i=(i=i+Math.imul(A,X)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(k,G)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(m,re)|0,i=(i=i+Math.imul(m,ne)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var Se=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(i=(i=i+Math.imul(l,ue)|0)+Math.imul(d,ce)|0))<<13)|0;u=((o=o+Math.imul(d,ue)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(M,H),i=(i=Math.imul(M,z))+Math.imul(D,H)|0,o=Math.imul(D,z),n=n+Math.imul(N,F)|0,i=(i=i+Math.imul(N,q)|0)+Math.imul(B,F)|0,o=o+Math.imul(B,q)|0,n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(R,V)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(m,oe)|0,i=(i=i+Math.imul(m,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(g,ce)|0,o=o+Math.imul(g,ue)|0;var ke=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,de)|0)+Math.imul(d,le)|0))<<13)|0;u=((o=o+Math.imul(d,de)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,H),i=(i=Math.imul(U,z))+Math.imul(K,H)|0,o=Math.imul(K,z),n=n+Math.imul(M,F)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(D,F)|0,o=o+Math.imul(D,q)|0,n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(B,V)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(k,re)|0,o=o+Math.imul(k,ne)|0,n=n+Math.imul(v,oe)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(m,ce)|0,i=(i=i+Math.imul(m,ue)|0)+Math.imul(b,ce)|0,o=o+Math.imul(b,ue)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(g,le)|0,o=o+Math.imul(g,de)|0;var Oe=(u+(n=n+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,ge)|0)+Math.imul(d,pe)|0))<<13)|0;u=((o=o+Math.imul(d,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(K,F)|0,o=Math.imul(K,q),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,X)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,X)|0,n=n+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(B,G)|0,o=o+Math.imul(B,Y)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(k,oe)|0,o=o+Math.imul(k,se)|0,n=n+Math.imul(v,ce)|0,i=(i=i+Math.imul(v,ue)|0)+Math.imul(_,ce)|0,o=o+Math.imul(_,ue)|0,n=n+Math.imul(m,le)|0,i=(i=i+Math.imul(m,de)|0)+Math.imul(b,le)|0,o=o+Math.imul(b,de)|0;var Ae=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;u=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(U,V),i=(i=Math.imul(U,X))+Math.imul(K,V)|0,o=Math.imul(K,X),n=n+Math.imul(M,G)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,Y)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,n=n+Math.imul(S,ce)|0,i=(i=i+Math.imul(S,ue)|0)+Math.imul(k,ce)|0,o=o+Math.imul(k,ue)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(_,le)|0,o=o+Math.imul(_,de)|0;var Ce=(u+(n=n+Math.imul(m,pe)|0)|0)+((8191&(i=(i=i+Math.imul(m,ge)|0)+Math.imul(b,pe)|0))<<13)|0;u=((o=o+Math.imul(b,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,G),i=(i=Math.imul(U,Y))+Math.imul(K,G)|0,o=Math.imul(K,Y),n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,ee)|0,n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(B,re)|0,o=o+Math.imul(B,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(A,ce)|0,i=(i=i+Math.imul(A,ue)|0)+Math.imul(C,ce)|0,o=o+Math.imul(C,ue)|0,n=n+Math.imul(S,le)|0,i=(i=i+Math.imul(S,de)|0)+Math.imul(k,le)|0,o=o+Math.imul(k,de)|0;var Ie=(u+(n=n+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,ge)|0)+Math.imul(_,pe)|0))<<13)|0;u=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,Q),i=(i=Math.imul(U,ee))+Math.imul(K,Q)|0,o=Math.imul(K,ee),n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(D,re)|0,o=o+Math.imul(D,ne)|0,n=n+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,se)|0)+Math.imul(B,oe)|0,o=o+Math.imul(B,se)|0,n=n+Math.imul(T,ce)|0,i=(i=i+Math.imul(T,ue)|0)+Math.imul(R,ce)|0,o=o+Math.imul(R,ue)|0,n=n+Math.imul(A,le)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(C,le)|0,o=o+Math.imul(C,de)|0;var Te=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ge)|0)+Math.imul(k,pe)|0))<<13)|0;u=((o=o+Math.imul(k,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(K,re)|0,o=Math.imul(K,ne),n=n+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,n=n+Math.imul(N,ce)|0,i=(i=i+Math.imul(N,ue)|0)+Math.imul(B,ce)|0,o=o+Math.imul(B,ue)|0,n=n+Math.imul(T,le)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(R,le)|0,o=o+Math.imul(R,de)|0;var Re=(u+(n=n+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,ge)|0)+Math.imul(C,pe)|0))<<13)|0;u=((o=o+Math.imul(C,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,se))+Math.imul(K,oe)|0,o=Math.imul(K,se),n=n+Math.imul(M,ce)|0,i=(i=i+Math.imul(M,ue)|0)+Math.imul(D,ce)|0,o=o+Math.imul(D,ue)|0,n=n+Math.imul(N,le)|0,i=(i=i+Math.imul(N,de)|0)+Math.imul(B,le)|0,o=o+Math.imul(B,de)|0;var xe=(u+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ge)|0)+Math.imul(R,pe)|0))<<13)|0;u=((o=o+Math.imul(R,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,ce),i=(i=Math.imul(U,ue))+Math.imul(K,ce)|0,o=Math.imul(K,ue),n=n+Math.imul(M,le)|0,i=(i=i+Math.imul(M,de)|0)+Math.imul(D,le)|0,o=o+Math.imul(D,de)|0;var Ne=(u+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,ge)|0)+Math.imul(B,pe)|0))<<13)|0;u=((o=o+Math.imul(B,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(U,le),i=(i=Math.imul(U,de))+Math.imul(K,le)|0,o=Math.imul(K,de);var Be=(u+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ge)|0)+Math.imul(D,pe)|0))<<13)|0;u=((o=o+Math.imul(D,ge)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863;var Pe=(u+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ge))+Math.imul(K,pe)|0))<<13)|0;return u=((o=Math.imul(K,ge))+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,c[0]=ye,c[1]=me,c[2]=be,c[3]=we,c[4]=ve,c[5]=_e,c[6]=Ee,c[7]=Se,c[8]=ke,c[9]=Oe,c[10]=Ae,c[11]=Ce,c[12]=Ie,c[13]=Te,c[14]=Re,c[15]=xe,c[16]=Ne,c[17]=Be,c[18]=Pe,0!==u&&(c[19]=u,r.length++),r};function m(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var h=o-u,l=(0|e.words[h])*(0|t.words[u]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function b(e,t,r){return m(e,t,r)}function w(e,t){this.x=e,this.y=t}Math.imul||(y=g),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?y(this,e,t):r<63?g(this,e,t):r<1024?m(this,e,t):b(this,e,t)},w.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},w.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},w.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},w.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,d=u,f=0;f<s;f++){var p=r[h+f],g=n[h+f],y=r[h+f+s],m=n[h+f+s],b=l*y-d*m;m=l*m+d*y,y=b,r[h+f]=p+y,n[h+f]=g+m,r[h+f+s]=p-y,n[h+f+s]=g-m,f!==a&&(b=c*l-u*d,d=c*d+u*l,l=b)}},w.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},w.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},w.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},w.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(!(-8192&o))},w.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},w.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var f=0;f<n;f++){var p=a[f]*h[f]-c[f]*l[f];c[f]=a[f]*l[f]+c[f]*h[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),b(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<r;this.words[t]=c|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var d=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=t.clone();!t.isZero();){for(var d=0,f=1;!(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,g=1;!(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),s.isub(c)):(r.isub(t),a.isub(i),c.isub(s))}return{a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;!(t.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,d=1;!(r.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new A(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function C(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},i(E,_),E.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},E.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(S,_),i(k,_),i(O,_),O.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new E;else if("p224"===e)t=new S;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new O}return v[e]=t,t},A.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){n(!(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(h(e,e.umod(this.m)._forceRed(this)),e)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var g=f,y=0;0!==g.cmp(a);y++)g=g.redSqr();n(y<p);var m=this.pow(l,new o(1).iushln(p-y-1));d=d.redMul(m),l=m.redSqr(),f=f.redMul(l),p=y}return d},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new C(e)},i(C,A),C.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},C.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},C.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},C.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},C.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},2755:function(e,t,r){"use strict";var n=r(8287).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;const u=c(r(9404)),h=c(r(4989)),l=a(r(4281)),d=new("function"!=typeof TextDecoder?l.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(e){return"string"==typeof e&&(e=n.from(e,"utf8")),h.default.encode(n.from(e))},t.baseDecode=function(e){return n.from(h.default.decode(e))};const f=1024;class p extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=p;class g{constructor(){this.buf=n.alloc(f),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=n.concat([this.buf,n.alloc(f)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(n.from(new u.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(n.from(new u.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(n.from(new u.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(n.from(new u.default(e).toArray("le",64)))}writeBuffer(e){this.buf=n.concat([n.from(this.buf.subarray(0,this.length)),e,n.alloc(f)]),this.length+=e.length}writeString(e){this.maybeResize();const t=n.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(n.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function y(e,t,r){const n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new p("Reached the end of buffer when deserializing")}throw e}}}t.BinaryWriter=g;class m{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new u.default(e,"le")}readU128(){const e=this.readBuffer(16);return new u.default(e,"le")}readU256(){const e=this.readBuffer(32);return new u.default(e,"le")}readU512(){const e=this.readBuffer(64);return new u.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new p(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return d.decode(t)}catch(e){throw new p(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function w(e,t,r,n,i){try{if("string"==typeof n)i[`write${b(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new p(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new p(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)w(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{w(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),w(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,o)=>{w(e,t,o,n.key,i),w(e,t,r,n.value,i)}));break;default:throw new p(`FieldType ${n} unrecognized`)}else v(e,r,i)}catch(e){throw e instanceof p&&e.addToFieldPath(t),e}}function v(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new p(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{w(e,n,t[n],i,r)}));else{if("enum"!==n.kind)throw new p(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let o=0;o<n.values.length;++o){const[s,a]=n.values[o];if(s===i){r.writeU8(o),w(e,s,t[s],a,r);break}}}}}function _(e,t,r,n){try{if("string"==typeof r)return n[`read${b(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(_(e,null,r[0],n));return t}return n.readArray((()=>_(e,t,r[0],n)))}if("option"===r.kind){return n.readU8()?_(e,t,r.type,n):void 0}if("map"===r.kind){let i=new Map;const o=n.readU32();for(let s=0;s<o;s++){const o=_(e,t,r.key,n),s=_(e,t,r.value,n);i.set(o,s)}return i}return E(e,r,n)}catch(e){throw e instanceof p&&e.addToFieldPath(t),e}}function E(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new p(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,o]of e.get(t).fields)n[i]=_(e,i,o,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new p(`Enum index: ${i} is out of range`);const[o,s]=n.values[i],a=_(e,o,s,r);return new t({[o]:a})}throw new p(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}s([y],m.prototype,"readU8",null),s([y],m.prototype,"readU16",null),s([y],m.prototype,"readU32",null),s([y],m.prototype,"readU64",null),s([y],m.prototype,"readU128",null),s([y],m.prototype,"readU256",null),s([y],m.prototype,"readU512",null),s([y],m.prototype,"readString",null),s([y],m.prototype,"readFixedArray",null),s([y],m.prototype,"readArray",null),t.BinaryReader=m,t.serialize=function(e,t,r=g){const n=new r;return v(e,t,n),n.toArray()},t.deserialize=function(e,t,r,n=m){const i=new n(r),o=E(e,t,i);if(i.offset<r.length)throw new p(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o},t.deserializeUnchecked=function(e,t,r,n=m){return E(e,t,new n(r))}},1462:(e,t,r)=>{"use strict";var n=r(2861).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,o=0;e[r]===c;)i++,r++;for(var s=(e.length-r)*u+1>>>0,h=new Uint8Array(s);r<e.length;){var l=t[e.charCodeAt(r)];if(255===l)return;for(var d=0,f=s-1;(0!==l||d<o)&&-1!==f;f--,d++)l+=a*h[f]>>>0,h[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=d,r++}for(var p=s-o;p!==s&&0===h[p];)p++;var g=n.allocUnsafe(i+(s-p));g.fill(0,0,i);for(var y=i;p!==s;)g[y++]=h[p++];return g}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,o=0,s=t.length;o!==s&&0===t[o];)o++,r++;for(var u=(s-o)*h+1>>>0,l=new Uint8Array(u);o!==s;){for(var d=t[o],f=0,p=u-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=256*l[p]>>>0,l[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=f,o++}for(var g=u-i;g!==u&&0===l[g];)g++;for(var y=c.repeat(r);g<u;++g)y+=e.charAt(l[g]);return y},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},4989:(e,t,r)=>{var n=r(1462);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},6763:(e,t,r)=>{const n=r(5364);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},8287:(e,t,r)=>{"use strict";const n=r(7526),i=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?a(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return h(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:$(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){let o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(G(n))return s;e[r+s]=n}return s}function _(e,t,r,n){return X($(t,e.length-r),e,r,n)}function E(e,t,r,n){return X(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return X(V(t),e,r,n)}function k(e,t,r,n){return X(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(o=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return l(e)},c.allocUnsafeSlow=function(e){return l(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),u=this.slice(n,i),h=e.slice(t,r);for(let e=0;e<a;++e)if(u[e]!==h[e]){o=u[e],s=h[e];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function I(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=Y[e[n]];return i}function x(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n,i){z(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function M(e,t,r,n,i){z(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function D(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,o){return t=+t,r>>>=0,o||D(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||D(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Z((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=Z((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Z((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=Z((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||F(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Z((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Z((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Z((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Z((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const K={};function W(e,t,r){K[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function H(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function z(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new K.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){j(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||F(t,e.length-(r+1))}(n,i,o)}function j(e,t){if("number"!=typeof e)throw new K.ERR_INVALID_ARG_TYPE(t,"number",e)}function F(e,t,r){if(Math.floor(e)!==e)throw j(e,r),new K.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new K.ERR_BUFFER_OUT_OF_BOUNDS;throw new K.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=H(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=H(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function $(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},955:function(e,t,r){var n;e.exports=(n=r(9021),r(754),r(4636),r(9506),r(7165),function(){var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],o=[],s=[],a=[],c=[],u=[],h=[],l=[],d=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,i[r]=p,o[p]=r;var g=e[r],y=e[g],m=e[y],b=257*e[p]^16843008*p;s[r]=b<<24|b>>>8,a[r]=b<<16|b>>>16,c[r]=b<<8|b>>>24,u[r]=b,b=16843009*m^65537*y^257*g^16843008*r,h[p]=b<<24|b>>>8,l[p]=b<<16|b>>>16,d[p]=b<<8|b>>>24,f[p]=b,r?(r=g^e[e[e[m^g]]],n^=e[e[n]]):r=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],s=0;s<n;s++)s<r?o[s]=t[s]:(u=o[s-1],s%r?r>6&&s%r==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=p[s/r|0]<<24),o[s]=o[s-r]^u);for(var a=this._invKeySchedule=[],c=0;c<n;c++){if(s=n-c,c%4)var u=o[s];else u=o[s-4];a[c]=c<4||s<=4?u:h[i[u>>>24]]^l[i[u>>>16&255]]^d[i[u>>>8&255]]^f[i[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,h,l,d,f,o),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,s,a){for(var c=this._nRounds,u=e[t]^r[0],h=e[t+1]^r[1],l=e[t+2]^r[2],d=e[t+3]^r[3],f=4,p=1;p<c;p++){var g=n[u>>>24]^i[h>>>16&255]^o[l>>>8&255]^s[255&d]^r[f++],y=n[h>>>24]^i[l>>>16&255]^o[d>>>8&255]^s[255&u]^r[f++],m=n[l>>>24]^i[d>>>16&255]^o[u>>>8&255]^s[255&h]^r[f++],b=n[d>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&l]^r[f++];u=g,h=y,l=m,d=b}g=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^r[f++],y=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&u])^r[f++],m=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^r[f++],b=(a[d>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[f++],e[t]=g,e[t+1]=y,e[t+2]=m,e[t+3]=b},keySize:8});e.AES=t._createHelper(g)}(),n.AES)},3128:function(e,t,r){var n;e.exports=(n=r(9021),r(754),r(4636),r(9506),r(7165),function(){var e=n,t=e.lib.BlockCipher,r=e.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var a={pbox:[],sbox:[]};function c(e,t){let r=t>>24&255,n=t>>16&255,i=t>>8&255,o=255&t,s=e.sbox[0][r]+e.sbox[1][n];return s^=e.sbox[2][i],s+=e.sbox[3][o],s}function u(e,t,r){let n,o=t,s=r;for(let t=0;t<i;++t)o^=e.pbox[t],s=c(e,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=e.pbox[i],o^=e.pbox[i+1],{left:o,right:s}}function h(e,t,r){let n,o=t,s=r;for(let t=i+1;t>1;--t)o^=e.pbox[t],s=c(e,o)^s,n=o,o=s,s=n;return n=o,o=s,s=n,s^=e.pbox[1],o^=e.pbox[0],{left:o,right:s}}function l(e,t,r){for(let t=0;t<4;t++){e.sbox[t]=[];for(let r=0;r<256;r++)e.sbox[t][r]=s[t][r]}let n=0;for(let s=0;s<i+2;s++)e.pbox[s]=o[s]^t[n],n++,n>=r&&(n=0);let a=0,c=0,h=0;for(let t=0;t<i+2;t+=2)h=u(e,a,c),a=h.left,c=h.right,e.pbox[t]=a,e.pbox[t+1]=c;for(let t=0;t<4;t++)for(let r=0;r<256;r+=2)h=u(e,a,c),a=h.left,c=h.right,e.sbox[t][r]=a,e.sbox[t][r+1]=c;return!0}var d=r.Blowfish=t.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4;l(a,t,r)}},encryptBlock:function(e,t){var r=u(a,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right},decryptBlock:function(e,t){var r=h(a,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=t._createHelper(d)}(),n.Blowfish)},7165:function(e,t,r){var n;e.exports=(n=r(9021),r(9506),void(n.lib.Cipher||function(e){var t=n,r=t.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=t.enc,c=(a.Utf8,a.Base64),u=t.algo.EvpKDF,h=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:m}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),l=(r.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=l.CBC=function(){var t=d.extend();function r(t,r,n){var i,o=this._iv;o?(i=o,this._iv=e):i=this._prevBlock;for(var s=0;s<n;s++)t[r+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);n.decryptBlock(e,t),r.call(this,e,t,i),this._prevBlock=o}}),t}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;a<n;a+=4)s.push(i);var c=o.create(s,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:f,padding:p}),reset:function(){var e;h.reset.call(this);var t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?o.create([1398893684,1701076831]).concat(r).concat(t):t).toString(c)},parse:function(e){var t,r=c.parse(e),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=o.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),g.create({ciphertext:r,salt:t})}},m=r.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),s=i.cfg;return g.create({ciphertext:o,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(t.kdf={}).OpenSSL={execute:function(e,t,r,n,i){if(n||(n=o.random(8)),i)s=u.create({keySize:t+r,hasher:i}).compute(e,n);else var s=u.create({keySize:t+r}).compute(e,n);var a=o.create(s.words.slice(t),4*r);return s.sigBytes=4*t,g.create({key:s,iv:a,salt:n})}},w=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:b}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=i.iv;var o=m.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=i.iv,m.decrypt.call(this,e,t,i.key,n)}})}()))},9021:function(e,t,r){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(477)}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<i;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new u.init(t,e)}}),h=s.enc={},l=h.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new u.init(r,t/2)}},d=h.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new u.init(r,t)}},f=h.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,h=e.min(4*c,o);if(c){for(var l=0;l<c;l+=s)this._doProcessBlock(i,l);r=i.splice(0,c),n.sigBytes-=h}return new u.init(r,h)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math),n)},754:function(e,t,r){var n;e.exports=(n=r(9021),function(){var e=n,t=e.lib.WordArray;function r(e,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)},4725:function(e,t,r){var n;e.exports=(n=r(9021),function(){var e=n,t=e.lib.WordArray;function r(e,r,n){for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var r=e.words,n=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<n;c++)o.push(i.charAt(a>>>6*(3-c)&63));var u=i.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,i=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(n=c)}return r(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)},5503:function(e,t,r){var n;e.exports=(n=r(9021),function(){var e=n,t=e.lib.WordArray,r=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var r=e.length,n=[],i=0;i<r;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(n,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o+=2){var s=i(t[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var r=e.length,n=[],o=0;o<r;o++)n[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return t.create(n,2*r)}}}(),n.enc.Utf16)},9506:function(e,t,r){var n,i,o,s,a,c,u,h;e.exports=(h=r(9021),r(5471),r(1025),i=(n=h).lib,o=i.Base,s=i.WordArray,a=n.algo,c=a.MD5,u=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),o=s.create(),a=o.words,c=n.keySize,u=n.iterations;a.length<c;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var h=1;h<u;h++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*c,o}}),n.EvpKDF=function(e,t,r){return u.create(r).compute(e,t)},h.EvpKDF)},25:function(e,t,r){var n,i,o,s;e.exports=(s=r(9021),r(7165),i=(n=s).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}},s.format.Hex)},1025:function(e,t,r){var n,i,o,s;e.exports=(n=r(9021),o=(i=n).lib.Base,s=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),o=this._iKey=t.clone(),a=i.words,c=o.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))},1396:function(e,t,r){var n;e.exports=(n=r(9021),r(3240),r(6440),r(5503),r(754),r(4725),r(4636),r(5471),r(3009),r(6308),r(1380),r(9557),r(5953),r(8056),r(1025),r(19),r(9506),r(7165),r(2169),r(6939),r(6372),r(3797),r(8454),r(2073),r(4905),r(482),r(2155),r(8124),r(25),r(955),r(7628),r(7193),r(6298),r(2696),r(3128),n)},6440:function(e,t,r){var n;e.exports=(n=r(9021),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,n=[],i=0;i<r;i++)n[i>>>2]|=e[i]<<24-i%4*8;t.call(this,n,r)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)},4636:function(e,t,r){var n;e.exports=(n=r(9021),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],g=e[t+4],y=e[t+5],m=e[t+6],b=e[t+7],w=e[t+8],v=e[t+9],_=e[t+10],E=e[t+11],S=e[t+12],k=e[t+13],O=e[t+14],A=e[t+15],C=o[0],I=o[1],T=o[2],R=o[3];C=u(C,I,T,R,s,7,a[0]),R=u(R,C,I,T,c,12,a[1]),T=u(T,R,C,I,f,17,a[2]),I=u(I,T,R,C,p,22,a[3]),C=u(C,I,T,R,g,7,a[4]),R=u(R,C,I,T,y,12,a[5]),T=u(T,R,C,I,m,17,a[6]),I=u(I,T,R,C,b,22,a[7]),C=u(C,I,T,R,w,7,a[8]),R=u(R,C,I,T,v,12,a[9]),T=u(T,R,C,I,_,17,a[10]),I=u(I,T,R,C,E,22,a[11]),C=u(C,I,T,R,S,7,a[12]),R=u(R,C,I,T,k,12,a[13]),T=u(T,R,C,I,O,17,a[14]),C=h(C,I=u(I,T,R,C,A,22,a[15]),T,R,c,5,a[16]),R=h(R,C,I,T,m,9,a[17]),T=h(T,R,C,I,E,14,a[18]),I=h(I,T,R,C,s,20,a[19]),C=h(C,I,T,R,y,5,a[20]),R=h(R,C,I,T,_,9,a[21]),T=h(T,R,C,I,A,14,a[22]),I=h(I,T,R,C,g,20,a[23]),C=h(C,I,T,R,v,5,a[24]),R=h(R,C,I,T,O,9,a[25]),T=h(T,R,C,I,p,14,a[26]),I=h(I,T,R,C,w,20,a[27]),C=h(C,I,T,R,k,5,a[28]),R=h(R,C,I,T,f,9,a[29]),T=h(T,R,C,I,b,14,a[30]),C=l(C,I=h(I,T,R,C,S,20,a[31]),T,R,y,4,a[32]),R=l(R,C,I,T,w,11,a[33]),T=l(T,R,C,I,E,16,a[34]),I=l(I,T,R,C,O,23,a[35]),C=l(C,I,T,R,c,4,a[36]),R=l(R,C,I,T,g,11,a[37]),T=l(T,R,C,I,b,16,a[38]),I=l(I,T,R,C,_,23,a[39]),C=l(C,I,T,R,k,4,a[40]),R=l(R,C,I,T,s,11,a[41]),T=l(T,R,C,I,p,16,a[42]),I=l(I,T,R,C,m,23,a[43]),C=l(C,I,T,R,v,4,a[44]),R=l(R,C,I,T,S,11,a[45]),T=l(T,R,C,I,A,16,a[46]),C=d(C,I=l(I,T,R,C,f,23,a[47]),T,R,s,6,a[48]),R=d(R,C,I,T,b,10,a[49]),T=d(T,R,C,I,O,15,a[50]),I=d(I,T,R,C,y,21,a[51]),C=d(C,I,T,R,S,6,a[52]),R=d(R,C,I,T,p,10,a[53]),T=d(T,R,C,I,_,15,a[54]),I=d(I,T,R,C,c,21,a[55]),C=d(C,I,T,R,w,6,a[56]),R=d(R,C,I,T,A,10,a[57]),T=d(T,R,C,I,m,15,a[58]),I=d(I,T,R,C,k,21,a[59]),C=d(C,I,T,R,g,6,a[60]),R=d(R,C,I,T,E,10,a[61]),T=d(T,R,C,I,f,15,a[62]),I=d(I,T,R,C,v,21,a[63]),o[0]=o[0]+C|0,o[1]=o[1]+I|0,o[2]=o[2]+T|0,o[3]=o[3]+R|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var h=c[u];c[u]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+i+s;return(a<<o|a>>>32-o)+t}function l(e,t,r,n,i,o,s){var a=e+(t^r^n)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)},2169:function(e,t,r){var n;e.exports=(n=r(9021),r(7165),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,r,n){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var s=0;s<r;s++)e[t+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i,n),this._prevBlock=e.slice(r,r+i)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);t.call(this,e,r,i,n),this._prevBlock=o}}),e}(),n.mode.CFB)},6372:function(e,t,r){var n;e.exports=(n=r(9021),r(7165),n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}return e}function r(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var i=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),r(s);var a=s.slice(0);n.encryptBlock(a,0);for(var c=0;c<i;c++)e[t+c]^=a[c]}});return e.Decryptor=i,e}(),n.mode.CTRGladman)},6939:function(e,t,r){var n,i,o;e.exports=(o=r(9021),r(7165),o.mode.CTR=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)e[t+a]^=s[a]}}),n.Decryptor=i,n),o.mode.CTR)},8454:function(e,t,r){var n,i;e.exports=(i=r(9021),r(7165),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),i.mode.ECB)},3797:function(e,t,r){var n,i,o;e.exports=(o=r(9021),r(7165),o.mode.OFB=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}}),n.Decryptor=i,n),o.mode.OFB)},2073:function(e,t,r){var n;e.exports=(n=r(9021),r(7165),n.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,i=n-r%n,o=r+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)},4905:function(e,t,r){var n;e.exports=(n=r(9021),r(7165),n.pad.Iso10126={pad:function(e,t){var r=4*t,i=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)},482:function(e,t,r){var n;e.exports=(n=r(9021),r(7165),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)},8124:function(e,t,r){var n;e.exports=(n=r(9021),r(7165),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},2155:function(e,t,r){var n;e.exports=(n=r(9021),r(7165),n.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},n.pad.ZeroPadding)},19:function(e,t,r){var n,i,o,s,a,c,u,h,l;e.exports=(l=r(9021),r(3009),r(1025),i=(n=l).lib,o=i.Base,s=i.WordArray,a=n.algo,c=a.SHA256,u=a.HMAC,h=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=u.create(r.hasher,e),i=s.create(),o=s.create([1]),a=i.words,c=o.words,h=r.keySize,l=r.iterations;a.length<h;){var d=n.update(t).finalize(o);n.reset();for(var f=d.words,p=f.length,g=d,y=1;y<l;y++){g=n.finalize(g),n.reset();for(var m=g.words,b=0;b<p;b++)f[b]^=m[b]}i.concat(d),c[0]++}return i.sigBytes=4*h,i}}),n.PBKDF2=function(e,t,r){return h.create(r).compute(e,t)},l.PBKDF2)},2696:function(e,t,r){var n;e.exports=(n=r(9021),r(754),r(4636),r(9506),r(7165),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=[],o=[],s=[],a=r.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(t){var o=t.words,s=o[0],a=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=u>>>16|4294901760&h,d=h<<16|65535&u;for(n[0]^=u,n[1]^=l,n[2]^=h,n[3]^=d,n[4]^=u,n[5]^=l,n[6]^=h,n[7]^=d,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),e[t+n]^=i[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)o[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,a=n>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.RabbitLegacy=t._createHelper(a)}(),n.RabbitLegacy)},6298:function(e,t,r){var n;e.exports=(n=r(9021),r(754),r(4636),r(9506),r(7165),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=[],o=[],s=[],a=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var o=t.words,s=o[0],a=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=u>>>16|4294901760&h,d=h<<16|65535&u;for(i[0]^=u,i[1]^=l,i[2]^=h,i[3]^=d,i[4]^=u,i[5]^=l,i[6]^=h,i[7]^=d,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),e[t+n]^=i[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)o[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,a=n>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.Rabbit=t._createHelper(a)}(),n.Rabbit)},7193:function(e,t,r){var n;e.exports=(n=r(9021),r(754),r(4636),r(9506),r(7165),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var o=0;i<256;i++){var s=i%r,a=t[s>>>2]>>>24-s%4*8&255;o=(o+n[i]+a)%256;var c=n[i];n[i]=n[o],n[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[r],e[r]=o,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}e.RC4=t._createHelper(i);var s=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(s)}(),n.RC4)},8056:function(e,t,r){var n;e.exports=(n=r(9021),function(){var e=n,t=e.lib,r=t.WordArray,i=t.Hasher,o=e.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=r.create([0,1518500249,1859775393,2400959708,2840853838]),l=r.create([1352829926,1548603684,1836072691,2053994217,0]),d=o.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,d,w,v,_,E,S,k,O,A,C,I=this._hash.words,T=h.words,R=l.words,x=s.words,N=a.words,B=c.words,P=u.words;for(E=o=I[0],S=d=I[1],k=w=I[2],O=v=I[3],A=_=I[4],r=0;r<80;r+=1)C=o+e[t+x[r]]|0,C+=r<16?f(d,w,v)+T[0]:r<32?p(d,w,v)+T[1]:r<48?g(d,w,v)+T[2]:r<64?y(d,w,v)+T[3]:m(d,w,v)+T[4],C=(C=b(C|=0,B[r]))+_|0,o=_,_=v,v=b(w,10),w=d,d=C,C=E+e[t+N[r]]|0,C+=r<16?m(S,k,O)+R[0]:r<32?y(S,k,O)+R[1]:r<48?g(S,k,O)+R[2]:r<64?p(S,k,O)+R[3]:f(S,k,O)+R[4],C=(C=b(C|=0,P[r]))+A|0,E=A,A=O,O=b(k,10),k=S,S=C;C=I[1]+w+O|0,I[1]=I[2]+v+A|0,I[2]=I[3]+_+E|0,I[3]=I[4]+o+S|0,I[4]=I[0]+d+k|0,I[0]=C},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,r){return e^t^r}function p(e,t,r){return e&t|~e&r}function g(e,t,r){return(e|~t)^r}function y(e,t,r){return e&r|t&~r}function m(e,t,r){return e^(t|~r)}function b(e,t){return e<<t|e>>>32-t}e.RIPEMD160=i._createHelper(d),e.HmacRIPEMD160=i._createHmacHelper(d)}(Math),n.RIPEMD160)},5471:function(e,t,r){var n,i,o,s,a,c,u,h;e.exports=(h=r(9021),i=(n=h).lib,o=i.WordArray,s=i.Hasher,a=n.algo,c=[],u=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var h=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=h<<1|h>>>31}var l=(n<<5|n>>>27)+a+c[u];l+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=s._createHelper(u),n.HmacSHA1=s._createHmacHelper(u),h.SHA1)},6308:function(e,t,r){var n,i,o,s,a,c;e.exports=(c=r(9021),r(3009),i=(n=c).lib.WordArray,o=n.algo,s=o.SHA256,a=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}}),n.SHA224=s._createHelper(a),n.HmacSHA224=s._createHmacHelper(a),c.SHA224)},3009:function(e,t,r){var n;e.exports=(n=r(9021),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(a[i]=r(e.pow(n,.5))),c[i]=r(e.pow(n,1/3)),i++),n++}();var u=[],h=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],h=r[5],l=r[6],d=r[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=u[f-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[f]=g+u[f-7]+m+u[f-16]}var b=n&i^n&o^i&o,w=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&h^~a&l)+c[f]+u[f];d=l,l=h,h=a,a=s+v|0,s=o,o=i,i=n,n=v+(w+b)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+h|0,r[6]=r[6]+l|0,r[7]=r[7]+d|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(h),t.HmacSHA256=o._createHmacHelper(h)}(Math),n.SHA256)},5953:function(e,t,r){var n;e.exports=(n=r(9021),r(3240),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.x64.Word,a=t.algo,c=[],u=[],h=[];!function(){for(var e=1,t=0,r=0;r<24;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,l=0,d=0;d<7;d++){if(1&i){var f=(1<<d)-1;f<32?l^=1<<f:a^=1<<f-32}128&i?i=i<<1^113:i<<=1}h[o]=s.create(a,l)}}();var l=[];!function(){for(var e=0;e<25;e++)l[e]=s.create()}();var d=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=e[t+2*i],s=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(I=r[i]).high^=s,I.low^=o}for(var a=0;a<24;a++){for(var d=0;d<5;d++){for(var f=0,p=0,g=0;g<5;g++)f^=(I=r[d+5*g]).high,p^=I.low;var y=l[d];y.high=f,y.low=p}for(d=0;d<5;d++){var m=l[(d+4)%5],b=l[(d+1)%5],w=b.high,v=b.low;for(f=m.high^(w<<1|v>>>31),p=m.low^(v<<1|w>>>31),g=0;g<5;g++)(I=r[d+5*g]).high^=f,I.low^=p}for(var _=1;_<25;_++){var E=(I=r[_]).high,S=I.low,k=c[_];k<32?(f=E<<k|S>>>32-k,p=S<<k|E>>>32-k):(f=S<<k-32|E>>>64-k,p=E<<k-32|S>>>64-k);var O=l[u[_]];O.high=f,O.low=p}var A=l[0],C=r[0];for(A.high=C.high,A.low=C.low,d=0;d<5;d++)for(g=0;g<5;g++){var I=r[_=d+5*g],T=l[_],R=l[(d+1)%5+5*g],x=l[(d+2)%5+5*g];I.high=T.high^~R.high&x.high,I.low=T.low^~R.low&x.low}I=r[0];var N=h[a];I.high^=N.high,I.low^=N.low}},_doFinalize:function(){var t=this._data,r=t.words,n=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,u=[],h=0;h<c;h++){var l=s[h],d=l.high,f=l.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),u.push(f),u.push(d)}return new i.init(u,a)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});t.SHA3=o._createHelper(d),t.HmacSHA3=o._createHmacHelper(d)}(Math),n.SHA3)},9557:function(e,t,r){var n,i,o,s,a,c,u,h;e.exports=(h=r(9021),r(3240),r(1380),i=(n=h).x64,o=i.Word,s=i.WordArray,a=n.algo,c=a.SHA512,u=a.SHA384=c.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u),h.SHA384)},1380:function(e,t,r){var n;e.exports=(n=r(9021),r(3240),function(){var e=n,t=e.lib.Hasher,r=e.x64,i=r.Word,o=r.WordArray,s=e.algo;function a(){return i.create.apply(i,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=a()}();var h=s.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],h=r[5],l=r[6],d=r[7],f=n.high,p=n.low,g=i.high,y=i.low,m=o.high,b=o.low,w=s.high,v=s.low,_=a.high,E=a.low,S=h.high,k=h.low,O=l.high,A=l.low,C=d.high,I=d.low,T=f,R=p,x=g,N=y,B=m,P=b,M=w,D=v,L=_,U=E,K=S,W=k,H=O,z=A,j=C,F=I,q=0;q<80;q++){var $,V,X=u[q];if(q<16)V=X.high=0|e[t+2*q],$=X.low=0|e[t+2*q+1];else{var J=u[q-15],G=J.high,Y=J.low,Z=(G>>>1|Y<<31)^(G>>>8|Y<<24)^G>>>7,Q=(Y>>>1|G<<31)^(Y>>>8|G<<24)^(Y>>>7|G<<25),ee=u[q-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ie=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),oe=u[q-7],se=oe.high,ae=oe.low,ce=u[q-16],ue=ce.high,he=ce.low;V=(V=(V=Z+se+(($=Q+ae)>>>0<Q>>>0?1:0))+ne+(($+=ie)>>>0<ie>>>0?1:0))+ue+(($+=he)>>>0<he>>>0?1:0),X.high=V,X.low=$}var le,de=L&K^~L&H,fe=U&W^~U&z,pe=T&x^T&B^x&B,ge=R&N^R&P^N&P,ye=(T>>>28|R<<4)^(T<<30|R>>>2)^(T<<25|R>>>7),me=(R>>>28|T<<4)^(R<<30|T>>>2)^(R<<25|T>>>7),be=(L>>>14|U<<18)^(L>>>18|U<<14)^(L<<23|U>>>9),we=(U>>>14|L<<18)^(U>>>18|L<<14)^(U<<23|L>>>9),ve=c[q],_e=ve.high,Ee=ve.low,Se=j+be+((le=F+we)>>>0<F>>>0?1:0),ke=me+ge;j=H,F=z,H=K,z=W,K=L,W=U,L=M+(Se=(Se=(Se=Se+de+((le+=fe)>>>0<fe>>>0?1:0))+_e+((le+=Ee)>>>0<Ee>>>0?1:0))+V+((le+=$)>>>0<$>>>0?1:0))+((U=D+le|0)>>>0<D>>>0?1:0)|0,M=B,D=P,B=x,P=N,x=T,N=R,T=Se+(ye+pe+(ke>>>0<me>>>0?1:0))+((R=le+ke|0)>>>0<le>>>0?1:0)|0}p=n.low=p+R,n.high=f+T+(p>>>0<R>>>0?1:0),y=i.low=y+N,i.high=g+x+(y>>>0<N>>>0?1:0),b=o.low=b+P,o.high=m+B+(b>>>0<P>>>0?1:0),v=s.low=v+D,s.high=w+M+(v>>>0<D>>>0?1:0),E=a.low=E+U,a.high=_+L+(E>>>0<U>>>0?1:0),k=h.low=k+W,h.high=S+K+(k>>>0<W>>>0?1:0),A=l.low=A+z,l.high=O+H+(A>>>0<z>>>0?1:0),I=d.low=I+F,d.high=C+j+(I>>>0<F>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(h),e.HmacSHA512=t._createHmacHelper(h)}(),n.SHA512)},7628:function(e,t,r){var n;e.exports=(n=r(9021),r(754),r(4636),r(9506),r(7165),function(){var e=n,t=e.lib,r=t.WordArray,i=t.BlockCipher,o=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=s[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var u=i[o]=[],h=c[o];for(r=0;r<24;r++)u[r/6|0]|=t[(a[r]-1+h)%28]<<31-r%6,u[4+(r/6|0)]|=t[28+(a[r+24]-1+h)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var l=this._invSubKeys=[];for(r=0;r<16;r++)l[r]=i[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],o=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=u[c][((s^i[c])&h[c])>>>0];this._lBlock=s,this._rBlock=o^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}e.DES=i._createHelper(l);var p=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=l.createEncryptor(r.create(t)),this._des2=l.createEncryptor(r.create(n)),this._des3=l.createEncryptor(r.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),n.TripleDES)},3240:function(e,t,r){var n;e.exports=(n=r(9021),function(e){var t=n,r=t.lib,i=r.Base,o=r.WordArray,s=t.x64={};s.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=i.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:8*t.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),n)},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,o),!0;case 6:return h.fn.call(h.context,t,n,i,o,s),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,n);break;case 4:h[u].fn.call(h[u].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},251:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?i-1:0,d=r?-1:1,f=e[t+l];for(l+=d,o=f&(1<<-h)-1,f>>=-h,h+=a;h>0;o=256*o+e[t+l],l+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+e[t+l],l+=d,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=u}return(f?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,l=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(t*c-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*g}},22:(e,t,r)=>{"use strict";const n=r(8341).v4,i=r(3289),o=function(e,t){if(!(this instanceof o))return new o(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return n()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=o,o.prototype.request=function(e,t,r,n){const o=this;let s=null;const a=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&e&&"object"==typeof e&&"function"==typeof t)n=t,s=e;else{"function"==typeof r&&(n=r,r=void 0);const o="function"==typeof n;try{s=i(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(o)return n(e);throw e}if(!o)return s}let c;try{c=JSON.stringify(s,this.options.replacer)}catch(e){return n(e)}return this.callServer(c,(function(e,t){o._parseResponse(e,t,n)})),s},o.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)}},3289:(e,t,r)=>{"use strict";const n=r(8341).v4;e.exports=function(e,t,r,i){if("string"!=typeof e)throw new TypeError(e+" must be a string");const o="number"==typeof(i=i||{}).version?i.version:2;if(1!==o&&2!==o)throw new TypeError(o+" must be 1 or 2");const s={method:e};if(2===o&&(s.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(void 0===r){const e="function"==typeof i.generator?i.generator:function(){return n()};s.id=e(s,i)}else 2===o&&null===r?i.notificationIdNull&&(s.id=null):s.id=r;return s}},3790:(e,t,r)=>{e.exports=function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){var r=t[s][1][e];return i(r||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,n){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(h),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var c=new e.MessageChannel;c.port1.onmessage=h,r=function(){c.port2.postMessage(0)}}var u=[];function h(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}function l(e){1!==u.push(e)||n||r()}t.exports=l}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function h(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}function s(){t(i,n)}var a=p(s);"error"===a.status&&n(a.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function g(e){return e instanceof this?e:o.resolve(new this(i),e)}function y(e){var t=new this(i);return o.reject(t,e)}function m(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,c=-1,u=new this(i);++c<r;)h(e[c],c);return u;function h(e,i){function c(e){s[i]=e,++a!==r||n||(n=!0,o.resolve(u,s))}t.resolve(e).then(c,(function(e){n||(n=!0,o.reject(u,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=-1,a=new this(i);++s<r;)c(e[s]);return a;function c(e){t.resolve(e).then((function(e){n||(n=!0,o.resolve(a,e))}),(function(e){n||(n=!0,o.reject(a,e))}))}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(i);return this.state!==c?l(r,this.state===a?e:t,this.outcome):this.queue.push(new h(r,e,t)),r},h.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){o.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)f(e,n);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=g,u.reject=y,u.all=m,u.race=b},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=o();function a(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var u=Promise;function h(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function d(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,y={},m=Object.prototype.toString,b="readonly",w="readwrite";function v(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function _(e){return new u((function(t){var r=e.transaction(p,w),n=c([""]);r.objectStore(p).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function E(e){return"boolean"==typeof g?u.resolve(g):_(e).then((function(e){return g=e}))}function S(e){var t=y[e.name],r={};r.promise=new u((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function k(e){var t=y[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function O(e,t){var r=y[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function A(e,t){return new u((function(r,n){if(y[e.name]=y[e.name]||D(),e.db){if(!t)return r(e.db);S(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=s.open.apply(s,i);t&&(o.onupgradeneeded=function(t){var r=o.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(p)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),n(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},r(t),k(e)}}))}function C(e){return A(e,!1)}function I(e){return A(e,!0)}function T(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function R(e){return new u((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function x(e){return c([v(atob(e.data))],{type:e.type})}function N(e){return e&&e.__local_forage_encoded_blob}function B(e){var t=this,r=t._initReady().then((function(){var e=y[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(r,e,e),r}function P(e){S(e);for(var t=y[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,T(e)?I(e):t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(t){throw O(e,t),t}))}function M(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return u.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),I(e)})).then((function(){return P(e).then((function(){M(e,t,r,n-1)}))})).catch(r);r(i)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=y[r.name];i||(i=D(),y[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=B);var o=[];function s(){return u.resolve()}for(var a=0;a<i.forages.length;a++){var c=i.forages[a];c!==t&&o.push(c._initReady().catch(s))}var h=i.forages.slice(0);return u.all(o).then((function(){return r.db=i.db,C(r)})).then((function(e){return r.db=e,T(r,t._defaultConfig.version)?I(r):e})).then((function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<h.length;n++){var o=h[n];o!==t&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}}))}function U(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){M(r._dbInfo,b,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),N(e)&&(e=x(e)),t(e)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return h(n,t),n}function K(e,t){var r=this,n=new u((function(t,n){r.ready().then((function(){M(r._dbInfo,b,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var r=s.result;if(r){var n=r.value;N(n)&&(n=x(n));var i=e(n,r.key,a++);void 0!==i?t(i):r.continue()}else t()},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return h(n,t),n}function W(e,t,r){var n=this;e=d(e);var i=new u((function(r,i){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===m.call(t)?E(o.db).then((function(e){return e?t:R(t)})):t})).then((function(t){M(n._dbInfo,w,(function(o,s){if(o)return i(o);try{var a=s.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),r(t)},s.onabort=s.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return h(i,r),i}function H(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){M(r._dbInfo,w,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return h(n,t),n}function z(e){var t=this,r=new u((function(e,r){t.ready().then((function(){M(t._dbInfo,w,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return h(r,e),r}function j(e){var t=this,r=new u((function(e,r){t.ready().then((function(){M(t._dbInfo,b,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return h(r,e),r}function F(e,t){var r=this,n=new u((function(t,n){e<0?t(null):r.ready().then((function(){M(r._dbInfo,b,(function(i,o){if(i)return n(i);try{var s=o.objectStore(r._dbInfo.storeName),a=!1,c=s.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||a?t(r.key):(a=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}}))})).catch(n)}));return h(n,t),n}function q(e){var t=this,r=new u((function(e,r){t.ready().then((function(){M(t._dbInfo,b,(function(n,i){if(n)return r(n);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return h(r,e),r}function $(e,t){t=f.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;if(e.name){var o=e.name===r.name&&i._dbInfo.db?u.resolve(i._dbInfo.db):C(e).then((function(t){var r=y[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t}));n=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;S(e);var n=y[e.name],i=n.forages;t.close();for(var o=0;o<i.length;o++){var a=i[o];a._dbInfo.db=null,a._dbInfo.version=r}var c=new u((function(t,n){var i=s.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}));return c.then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,k(r._dbInfo)}})).catch((function(t){throw(O(e,t)||u.resolve()).catch((function(){})),t}))}})):o.then((function(t){S(e);var r=y[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;var o=new u((function(t,r){var n=s.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}));return o.then((function(e){r.db=e;for(var t=0;t<n.length;t++)k(n[t]._dbInfo)})).catch((function(t){throw(O(e,t)||u.resolve()).catch((function(){})),t}))}))}else n=u.reject("Invalid arguments");return h(n,t),n}var V={_driver:"asyncStorage",_initStorage:L,_support:a(),iterate:K,getItem:U,setItem:W,removeItem:H,clear:z,length:j,key:F,keys:q,dropInstance:$};function X(){return"function"==typeof openDatabase}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G="~~local_forage_type~",Y=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",Q=Z.length,ee="arbf",te="blob",re="si08",ne="ui08",ie="uic8",oe="si16",se="si32",ae="ur16",ce="ui32",ue="fl32",he="fl64",le=Q+ee.length,de=Object.prototype.toString;function fe(e){var t,r,n,i,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),h=new Uint8Array(u);for(t=0;t<a;t+=4)r=J.indexOf(e[t]),n=J.indexOf(e[t+1]),i=J.indexOf(e[t+2]),o=J.indexOf(e[t+3]),h[c++]=r<<2|n>>4,h[c++]=(15&n)<<4|i>>2,h[c++]=(3&i)<<6|63&o;return u}function pe(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=J[r[t]>>2],n+=J[(3&r[t])<<4|r[t+1]>>4],n+=J[(15&r[t+1])<<2|r[t+2]>>6],n+=J[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function ge(e,t){var r="";if(e&&(r=de.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===de.call(e.buffer))){var n,i=Z;e instanceof ArrayBuffer?(n=e,i+=ee):(n=e.buffer,"[object Int8Array]"===r?i+=re:"[object Uint8Array]"===r?i+=ne:"[object Uint8ClampedArray]"===r?i+=ie:"[object Int16Array]"===r?i+=oe:"[object Uint16Array]"===r?i+=ae:"[object Int32Array]"===r?i+=se:"[object Uint32Array]"===r?i+=ce:"[object Float32Array]"===r?i+=ue:"[object Float64Array]"===r?i+=he:t(new Error("Failed to get type for BinaryArray"))),t(i+pe(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){var r=G+e.type+"~"+pe(this.result);t(Z+te+r)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}}function ye(e){if(e.substring(0,Q)!==Z)return JSON.parse(e);var t,r=e.substring(le),n=e.substring(Q,le);if(n===te&&Y.test(r)){var i=r.match(Y);t=i[1],r=r.substring(i[0].length)}var o=fe(r);switch(n){case ee:return o;case te:return c([o],{type:t});case re:return new Int8Array(o);case ne:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case ae:return new Uint16Array(o);case se:return new Int32Array(o);case ce:return new Uint32Array(o);case ue:return new Float32Array(o);case he:return new Float64Array(o);default:throw new Error("Unkown type: "+n)}}var me={serialize:ge,deserialize:ye,stringToBuffer:fe,bufferToString:pe};function be(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function we(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new u((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(i){be(i,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=me,i}function ve(e,t,r,n,i,o){e.executeSql(r,n,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,s):be(e,t,(function(){e.executeSql(r,n,i,o)}),o)}),o):o(e,s)}),o)}function _e(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ve(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return h(n,t),n}function Ee(e,t){var r=this,n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ve(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var o=n.rows,s=o.length,a=0;a<s;a++){var c=o.item(a),u=c.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=e(u,c.key,a+1)))return void t(u)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return h(n,t),n}function Se(e,t,r,n){var i=this;e=d(e);var o=new u((function(o,s){i.ready().then((function(){void 0===t&&(t=null);var a=t,c=i._dbInfo;c.serializer.serialize(t,(function(t,u){u?s(u):c.db.transaction((function(r){ve(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void o(Se.apply(i,[e,a,r,n-1]));s(t)}}))}))})).catch(s)}));return h(o,r),o}function ke(e,t,r){return Se.apply(this,[e,t,r,1])}function Oe(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ve(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return h(n,t),n}function Ae(e){var t=this,r=new u((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return h(r,e),r}function Ce(e){var t=this,r=new u((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return h(r,e),r}function Ie(e,t){var r=this,n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ve(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return h(n,t),n}function Te(e){var t=this,r=new u((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return h(r,e),r}function Re(e){return new u((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function xe(e,t){t=f.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;return h(n=e.name?new u((function(t){var n;n=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(Re(n))})).then((function(e){return new u((function(t,r){e.db.transaction((function(n){function i(e){return new u((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var o=[],s=0,a=e.storeNames.length;s<a;s++)o.push(i(e.storeNames[s]));u.all(o).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):u.reject("Invalid arguments"),t),n}var Ne={_driver:"webSQLStorage",_initStorage:we,_support:X(),iterate:Ee,getItem:_e,setItem:ke,removeItem:Oe,clear:Ae,length:Ce,key:Ie,keys:Te,dropInstance:xe};function Be(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Pe(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function Me(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function De(){return!Me()||localStorage.length>0}function Le(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Pe(e,t._defaultConfig),De()?(t._dbInfo=r,r.serializer=me,u.resolve()):u.reject()}function Ue(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return h(r,e),r}function Ke(e,t){var r=this;e=d(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return h(n,t),n}function We(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,o=localStorage.length,s=1,a=0;a<o;a++){var c=localStorage.key(a);if(0===c.indexOf(n)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(i),s++)))return u}}}));return h(n,t),n}function He(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return h(n,t),n}function ze(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n}));return h(r,e),r}function je(e){var t=this.keys().then((function(e){return e.length}));return h(t,e),t}function Fe(e,t){var r=this;e=d(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return h(n,t),n}function qe(e,t,r){var n=this;e=d(e);var i=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new u((function(i,o){var s=n._dbInfo;s.serializer.serialize(t,(function(t,n){if(n)o(n);else try{localStorage.setItem(s.keyPrefix+e,t),i(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return h(i,r),i}function $e(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,i=this;return n=e.name?new u((function(t){e.storeName?t(Pe(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):u.reject("Invalid arguments"),h(n,t),n}var Ve={_driver:"localStorageWrapper",_initStorage:Le,_support:Be(),iterate:We,getItem:Ke,setItem:qe,removeItem:Fe,clear:Ue,length:je,key:He,keys:ze,dropInstance:$e},Xe=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var r=e.length,n=0;n<r;){if(Xe(e[n],t))return!0;n++}return!1},Ge=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ye={},Ze={},Qe={INDEXEDDB:V,WEBSQL:Ne,LOCALSTORAGE:Ve},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Ge(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var st=function(){function e(t){for(var r in i(this,e),Qe)if(Qe.hasOwnProperty(r)){var n=Qe[r],o=n._driver;this[r]=o,Ye[o]||this.defineDriver(n)}this._defaultConfig=ot({},nt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new u((function(t,r){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);for(var o=rt.concat("_initStorage"),s=0,a=o.length;s<a;s++){var c=o[s];if((!Je(tt,c)||e[c])&&"function"!=typeof e[c])return void r(i)}var l=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=u.reject(t);return h(r,arguments[arguments.length-1]),r}},r=0,n=tt.length;r<n;r++){var i=tt[r];e[i]||(e[i]=t(i))}};l();var d=function(r){Ye[n]&&console.info("Redefining LocalForage driver: "+n),Ye[n]=e,Ze[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,r):d(!!e._support):d(!0)}catch(e){r(e)}}));return l(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=Ye[e]?u.resolve(Ye[e]):u.reject(new Error("Driver not found."));return l(n,t,r),n},e.prototype.getSerializer=function(e){var t=u.resolve(me);return l(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;Ge(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){n._config.driver=n.driver()}function s(e){return n._extend(e),o(),n._ready=n._initStorage(n._config),n._ready}function a(e){return function(){var t=0;function r(){for(;t<e.length;){var i=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(s).catch(r)}o();var a=new Error("No available storage method found.");return n._driverSet=u.reject(a),n._driverSet}return r()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=c.then((function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=a(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return n._driverSet=u.reject(e),n._driverSet})),l(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)it(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new st;t.exports=at},{3:3}]},{},[4])(4)},2861:(e,t,r)=>{var n=r(8287),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},4281:(e,t)=>{"use strict";function r(e,t,r){return t<=e&&e<=r}function n(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){this.tokens=[].slice.call(e)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var o=-1;function s(e,t){if(e)throw TypeError("Decoder error");return t||65533}var a="utf-8";function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function u(e,t){if(!(this instanceof u))return new u(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(e){var t=e.fatal,n=0,i=0,a=0,c=128,u=191;this.handler=function(e,h){if(-1===h&&0!==a)return a=0,s(t);if(-1===h)return o;if(0===a){if(r(h,0,127))return h;if(r(h,194,223))a=1,n=h-192;else if(r(h,224,239))224===h&&(c=160),237===h&&(u=159),a=2,n=h-224;else{if(!r(h,240,244))return s(t);240===h&&(c=144),244===h&&(u=143),a=3,n=h-240}return n<<=6*a,null}if(!r(h,c,u))return n=a=i=0,c=128,u=191,e.prepend(h),s(t);if(c=128,u=191,n+=h-128<<6*(a-(i+=1)),i!==a)return null;var l=n;return n=a=i=0,l}}function l(e){e.fatal;this.handler=function(e,t){if(-1===t)return o;if(r(t,0,127))return t;var n,i;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var a=t>>6*(n-1);s.push(128|63&a),n-=1}return s}}c.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=n(t),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var s,a=new i(r),c=[];!a.endOfStream()&&(s=this._decoder.handler(a,a.read()))!==o;)null!==s&&(Array.isArray(s)?c.push.apply(c,s):c.push(s));if(!this._streaming){do{if((s=this._decoder.handler(a,a.read()))===o)break;null!==s&&(Array.isArray(s)?c.push.apply(c,s):c.push(s))}while(!a.endOfStream());this._decoder=null}return c.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===c[0]?(this._BOMseen=!0,c.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(c)}},u.prototype={encode:function(e,t){e=e?String(e):"",t=n(t),this._streaming||(this._encoder=new l(this._options)),this._streaming=Boolean(t.stream);for(var r,s=[],a=new i(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,c=1023&s;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}(e));!a.endOfStream()&&(r=this._encoder.handler(a,a.read()))!==o;)Array.isArray(r)?s.push.apply(s,r):s.push(r);if(!this._streaming){for(;(r=this._encoder.handler(a,a.read()))!==o;)Array.isArray(r)?s.push.apply(s,r):s.push(r);this._encoder=null}return new Uint8Array(s)}},t.TextEncoder=u,t.TextDecoder=c},6386:function(e,t,r){var n=r(6443).Buffer;!function(t,r){"use strict";e.exports?e.exports=r():(t.nacl||(t.nacl={}),t.nacl.util=r())}(this,(function(){"use strict";var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},e.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==n.from?(e.encodeBase64=function(e){return n.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(n.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new n(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new n(e,"base64"),0))}):(e.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},e.decodeBase64=function(e){t(e);var r,n=atob(e),i=new Uint8Array(n.length);for(r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}),e}))},8947:(e,t,r)=>{!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function y(e,t,r,n){return g(e,t,r,n,16)}function m(e,t,r,n){return g(e,t,r,n,32)}function b(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=o,E=s,S=a,k=c,O=u,A=h,C=l,I=d,T=f,R=p,x=g,N=y,B=m,P=b,M=w,D=v,L=0;L<20;L+=2)_^=(i=(B^=(i=(T^=(i=(O^=(i=_+B|0)<<7|i>>>25)+_|0)<<9|i>>>23)+O|0)<<13|i>>>19)+T|0)<<18|i>>>14,A^=(i=(E^=(i=(P^=(i=(R^=(i=A+E|0)<<7|i>>>25)+A|0)<<9|i>>>23)+R|0)<<13|i>>>19)+P|0)<<18|i>>>14,x^=(i=(C^=(i=(S^=(i=(M^=(i=x+C|0)<<7|i>>>25)+x|0)<<9|i>>>23)+M|0)<<13|i>>>19)+S|0)<<18|i>>>14,D^=(i=(N^=(i=(I^=(i=(k^=(i=D+N|0)<<7|i>>>25)+D|0)<<9|i>>>23)+k|0)<<13|i>>>19)+I|0)<<18|i>>>14,_^=(i=(k^=(i=(S^=(i=(E^=(i=_+k|0)<<7|i>>>25)+_|0)<<9|i>>>23)+E|0)<<13|i>>>19)+S|0)<<18|i>>>14,A^=(i=(O^=(i=(I^=(i=(C^=(i=A+O|0)<<7|i>>>25)+A|0)<<9|i>>>23)+C|0)<<13|i>>>19)+I|0)<<18|i>>>14,x^=(i=(R^=(i=(T^=(i=(N^=(i=x+R|0)<<7|i>>>25)+x|0)<<9|i>>>23)+N|0)<<13|i>>>19)+T|0)<<18|i>>>14,D^=(i=(M^=(i=(P^=(i=(B^=(i=D+M|0)<<7|i>>>25)+D|0)<<9|i>>>23)+B|0)<<13|i>>>19)+P|0)<<18|i>>>14;_=_+o|0,E=E+s|0,S=S+a|0,k=k+c|0,O=O+u|0,A=A+h|0,C=C+l|0,I=I+d|0,T=T+f|0,R=R+p|0,x=x+g|0,N=N+y|0,B=B+m|0,P=P+b|0,M=M+w|0,D=D+v|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=k>>>0&255,e[13]=k>>>8&255,e[14]=k>>>16&255,e[15]=k>>>24&255,e[16]=O>>>0&255,e[17]=O>>>8&255,e[18]=O>>>16&255,e[19]=O>>>24&255,e[20]=A>>>0&255,e[21]=A>>>8&255,e[22]=A>>>16&255,e[23]=A>>>24&255,e[24]=C>>>0&255,e[25]=C>>>8&255,e[26]=C>>>16&255,e[27]=C>>>24&255,e[28]=I>>>0&255,e[29]=I>>>8&255,e[30]=I>>>16&255,e[31]=I>>>24&255,e[32]=T>>>0&255,e[33]=T>>>8&255,e[34]=T>>>16&255,e[35]=T>>>24&255,e[36]=R>>>0&255,e[37]=R>>>8&255,e[38]=R>>>16&255,e[39]=R>>>24&255,e[40]=x>>>0&255,e[41]=x>>>8&255,e[42]=x>>>16&255,e[43]=x>>>24&255,e[44]=N>>>0&255,e[45]=N>>>8&255,e[46]=N>>>16&255,e[47]=N>>>24&255,e[48]=B>>>0&255,e[49]=B>>>8&255,e[50]=B>>>16&255,e[51]=B>>>24&255,e[52]=P>>>0&255,e[53]=P>>>8&255,e[54]=P>>>16&255,e[55]=P>>>24&255,e[56]=M>>>0&255,e[57]=M>>>8&255,e[58]=M>>>16&255,e[59]=M>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}(e,t,r,n)}function w(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=0;_<20;_+=2)o^=(i=(m^=(i=(f^=(i=(u^=(i=o+m|0)<<7|i>>>25)+o|0)<<9|i>>>23)+u|0)<<13|i>>>19)+f|0)<<18|i>>>14,h^=(i=(s^=(i=(b^=(i=(p^=(i=h+s|0)<<7|i>>>25)+h|0)<<9|i>>>23)+p|0)<<13|i>>>19)+b|0)<<18|i>>>14,g^=(i=(l^=(i=(a^=(i=(w^=(i=g+l|0)<<7|i>>>25)+g|0)<<9|i>>>23)+w|0)<<13|i>>>19)+a|0)<<18|i>>>14,v^=(i=(y^=(i=(d^=(i=(c^=(i=v+y|0)<<7|i>>>25)+v|0)<<9|i>>>23)+c|0)<<13|i>>>19)+d|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,h^=(i=(u^=(i=(d^=(i=(l^=(i=h+u|0)<<7|i>>>25)+h|0)<<9|i>>>23)+l|0)<<13|i>>>19)+d|0)<<18|i>>>14,g^=(i=(p^=(i=(f^=(i=(y^=(i=g+p|0)<<7|i>>>25)+g|0)<<9|i>>>23)+y|0)<<13|i>>>19)+f|0)<<18|i>>>14,v^=(i=(w^=(i=(b^=(i=(m^=(i=v+w|0)<<7|i>>>25)+v|0)<<9|i>>>23)+m|0)<<13|i>>>19)+b|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=h>>>0&255,e[5]=h>>>8&255,e[6]=h>>>16&255,e[7]=h>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=v>>>0&255,e[13]=v>>>8&255,e[14]=v>>>16&255,e[15]=v>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function _(e,t,r,n,i,o,s){var a,c,u=new Uint8Array(16),h=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=o[c];for(;i>=64;){for(b(h,u,s,v),c=0;c<64;c++)e[t+c]=r[n+c]^h[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(b(h,u,s,v),c=0;c<i;c++)e[t+c]=r[n+c]^h[c];return 0}function E(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(b(c,a,i,v),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(b(c,a,i,v),s=0;s<r;s++)e[t+s]=c[s];return 0}function S(e,t,r,n,i){var o=new Uint8Array(32);w(o,n,i,v);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return E(e,t,r,s,o)}function k(e,t,r,n,i,o,s){var a=new Uint8Array(32);w(a,o,s,v);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=o[u+16];return _(e,t,r,n,i,c,a)}var O=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,r,n,i,o){var s=new O(o);return s.update(r,n,i),s.finish(e,t),0}function C(e,t,r,n,i,o){var s=new Uint8Array(16);return A(s,0,r,n,i,o),y(e,t,s,0)}function I(e,t,r,n,i){var o;if(r<32)return-1;for(k(e,0,t,0,r,n,i),A(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function T(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(S(s,0,32,n,i),0!==C(t,16,t,32,r-32,s))return-1;for(k(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function R(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function x(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function N(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function B(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(x(a),x(a),x(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,N(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function P(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return B(r,e),B(n,t),m(r,0,n,0)}function M(e){var t=new Uint8Array(32);return B(t,e),1&t[0]}function D(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function L(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function K(e,t,r){var n,i,o=0,s=0,a=0,c=0,u=0,h=0,l=0,d=0,f=0,p=0,g=0,y=0,m=0,b=0,w=0,v=0,_=0,E=0,S=0,k=0,O=0,A=0,C=0,I=0,T=0,R=0,x=0,N=0,B=0,P=0,M=0,D=r[0],L=r[1],U=r[2],K=r[3],W=r[4],H=r[5],z=r[6],j=r[7],F=r[8],q=r[9],$=r[10],V=r[11],X=r[12],J=r[13],G=r[14],Y=r[15];o+=(n=t[0])*D,s+=n*L,a+=n*U,c+=n*K,u+=n*W,h+=n*H,l+=n*z,d+=n*j,f+=n*F,p+=n*q,g+=n*$,y+=n*V,m+=n*X,b+=n*J,w+=n*G,v+=n*Y,s+=(n=t[1])*D,a+=n*L,c+=n*U,u+=n*K,h+=n*W,l+=n*H,d+=n*z,f+=n*j,p+=n*F,g+=n*q,y+=n*$,m+=n*V,b+=n*X,w+=n*J,v+=n*G,_+=n*Y,a+=(n=t[2])*D,c+=n*L,u+=n*U,h+=n*K,l+=n*W,d+=n*H,f+=n*z,p+=n*j,g+=n*F,y+=n*q,m+=n*$,b+=n*V,w+=n*X,v+=n*J,_+=n*G,E+=n*Y,c+=(n=t[3])*D,u+=n*L,h+=n*U,l+=n*K,d+=n*W,f+=n*H,p+=n*z,g+=n*j,y+=n*F,m+=n*q,b+=n*$,w+=n*V,v+=n*X,_+=n*J,E+=n*G,S+=n*Y,u+=(n=t[4])*D,h+=n*L,l+=n*U,d+=n*K,f+=n*W,p+=n*H,g+=n*z,y+=n*j,m+=n*F,b+=n*q,w+=n*$,v+=n*V,_+=n*X,E+=n*J,S+=n*G,k+=n*Y,h+=(n=t[5])*D,l+=n*L,d+=n*U,f+=n*K,p+=n*W,g+=n*H,y+=n*z,m+=n*j,b+=n*F,w+=n*q,v+=n*$,_+=n*V,E+=n*X,S+=n*J,k+=n*G,O+=n*Y,l+=(n=t[6])*D,d+=n*L,f+=n*U,p+=n*K,g+=n*W,y+=n*H,m+=n*z,b+=n*j,w+=n*F,v+=n*q,_+=n*$,E+=n*V,S+=n*X,k+=n*J,O+=n*G,A+=n*Y,d+=(n=t[7])*D,f+=n*L,p+=n*U,g+=n*K,y+=n*W,m+=n*H,b+=n*z,w+=n*j,v+=n*F,_+=n*q,E+=n*$,S+=n*V,k+=n*X,O+=n*J,A+=n*G,C+=n*Y,f+=(n=t[8])*D,p+=n*L,g+=n*U,y+=n*K,m+=n*W,b+=n*H,w+=n*z,v+=n*j,_+=n*F,E+=n*q,S+=n*$,k+=n*V,O+=n*X,A+=n*J,C+=n*G,I+=n*Y,p+=(n=t[9])*D,g+=n*L,y+=n*U,m+=n*K,b+=n*W,w+=n*H,v+=n*z,_+=n*j,E+=n*F,S+=n*q,k+=n*$,O+=n*V,A+=n*X,C+=n*J,I+=n*G,T+=n*Y,g+=(n=t[10])*D,y+=n*L,m+=n*U,b+=n*K,w+=n*W,v+=n*H,_+=n*z,E+=n*j,S+=n*F,k+=n*q,O+=n*$,A+=n*V,C+=n*X,I+=n*J,T+=n*G,R+=n*Y,y+=(n=t[11])*D,m+=n*L,b+=n*U,w+=n*K,v+=n*W,_+=n*H,E+=n*z,S+=n*j,k+=n*F,O+=n*q,A+=n*$,C+=n*V,I+=n*X,T+=n*J,R+=n*G,x+=n*Y,m+=(n=t[12])*D,b+=n*L,w+=n*U,v+=n*K,_+=n*W,E+=n*H,S+=n*z,k+=n*j,O+=n*F,A+=n*q,C+=n*$,I+=n*V,T+=n*X,R+=n*J,x+=n*G,N+=n*Y,b+=(n=t[13])*D,w+=n*L,v+=n*U,_+=n*K,E+=n*W,S+=n*H,k+=n*z,O+=n*j,A+=n*F,C+=n*q,I+=n*$,T+=n*V,R+=n*X,x+=n*J,N+=n*G,B+=n*Y,w+=(n=t[14])*D,v+=n*L,_+=n*U,E+=n*K,S+=n*W,k+=n*H,O+=n*z,A+=n*j,C+=n*F,I+=n*q,T+=n*$,R+=n*V,x+=n*X,N+=n*J,B+=n*G,P+=n*Y,v+=(n=t[15])*D,s+=38*(E+=n*U),a+=38*(S+=n*K),c+=38*(k+=n*W),u+=38*(O+=n*H),h+=38*(A+=n*z),l+=38*(C+=n*j),d+=38*(I+=n*F),f+=38*(T+=n*q),p+=38*(R+=n*$),g+=38*(x+=n*V),y+=38*(N+=n*X),m+=38*(B+=n*J),b+=38*(P+=n*G),w+=38*(M+=n*Y),o=(n=(o+=38*(_+=n*L))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=h,e[6]=l,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=y,e[12]=m,e[13]=b,e[14]=w,e[15]=v}function W(e,t){K(e,t,t)}function H(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)W(i,i),2!==n&&4!==n&&K(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function z(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)W(i,i),1!==n&&K(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function j(e,r,n){var i,o,s=new Uint8Array(32),a=new Float64Array(80),u=t(),h=t(),l=t(),d=t(),f=t(),p=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,D(a,n),o=0;o<16;o++)h[o]=a[o],d[o]=u[o]=l[o]=0;for(u[0]=d[0]=1,o=254;o>=0;--o)N(u,h,i=s[o>>>3]>>>(7&o)&1),N(l,d,i),L(f,u,l),U(u,u,l),L(l,h,d),U(h,h,d),W(d,f),W(p,u),K(u,l,u),K(l,h,f),L(f,u,l),U(u,u,l),W(h,u),U(l,d,p),K(u,l,c),L(u,u,d),K(l,l,u),K(u,d,p),K(d,h,a),W(h,f),N(u,h,i),N(l,d,i);for(o=0;o<16;o++)a[o+16]=u[o],a[o+32]=l[o],a[o+48]=h[o],a[o+64]=d[o];var g=a.subarray(32),y=a.subarray(16);return H(g,g),K(y,y,g),B(e,y),0}function F(e,t){return j(e,t,o)}function q(e,t){return n(t,32),F(e,t)}function $(e,t,r){var n=new Uint8Array(32);return j(n,r,t),w(e,i,n,v)}O.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,u,h,l,d,f,p,g,y,m,b,w,v,_,E=this.fin?0:2048,S=this.h[0],k=this.h[1],O=this.h[2],A=this.h[3],C=this.h[4],I=this.h[5],T=this.h[6],R=this.h[7],x=this.h[8],N=this.h[9],B=this.r[0],P=this.r[1],M=this.r[2],D=this.r[3],L=this.r[4],U=this.r[5],K=this.r[6],W=this.r[7],H=this.r[8],z=this.r[9];r>=16;)d=l=0,d+=(S+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*B,d+=(k+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*z),d+=(O+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*H),d+=(A+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*W),l=(d+=(C+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*K))>>>13,d&=8191,d+=(I+=a>>>1&8191)*(5*U),d+=(T+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*L),d+=(R+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*D),d+=(x+=8191&(u>>>8|(h=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*M),f=l+=(d+=(N+=h>>>5|E)*(5*P))>>>13,f+=S*P,f+=k*B,f+=O*(5*z),f+=A*(5*H),l=(f+=C*(5*W))>>>13,f&=8191,f+=I*(5*K),f+=T*(5*U),f+=R*(5*L),f+=x*(5*D),l+=(f+=N*(5*M))>>>13,f&=8191,p=l,p+=S*M,p+=k*P,p+=O*B,p+=A*(5*z),l=(p+=C*(5*H))>>>13,p&=8191,p+=I*(5*W),p+=T*(5*K),p+=R*(5*U),p+=x*(5*L),g=l+=(p+=N*(5*D))>>>13,g+=S*D,g+=k*M,g+=O*P,g+=A*B,l=(g+=C*(5*z))>>>13,g&=8191,g+=I*(5*H),g+=T*(5*W),g+=R*(5*K),g+=x*(5*U),y=l+=(g+=N*(5*L))>>>13,y+=S*L,y+=k*D,y+=O*M,y+=A*P,l=(y+=C*B)>>>13,y&=8191,y+=I*(5*z),y+=T*(5*H),y+=R*(5*W),y+=x*(5*K),m=l+=(y+=N*(5*U))>>>13,m+=S*U,m+=k*L,m+=O*D,m+=A*M,l=(m+=C*P)>>>13,m&=8191,m+=I*B,m+=T*(5*z),m+=R*(5*H),m+=x*(5*W),b=l+=(m+=N*(5*K))>>>13,b+=S*K,b+=k*U,b+=O*L,b+=A*D,l=(b+=C*M)>>>13,b&=8191,b+=I*P,b+=T*B,b+=R*(5*z),b+=x*(5*H),w=l+=(b+=N*(5*W))>>>13,w+=S*W,w+=k*K,w+=O*U,w+=A*L,l=(w+=C*D)>>>13,w&=8191,w+=I*M,w+=T*P,w+=R*B,w+=x*(5*z),v=l+=(w+=N*(5*H))>>>13,v+=S*H,v+=k*W,v+=O*K,v+=A*U,l=(v+=C*L)>>>13,v&=8191,v+=I*D,v+=T*M,v+=R*P,v+=x*B,_=l+=(v+=N*(5*z))>>>13,_+=S*z,_+=k*H,_+=O*W,_+=A*K,l=(_+=C*U)>>>13,_&=8191,_+=I*L,_+=T*D,_+=R*M,_+=x*P,S=d=8191&(l=(l=((l+=(_+=N*B)>>>13)<<2)+l|0)+(d&=8191)|0),k=f+=l>>>=13,O=p&=8191,A=g&=8191,C=y&=8191,I=m&=8191,T=b&=8191,R=w&=8191,x=v&=8191,N=_&=8191,t+=16,r-=16;this.h[0]=S,this.h[1]=k,this.h[2]=O,this.h[3]=A,this.h[4]=C,this.h[5]=I,this.h[6]=T,this.h[7]=R,this.h[8]=x,this.h[9]=N},O.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},O.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var V=I,X=T;var J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function G(e,t,r,n){for(var i,o,s,a,c,u,h,l,d,f,p,g,y,m,b,w,v,_,E,S,k,O,A,C,I,T,R=new Int32Array(16),x=new Int32Array(16),N=e[0],B=e[1],P=e[2],M=e[3],D=e[4],L=e[5],U=e[6],K=e[7],W=t[0],H=t[1],z=t[2],j=t[3],F=t[4],q=t[5],$=t[6],V=t[7],X=0;n>=128;){for(E=0;E<16;E++)S=8*E+X,R[E]=r[S+0]<<24|r[S+1]<<16|r[S+2]<<8|r[S+3],x[E]=r[S+4]<<24|r[S+5]<<16|r[S+6]<<8|r[S+7];for(E=0;E<80;E++)if(i=N,o=B,s=P,a=M,c=D,u=L,h=U,K,d=W,f=H,p=z,g=j,y=F,m=q,b=$,V,A=65535&(O=V),C=O>>>16,I=65535&(k=K),T=k>>>16,A+=65535&(O=(F>>>14|D<<18)^(F>>>18|D<<14)^(D>>>9|F<<23)),C+=O>>>16,I+=65535&(k=(D>>>14|F<<18)^(D>>>18|F<<14)^(F>>>9|D<<23)),T+=k>>>16,A+=65535&(O=F&q^~F&$),C+=O>>>16,I+=65535&(k=D&L^~D&U),T+=k>>>16,A+=65535&(O=J[2*E+1]),C+=O>>>16,I+=65535&(k=J[2*E]),T+=k>>>16,k=R[E%16],C+=(O=x[E%16])>>>16,I+=65535&k,T+=k>>>16,I+=(C+=(A+=65535&O)>>>16)>>>16,A=65535&(O=_=65535&A|C<<16),C=O>>>16,I=65535&(k=v=65535&I|(T+=I>>>16)<<16),T=k>>>16,A+=65535&(O=(W>>>28|N<<4)^(N>>>2|W<<30)^(N>>>7|W<<25)),C+=O>>>16,I+=65535&(k=(N>>>28|W<<4)^(W>>>2|N<<30)^(W>>>7|N<<25)),T+=k>>>16,C+=(O=W&H^W&z^H&z)>>>16,I+=65535&(k=N&B^N&P^B&P),T+=k>>>16,l=65535&(I+=(C+=(A+=65535&O)>>>16)>>>16)|(T+=I>>>16)<<16,w=65535&A|C<<16,A=65535&(O=g),C=O>>>16,I=65535&(k=a),T=k>>>16,C+=(O=_)>>>16,I+=65535&(k=v),T+=k>>>16,B=i,P=o,M=s,D=a=65535&(I+=(C+=(A+=65535&O)>>>16)>>>16)|(T+=I>>>16)<<16,L=c,U=u,K=h,N=l,H=d,z=f,j=p,F=g=65535&A|C<<16,q=y,$=m,V=b,W=w,E%16==15)for(S=0;S<16;S++)k=R[S],A=65535&(O=x[S]),C=O>>>16,I=65535&k,T=k>>>16,k=R[(S+9)%16],A+=65535&(O=x[(S+9)%16]),C+=O>>>16,I+=65535&k,T+=k>>>16,v=R[(S+1)%16],A+=65535&(O=((_=x[(S+1)%16])>>>1|v<<31)^(_>>>8|v<<24)^(_>>>7|v<<25)),C+=O>>>16,I+=65535&(k=(v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7),T+=k>>>16,v=R[(S+14)%16],C+=(O=((_=x[(S+14)%16])>>>19|v<<13)^(v>>>29|_<<3)^(_>>>6|v<<26))>>>16,I+=65535&(k=(v>>>19|_<<13)^(_>>>29|v<<3)^v>>>6),T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,R[S]=65535&I|T<<16,x[S]=65535&A|C<<16;A=65535&(O=W),C=O>>>16,I=65535&(k=N),T=k>>>16,k=e[0],C+=(O=t[0])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[0]=N=65535&I|T<<16,t[0]=W=65535&A|C<<16,A=65535&(O=H),C=O>>>16,I=65535&(k=B),T=k>>>16,k=e[1],C+=(O=t[1])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[1]=B=65535&I|T<<16,t[1]=H=65535&A|C<<16,A=65535&(O=z),C=O>>>16,I=65535&(k=P),T=k>>>16,k=e[2],C+=(O=t[2])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[2]=P=65535&I|T<<16,t[2]=z=65535&A|C<<16,A=65535&(O=j),C=O>>>16,I=65535&(k=M),T=k>>>16,k=e[3],C+=(O=t[3])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[3]=M=65535&I|T<<16,t[3]=j=65535&A|C<<16,A=65535&(O=F),C=O>>>16,I=65535&(k=D),T=k>>>16,k=e[4],C+=(O=t[4])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[4]=D=65535&I|T<<16,t[4]=F=65535&A|C<<16,A=65535&(O=q),C=O>>>16,I=65535&(k=L),T=k>>>16,k=e[5],C+=(O=t[5])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[5]=L=65535&I|T<<16,t[5]=q=65535&A|C<<16,A=65535&(O=$),C=O>>>16,I=65535&(k=U),T=k>>>16,k=e[6],C+=(O=t[6])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[6]=U=65535&I|T<<16,t[6]=$=65535&A|C<<16,A=65535&(O=V),C=O>>>16,I=65535&(k=K),T=k>>>16,k=e[7],C+=(O=t[7])>>>16,I+=65535&k,T+=k>>>16,T+=(I+=(C+=(A+=65535&O)>>>16)>>>16)>>>16,e[7]=K=65535&I|T<<16,t[7]=V=65535&A|C<<16,X+=128,n-=128}return n}function Y(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,G(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,p(s,r-8,a/536870912|0,a<<3),G(i,o,s,r),n=0;n<8;n++)p(e,8*n,i[n],o[n]);return 0}function Z(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),u=t(),l=t(),d=t();U(n,e[1],e[0]),U(d,r[1],r[0]),K(n,n,d),L(i,e[0],e[1]),L(d,r[0],r[1]),K(i,i,d),K(o,e[3],r[3]),K(o,o,h),K(s,e[2],r[2]),L(s,s,s),U(a,i,n),U(c,s,o),L(u,s,o),L(l,i,n),K(e[0],a,c),K(e[1],l,u),K(e[2],u,c),K(e[3],a,l)}function Q(e,t,r){var n;for(n=0;n<4;n++)N(e[n],t[n],r)}function ee(e,r){var n=t(),i=t(),o=t();H(o,r[2]),K(n,r[0],o),K(i,r[1],o),B(e,i),e[31]^=M(n)<<7}function te(e,t,r){var n,i;for(R(e[0],s),R(e[1],a),R(e[2],a),R(e[3],s),i=255;i>=0;--i)Q(e,t,n=r[i/8|0]>>(7&i)&1),Z(t,e),Z(e,e),Q(e,t,n)}function re(e,r){var n=[t(),t(),t(),t()];R(n[0],l),R(n[1],d),R(n[2],a),K(n[3],l,d),te(e,n,r)}function ne(e,r,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||n(r,32),Y(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,re(a,s),ee(e,a),o=0;o<32;o++)r[o+32]=e[o];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ie[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ie[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ie[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,r)}function ae(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),h=new Float64Array(64),l=[t(),t(),t(),t()];Y(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(Y(u,e.subarray(32),n+32),se(u),re(l,u),ee(e,l),o=32;o<64;o++)e[o]=i[o];for(Y(c,e,n+64),se(c),o=0;o<64;o++)h[o]=0;for(o=0;o<32;o++)h[o]=u[o];for(o=0;o<32;o++)for(s=0;s<32;s++)h[o+s]+=c[o]*a[s];return oe(e.subarray(32),h),d}function ce(e,r,n,i){var o,c=new Uint8Array(32),h=new Uint8Array(64),l=[t(),t(),t(),t()],d=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),i=t(),o=t(),c=t(),h=t(),l=t(),d=t();return R(e[2],a),D(e[1],r),W(o,e[1]),K(c,o,u),U(o,o,e[2]),L(c,e[2],c),W(h,c),W(l,h),K(d,l,h),K(n,d,o),K(n,n,c),z(n,n),K(n,n,o),K(n,n,c),K(n,n,c),K(e[0],n,c),W(i,e[0]),K(i,i,c),P(i,o)&&K(e[0],e[0],f),W(i,e[0]),K(i,i,c),P(i,o)?-1:(M(e[0])===r[31]>>7&&U(e[0],s,e[0]),K(e[3],e[0],e[1]),0)}(d,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(Y(h,e,n),se(h),te(l,d,h),re(d,r.subarray(32)),Z(l,d),ee(c,l),n-=64,m(r,0,c,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}var ue=16,he=64,le=32,de=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:w,crypto_stream_xor:k,crypto_stream:S,crypto_stream_salsa20_xor:_,crypto_stream_salsa20:E,crypto_onetimeauth:A,crypto_onetimeauth_verify:C,crypto_verify_16:y,crypto_verify_32:m,crypto_secretbox:I,crypto_secretbox_open:T,crypto_scalarmult:j,crypto_scalarmult_base:F,crypto_box_beforenm:$,crypto_box_afternm:V,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return $(s,i,o),V(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return $(s,i,o),X(e,t,r,n,s)},crypto_box_keypair:q,crypto_hash:Y,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:he,crypto_sign_PUBLICKEYBYTES:le,crypto_sign_SECRETKEYBYTES:de,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:u,L:ie,pack25519:B,unpack25519:D,M:K,A:L,S:W,Z:U,pow2523:z,add:Z,set25519:R,modL:oe,scalarmult:te,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return I(i,n,n.length,t,r),i.subarray(ue)},e.secretbox.open=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(ue+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+ue]=e[o];return n.length<32||0!==T(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ue,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return j(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return F(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return $(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return q(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return F(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad secret key size");var r=new Uint8Array(he+e.length);return ae(r,e,e.length,t),r},e.sign.open=function(e,t){if(pe(e,t),t.length!==le)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(he),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),t.length!==he)throw new Error("bad signature size");if(r.length!==le)throw new Error("bad public key size");var n,i=new Uint8Array(he+e.length),o=new Uint8Array(he+e.length);for(n=0;n<he;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+he]=e[n];return ce(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(le),t=new Uint8Array(de);return ne(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==de)throw new Error("bad secret key size");for(var t=new Uint8Array(le),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(le),r=new Uint8Array(de),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=le,e.sign.secretKeyLength=de,e.sign.seedLength=32,e.sign.signatureLength=he,e.hash=function(e){pe(e);var t=new Uint8Array(64);return Y(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}else(t=r(1281))&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},7232:function(e,t,r){var n;!function(i,o){"use strict";var s="function",a="undefined",c="object",u="string",h="major",l="model",d="name",f="type",p="vendor",g="version",y="architecture",m="console",b="mobile",w="tablet",v="smarttv",_="wearable",E="embedded",S="Amazon",k="Apple",O="ASUS",A="BlackBerry",C="Browser",I="Chrome",T="Firefox",R="Google",x="Huawei",N="LG",B="Microsoft",P="Motorola",M="Opera",D="Samsung",L="Sharp",U="Sony",K="Xiaomi",W="Zebra",H="Facebook",z="Chromium OS",j="Mac OS",F=" Browser",q=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},$=function(e,t){return typeof e===u&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},X=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},J=function(e,t){for(var r,n,i,a,u,h,l=0;l<t.length&&!u;){var d=t[l],f=t[l+1];for(r=n=0;r<d.length&&!u&&d[r];)if(u=d[r++].exec(e))for(i=0;i<f.length;i++)h=u[++n],typeof(a=f[i])===c&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,h):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=h?h.replace(a[1],a[2]):o:this[a[0]]=h?a[1].call(this,h,a[2]):o:4===a.length&&(this[a[0]]=h?a[3].call(this,h.replace(a[1],a[2])):o):this[a]=h||o;l+=2}},G=function(e,t){for(var r in t)if(typeof t[r]===c&&t[r].length>0){for(var n=0;n<t[r].length;n++)if($(t[r][n],e))return"?"===r?o:r}else if($(t[r],e))return"?"===r?o:r;return t.hasOwnProperty("*")?t["*"]:e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,g],[/opios[\/ ]+([\w\.]+)/i],[g,[d,M+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[g,[d,M+" GX"]],[/\bopr\/([\w\.]+)/i],[g,[d,M]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[g,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/quark(?:pc)?\/([-\w\.]+)/i],[g,[d,"Quark"]],[/\bddg\/([\w\.]+)/i],[g,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[d,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[g,[d,"Smart Lenovo "+C]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+C],g],[/\bfocus\/([\w\.]+)/i],[g,[d,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[d,M+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,M+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[g,[d,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360"+F]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],g],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+F],g],[/samsungbrowser\/([\w\.]+)/i],[g,[d,D+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],g],[/metasr[\/ ]?([\d\.]+)/i],[g,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,g],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,H],g],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[d,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,I+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[d,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[g,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],g],[/(wolvic)\/([\w\.]+)/i],[d,g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[d,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,[g,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,V]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,D],[f,w]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,D],[f,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[p,k],[f,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,k],[f,w]],[/(macintosh);/i],[l,[p,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,L],[f,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,x],[f,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[p,x],[f,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[p,K],[f,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,K],[f,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[f,b]],[/\b(opd2\d{3}a?) bui/i],[l,[p,"OPPO"],[f,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[f,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[f,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,P],[f,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,P],[f,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,N],[f,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,N],[f,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[f,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[f,b]],[/(pixel c)\b/i],[l,[p,R],[f,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,R],[f,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,U],[f,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,U],[f,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[f,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,S],[f,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,S],[f,b]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[f,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,A],[f,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,O],[f,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,O],[f,b]],[/(nexus 9)/i],[l,[p,"HTC"],[f,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[f,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[p,"TCL"],[f,w]],[/(itel) ((\w+))/i],[[p,V],l,[f,G,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[f,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[f,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[p,"Ulefone"],[f,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[p,"Nothing"],[f,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[f,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[f,w]],[/(surface duo)/i],[l,[p,B],[f,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[f,b]],[/(u304aa)/i],[l,[p,"AT&T"],[f,b]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[f,b]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[f,w]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[f,w]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[f,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[f,w]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[f,w]],[/\b(k88) b/i],[l,[p,"ZTE"],[f,w]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[f,b]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[f,b]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[f,w]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[f,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[f,w]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[f,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[f,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[f,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[f,b]],[/\b(ph-1) /i],[l,[p,"Essential"],[f,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[f,w]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[f,w]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[f,w]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[f,w]],[/(sprint) (\w+)/i],[p,l,[f,b]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,B],[f,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,W],[f,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,W],[f,b]],[/smart-tv.+(samsung)/i],[p,[f,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,D],[f,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,N],[f,v]],[/(apple) ?tv/i],[p,[l,k+" TV"],[f,v]],[/crkey/i],[[l,I+"cast"],[p,R],[f,v]],[/droid.+aft(\w+)( bui|\))/i],[l,[p,S],[f,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[p,L],[f,v]],[/(bravia[\w ]+)( bui|\))/i],[l,[p,U],[f,v]],[/(mitv-\w{5}) bui/i],[l,[p,K],[f,v]],[/Hbbtv.*(technisat) (.*);/i],[p,l,[f,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,X],[l,X],[f,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[f,m]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[f,m]],[/(playstation [345portablevi]+)/i],[l,[p,U],[f,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,B],[f,m]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[p,D],[f,_]],[/((pebble))app/i],[p,l,[f,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[p,k],[f,_]],[/droid.+; (glass) \d/i],[l,[p,R],[f,_]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,W],[f,_]],[/(quest( \d| pro)?)/i],[l,[p,H],[f,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[f,E]],[/(aeobc)\b/i],[l,[p,S],[f,E]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[f,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[f,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,b]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,g],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[g,G,Y]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,G,Y],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,j],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,g],[/\(bb(10);/i],[g,[d,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[d,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[d,I+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,z],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,g],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,g]]},Q=function(e,t){if(typeof e===c&&(t=e,e=o),!(this instanceof Q))return new Q(e,t).getResult();var r=typeof i!==a&&i.navigator?i.navigator:o,n=e||(r&&r.userAgent?r.userAgent:""),m=r&&r.userAgentData?r.userAgentData:o,v=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(Z,t):Z,_=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[d]=o,t[g]=o,J.call(t,n,v.browser),t[h]=typeof(e=t[g])===u?e.replace(/[^\d\.]/g,"").split(".")[0]:o,_&&r&&r.brave&&typeof r.brave.isBrave==s&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[y]=o,J.call(e,n,v.cpu),e},this.getDevice=function(){var e={};return e[p]=o,e[l]=o,e[f]=o,J.call(e,n,v.device),_&&!e[f]&&m&&m.mobile&&(e[f]=b),_&&"Macintosh"==e[l]&&r&&typeof r.standalone!==a&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[l]="iPad",e[f]=w),e},this.getEngine=function(){var e={};return e[d]=o,e[g]=o,J.call(e,n,v.engine),e},this.getOS=function(){var e={};return e[d]=o,e[g]=o,J.call(e,n,v.os),_&&!e[d]&&m&&m.platform&&"Unknown"!=m.platform&&(e[d]=m.platform.replace(/chrome os/i,z).replace(/macos/i,j)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===u&&e.length>500?X(e,500):e,this},this.setUA(n),this};Q.VERSION="1.0.39",Q.BROWSER=q([d,g,h]),Q.CPU=q([y]),Q.DEVICE=q([l,p,f,m,b,v,w,_,E]),Q.ENGINE=Q.OS=q([d,g]),typeof t!==a?(e.exports&&(t=e.exports=Q),t.UAParser=Q):r.amdO?(n=function(){return Q}.call(t,r,t,e))===o||(e.exports=n):typeof i!==a&&(i.UAParser=Q);var ee=typeof i!==a&&(i.jQuery||i.Zepto);if(ee&&!ee.ua){var te=new Q;ee.ua=te.getResult(),ee.ua.get=function(){return te.getUA()},ee.ua.set=function(e){te.setUA(e);var t=te.getResult();for(var r in t)ee.ua[r]=t[r]}}}("object"==typeof window?window:this)},8341:(e,t,r)=>{"use strict";var n;r.d(t,{v4:()=>l});var i=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const a=function(e){return"string"==typeof e&&s.test(e)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(r))throw TypeError("Stringified UUID is invalid");return r};const l=function(e,t,r){var n=(e=e||{}).random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return h(n)}},755:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXSolanaProvider=void 0;const o=r(474),s=i(r(6763)),a=r(5746);class c{getRealChainId(e){if(null==e){if(1==this.chainsSet.size){let e="",t=this.defaultChainMap;if(this.chainsSet.forEach((function(r){t.has(r)&&(e=t.get(r))})),""==e)throw new Error("unsupported chainId");return e}throw new Error("connected to multiple solana chains,chainId can not be null")}if(e.startsWith("svm"))return e;if(this.caip.includes(e))return e;throw new Error("wrong chainId")}getConnectedNamespace(){var e,t,r;null===(r=null===(t=null===(e=this.provider.session)||void 0===e?void 0:e.namespaces)||void 0===t?void 0:t.solana)||void 0===r||r.chains.forEach((e=>{this.chainsSet.add(e.split(":")[0])}))}constructor(e){this.chainsSet=new Set,this.caip=["solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","sonic:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"],this.defaultChainMap=new Map,this.provider=e,this.defaultChainMap.set("solana","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"),this.defaultChainMap.set("sonic","sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"),this.getConnectedNamespace()}signMessage(e,t){return n(this,void 0,void 0,(function*(){var r,n,i;let c=e,u=null;try{const t=s.default.decode(e);try{u=o.Transaction.from(t)}catch(e){u=o.VersionedTransaction.deserialize(t)}}catch(e){}if(null!=u)return new Promise(((e,t)=>{t("Please sign with normal message")}));c="OKX Wallet"==(null===(n=null===(r=this.provider.session)||void 0===r?void 0:r.wallet)||void 0===n?void 0:n.appName)?s.default.encode((new TextEncoder).encode(e)):e,t=this.getRealChainId(t);try{let e={chainId:t,method:"solana_signMessage",params:{message:c,pubkey:null===(i=this.getAccount(t))||void 0===i?void 0:i.address}},r=yield this.provider.request(e,t);if((0,a.logDebug)("signMessage111",r),"result"in r){let e=r.result;return new Promise(((r,n)=>{var i;r({signature:s.default.decode(e),publicKey:null===(i=this.getAccount(t))||void 0===i?void 0:i.address})}))}return(0,a.logDebug)("signMessage111",r),new Promise(((e,t)=>{e(r.error)}))}catch(e){return console.error("方法数据回调失败 --Error--",e),new Promise(((t,r)=>{t(e)}))}}))}getAccount(e){var t,r,n,i;let s=null===(r=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.solana)||void 0===r?void 0:r.accounts[0];if(null!=e&&(s=null===(i=null===(n=this.provider.session)||void 0===n?void 0:n.namespaces.solana)||void 0===i?void 0:i.accounts.filter((function(t){return t.startsWith(e)}))[0]),(0,a.logDebug)("getAccount",s),!s)return;const c=s.split(":")[2];return c?{address:c,publicKey:new o.PublicKey(c)}:void 0}signTransaction(e,t){var r,n;(0,a.logDebug)("OKXSolanaProvider",typeof e),t=this.getRealChainId(t);try{let n=e.serialize({requireAllSignatures:!1,verifySignatures:!1}),i={data:s.default.encode(n),from:null===(r=this.getAccount(t))||void 0===r?void 0:r.address};return this.getSignedTransaction("solana_signTransaction",i,t)}catch(r){let i=e.serialize(),o={data:s.default.encode(i),from:null===(n=this.getAccount(t))||void 0===n?void 0:n.address};return this.getSignedTransaction("solana_signTransaction",o,t)}}signAllTransactions(e,t){return n(this,void 0,void 0,(function*(){t=this.getRealChainId(t);try{var r=e.map((e=>{var r,n;return n=e instanceof o.VersionedTransaction?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1}),{data:s.default.encode(n),from:null===(r=this.getAccount(t))||void 0===r?void 0:r.address}}));const n=yield this.provider.request({method:"solana_signAllTransactions",params:{transactions:r}},t);if("result"in n){let e=n.result,t=JSON.parse(e).map((e=>{let t=s.default.decode(e);try{let e=o.Transaction.from(t);return(0,a.logDebug)("verifySignatures",e.verifySignatures()),e}catch(e){return o.VersionedTransaction.deserialize(t)}}));return new Promise(((e,r)=>{e(t)}))}return new Promise(((e,t)=>{e(n)}))}catch(e){return(0,a.logDebug)("getSignedTransaction",e),new Promise(((t,r)=>{t(e)}))}}))}signAndSendTransaction(e,t){return n(this,void 0,void 0,(function*(){var r,n;t=this.getRealChainId(t);try{let i={};try{let n=e.serialize({requireAllSignatures:!1,verifySignatures:!1});i={data:s.default.encode(n),from:null===(r=this.getAccount(t))||void 0===r?void 0:r.address}}catch(r){let o=e.serialize();i={data:s.default.encode(o),from:null===(n=this.getAccount(t))||void 0===n?void 0:n.address}}let o=yield this.provider.request({method:"solana_signAndSendTransaction",params:i},t);if("result"in o){let e=o.result;return new Promise(((t,r)=>{t(e)}))}return new Promise(((e,t)=>{e(o)}))}catch(e){return(0,a.logDebug)("getSignedTransaction",e),new Promise(((t,r)=>{t(e)}))}}))}getSignedTransaction(e,t,r){return n(this,void 0,void 0,(function*(){try{let n=yield this.provider.request({method:e,params:t},r);if("result"in n){let e,t=n.result,r=s.default.decode(t);try{e=o.Transaction.from(r)}catch(t){e=o.VersionedTransaction.deserialize(r)}return e instanceof o.VersionedTransaction||(0,a.logDebug)("verifySignatures",e.verifySignatures()),new Promise(((t,r)=>{t(e)}))}return new Promise(((e,t)=>{t(n)}))}catch(e){return(0,a.logDebug)("getSignedTransaction",e),new Promise(((t,r)=>{t(e)}))}}))}}t.OKXSolanaProvider=c,t.default=c},9432:()=>{},7790:()=>{},477:()=>{},6443:()=>{},1281:()=>{},2571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CID:()=>Fe,bases:()=>rt,bytes:()=>n,codecs:()=>it,digest:()=>p,hasher:()=>g,hashes:()=>nt,varint:()=>f});var n={};r.r(n),r.d(n,{coerce:()=>O,empty:()=>_,equals:()=>k,fromHex:()=>S,fromString:()=>C,isBinary:()=>A,toHex:()=>E,toString:()=>I});var i={};r.r(i),r.d(i,{identity:()=>D});var o={};r.r(o),r.d(o,{base2:()=>L});var s={};r.r(s),r.d(s,{base8:()=>U});var a={};r.r(a),r.d(a,{base10:()=>K});var c={};r.r(c),r.d(c,{base16:()=>W,base16upper:()=>H});var u={};r.r(u),r.d(u,{base32:()=>z,base32hex:()=>$,base32hexpad:()=>X,base32hexpadupper:()=>J,base32hexupper:()=>V,base32pad:()=>F,base32padupper:()=>q,base32upper:()=>j,base32z:()=>G});var h={};r.r(h),r.d(h,{base36:()=>Y,base36upper:()=>Z});var l={};r.r(l),r.d(l,{base58btc:()=>Q,base58flickr:()=>ee});var d={};r.r(d),r.d(d,{base64:()=>te,base64pad:()=>re,base64url:()=>ne,base64urlpad:()=>ie});var f={};r.r(f),r.d(f,{decode:()=>Ee,encodeTo:()=>Se,encodingLength:()=>ke});var p={};r.r(p),r.d(p,{Digest:()=>Ie,create:()=>Oe,decode:()=>Ae,equals:()=>Ce});var g={};r.r(g),r.d(g,{Hasher:()=>Re,from:()=>Te});var y={};r.r(y),r.d(y,{sha256:()=>Ne,sha512:()=>Be});var m={};r.r(m),r.d(m,{identity:()=>Pe});var b={};r.r(b),r.d(b,{code:()=>Le,decode:()=>Ke,encode:()=>Ue,name:()=>De});var w={};r.r(w),r.d(w,{code:()=>He,decode:()=>je,encode:()=>ze,name:()=>We});const v=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=a*s[d]>>>0,s[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*h+1>>>0,u=new Uint8Array(s);i!==o;){for(var l=t[i],d=0,f=s-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*u[f]>>>0,u[f]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}},_=new Uint8Array(0),E=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),S=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):_},k=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},O=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},A=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),C=e=>(new TextEncoder).encode(e),I=e=>(new TextDecoder).decode(e);class T{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class R{constructor(e,t,r){this.name=e,this.prefix=t,this.baseDecode=r}decode(e){if("string"==typeof e){if(e[0]===this.prefix)return this.baseDecode(e.slice(1));throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}throw Error("Can only multibase decode strings")}or(e){const t={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new x(t)}}class x{constructor(e){this.decoders=e}or(e){const t=e.decoders||{[e.prefix]:e};return new x({...this.decoders,...t})}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}class N{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new T(e,t,r),this.decoder=new R(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const B=({name:e,prefix:t,encode:r,decode:n})=>new N(e,t,r,n),P=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=v(r,t);return B({prefix:e,name:t,encode:n,decode:e=>O(i(e))})},M=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>B({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let t=0;t<o;++t){const o=i[e[t]];if(void 0===o)throw new SyntaxError(`Non-${n} character`);c=c<<r|o,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)}),D=B({prefix:"\0",name:"identity",encode:e=>I(e),decode:e=>C(e)}),L=M({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),U=M({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),K=P({prefix:"9",name:"base10",alphabet:"0123456789"}),W=M({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),H=M({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),z=M({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),j=M({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),F=M({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),q=M({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$=M({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),V=M({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),X=M({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),J=M({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G=M({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Y=P({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Z=P({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Q=P({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ee=P({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),te=M({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),re=M({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ne=M({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ie=M({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var oe=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=ce;)r[n++]=255&t|se,t/=128;for(;t&ae;)r[n++]=255&t|se,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},se=128,ae=-128,ce=Math.pow(2,31);var ue=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&le)<<o:(n&le)*Math.pow(2,o),o+=7}while(n>=he);return e.bytes=s-r,i},he=128,le=127;var de=Math.pow(2,7),fe=Math.pow(2,14),pe=Math.pow(2,21),ge=Math.pow(2,28),ye=Math.pow(2,35),me=Math.pow(2,42),be=Math.pow(2,49),we=Math.pow(2,56),ve=Math.pow(2,63);const _e={encode:oe,decode:ue,encodingLength:function(e){return e<de?1:e<fe?2:e<pe?3:e<ge?4:e<ye?5:e<me?6:e<be?7:e<we?8:e<ve?9:10}},Ee=e=>[_e.decode(e),_e.decode.bytes],Se=(e,t,r=0)=>(_e.encode(e,t,r),t),ke=e=>_e.encodingLength(e),Oe=(e,t)=>{const r=t.byteLength,n=ke(e),i=n+ke(r),o=new Uint8Array(i+r);return Se(e,o,0),Se(r,o,n),o.set(t,i),new Ie(e,r,t,o)},Ae=e=>{const t=O(e),[r,n]=Ee(t),[i,o]=Ee(t.subarray(n)),s=t.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Ie(r,i,s,t)},Ce=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&k(e.bytes,t.bytes);class Ie{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Te=({name:e,code:t,encode:r})=>new Re(e,t,r);class Re{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}async digest(e){if(e instanceof Uint8Array){const t=await this.encode(e);return Oe(this.code,t)}throw Error("Unknown type, must be binary type")}}const xe=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Ne=Te({name:"sha2-256",code:18,encode:xe("SHA-256")}),Be=Te({name:"sha2-512",code:19,encode:xe("SHA-512")}),Pe=Te({name:"identity",code:0,encode:e=>O(e)}),Me=e=>O(e),{name:De,code:Le,encode:Ue,decode:Ke}={name:"raw",code:85,decode:Me,encode:Me},{name:We,code:He,encode:ze,decode:je}={name:"json",code:512,encode:e=>(new TextEncoder).encode(JSON.stringify(e)),decode:e=>JSON.parse((new TextDecoder).decode(e))};class Fe{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Qe,byteLength:Qe,code:Ze,version:Ze,multihash:Ze,bytes:Ze,_baseCache:Qe,asCID:Qe})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==Xe)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Je)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Fe.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Oe(e,t);return Fe.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Ce(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;return 0===r?$e(t,n,e||Q.encoder):Ve(t,n,e||z.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return et(/^0\.0/,tt),!(!e||!e[Ye]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Fe)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new Fe(t,r,n,i||Ge(t,r,n.bytes))}if(null!=e&&!0===e[Ye]){const{version:t,multihash:r,code:n}=e,i=Ae(r);return Fe.create(t,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==Xe)throw new Error(`Version 0 CID must use dag-pb (code: ${Xe}) block encoding`);return new Fe(e,t,r,r.bytes);case 1:{const n=Ge(e,t,r.bytes);return new Fe(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return Fe.create(0,Xe,e)}static createV1(e,t){return Fe.create(1,e,t)}static decode(e){const[t,r]=Fe.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Fe.inspectBytes(e),r=t.size-t.multihashSize,n=O(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),o=new Ie(t.multihashCode,t.digestSize,i,n);return[0===t.version?Fe.createV0(o):Fe.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=Ee(e.subarray(t));return t+=n,r};let n=r(),i=Xe;if(18===n?(n=0,t=0):1===n&&(i=r()),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const o=t,s=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:s,digestSize:a,multihashSize:c-o,size:c}}static parse(e,t){const[r,n]=qe(e,t),i=Fe.decode(n);return i._baseCache.set(r,e),i}}const qe=(e,t)=>{switch(e[0]){case"Q":{const r=t||Q;return[Q.prefix,r.decode(`${Q.prefix}${e}`)]}case Q.prefix:{const r=t||Q;return[Q.prefix,r.decode(e)]}case z.prefix:{const r=t||z;return[z.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},$e=(e,t,r)=>{const{prefix:n}=r;if(n!==Q.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},Ve=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},Xe=112,Je=18,Ge=(e,t,r)=>{const n=ke(e),i=n+ke(t),o=new Uint8Array(i+r.byteLength);return Se(e,o,0),Se(t,o,n),o.set(r,i),o},Ye=Symbol.for("@ipld/js-cid/CID"),Ze={writable:!1,configurable:!1,enumerable:!0},Qe={writable:!1,enumerable:!1,configurable:!1},et=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},tt="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",rt={...i,...o,...s,...a,...c,...u,...h,...l,...d},nt={...y,...m},it={raw:b,json:w}},7870:(e,t,r)=>{"use strict";r.r(t),r.d(t,{toString:()=>Fe});var n={};r.r(n),r.d(n,{identity:()=>I});var i={};r.r(i),r.d(i,{base2:()=>T});var o={};r.r(o),r.d(o,{base8:()=>R});var s={};r.r(s),r.d(s,{base10:()=>x});var a={};r.r(a),r.d(a,{base16:()=>N,base16upper:()=>B});var c={};r.r(c),r.d(c,{base32:()=>P,base32hex:()=>U,base32hexpad:()=>W,base32hexpadupper:()=>H,base32hexupper:()=>K,base32pad:()=>D,base32padupper:()=>L,base32upper:()=>M,base32z:()=>z});var u={};r.r(u),r.d(u,{base36:()=>j,base36upper:()=>F});var h={};r.r(h),r.d(h,{base58btc:()=>q,base58flickr:()=>$});var l={};r.r(l),r.d(l,{base64:()=>V,base64pad:()=>X,base64url:()=>J,base64urlpad:()=>G});var d={};r.r(d),r.d(d,{base256emoji:()=>ee});var f={};r.r(f),r.d(f,{sha256:()=>Oe,sha512:()=>Ae});var p={};r.r(p),r.d(p,{identity:()=>Ie});var g={};r.r(g),r.d(g,{code:()=>Re,decode:()=>Ne,encode:()=>xe,name:()=>Te});var y={};r.r(y),r.d(y,{code:()=>De,decode:()=>Ue,encode:()=>Le,name:()=>Me});var m=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=a*s[d]>>>0,s[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*h+1>>>0,u=new Uint8Array(s);i!==o;){for(var l=t[i],d=0,f=s-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*u[f]>>>0,u[f]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const b=m,w=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class v{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return S(this,e)}}class E{constructor(e){this.decoders=e}or(e){return S(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const S=(e,t)=>new E({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class k{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new v(e,t,r),this.decoder=new _(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const O=({name:e,prefix:t,encode:r,decode:n})=>new k(e,t,r,n),A=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=b(r,t);return O({prefix:e,name:t,encode:n,decode:e=>w(i(e))})},C=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>O({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let t=0;t<o;++t){const o=i[e[t]];if(void 0===o)throw new SyntaxError(`Non-${n} character`);c=c<<r|o,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)}),I=O({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),T=C({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),R=C({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),x=A({prefix:"9",name:"base10",alphabet:"0123456789"}),N=C({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),B=C({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),P=C({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),M=C({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),D=C({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),L=C({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),U=C({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),K=C({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),W=C({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),H=C({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),z=C({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),j=A({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),F=A({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),q=A({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$=A({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),V=C({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),X=C({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J=C({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),G=C({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Z=Y.reduce(((e,t,r)=>(e[r]=t,e)),[]),Q=Y.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const ee=O({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Z[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Q[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var te=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=ie;)r[n++]=255&t|re,t/=128;for(;t&ne;)r[n++]=255&t|re,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},re=128,ne=-128,ie=Math.pow(2,31);var oe=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&ae)<<o:(n&ae)*Math.pow(2,o),o+=7}while(n>=se);return e.bytes=s-r,i},se=128,ae=127;var ce=Math.pow(2,7),ue=Math.pow(2,14),he=Math.pow(2,21),le=Math.pow(2,28),de=Math.pow(2,35),fe=Math.pow(2,42),pe=Math.pow(2,49),ge=Math.pow(2,56),ye=Math.pow(2,63);const me={encode:te,decode:oe,encodingLength:function(e){return e<ce?1:e<ue?2:e<he?3:e<le?4:e<de?5:e<fe?6:e<pe?7:e<ge?8:e<ye?9:10}},be=(e,t,r=0)=>(me.encode(e,t,r),t),we=e=>me.encodingLength(e),ve=(e,t)=>{const r=t.byteLength,n=we(e),i=n+we(r),o=new Uint8Array(i+r);return be(e,o,0),be(r,o,n),o.set(t,i),new _e(e,r,t,o)};class _e{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Ee=({name:e,code:t,encode:r})=>new Se(e,t,r);class Se{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ve(this.code,t):t.then((e=>ve(this.code,e)))}throw Error("Unknown type, must be binary type")}}const ke=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Oe=Ee({name:"sha2-256",code:18,encode:ke("SHA-256")}),Ae=Ee({name:"sha2-512",code:19,encode:ke("SHA-512")}),Ce=w,Ie={code:0,name:"identity",encode:Ce,digest:e=>ve(0,Ce(e))},Te="raw",Re=85,xe=e=>w(e),Ne=e=>w(e),Be=new TextEncoder,Pe=new TextDecoder,Me="json",De=512,Le=e=>Be.encode(JSON.stringify(e)),Ue=e=>JSON.parse(Pe.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Ke={...n,...i,...o,...s,...a,...c,...u,...h,...l,...d};function We(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const He=We("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ze=We("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),je={utf8:He,"utf-8":He,hex:Ke.base16,latin1:ze,ascii:ze,binary:ze,...Ke};function Fe(e,t="utf8"){const r=je[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},9792:e=>{"use strict";e.exports=JSON.parse('{"name":"@okxconnect/core","version":"1.6.1","description":"OKX Connect core","main":"./src/index.js","keywords":["OKXConnect","OKX Connect"],"scripts":{"build":"npx tsc","local":"yarn install && npx tsc","remove":"rm -rf ./src  && rm -rf ./node_modules"},"author":"OKX Wallet","license":"MIT","dependencies":{"@stablelib/ed25519":"^1.0.2","@stablelib/random":"^1.0.1","@stablelib/sha256":"1.0.1","core-js":"2.6.12","cross-fetch":"^4.0.0","crypto-js":"^4.2.0","eventemitter3":"^5.0.1","isutf8":"^4.0.0","localforage":"^1.10.0","multiformats":"9.4.2","process":"^0.11.10","tweetnacl":"^1.0.3","tweetnacl-util":"^0.15.1","ua-parser-js":"^1.0.35","uint8arrays":"3.1.0"},"devDependencies":{"@types/crypto-js":"^4.2.2","@types/ua-parser-js":"^0.7.36","assert":"^2.1.0","eslint":"^9.7.0","events":"^3.3.0","jest":"^29.7.0","ts-loader":"^9.5.1","typescript":"^5.5.2"}}')}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n={};(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.OKXSolanaProvider=void 0;var t=r(755);Object.defineProperty(e,"OKXSolanaProvider",{enumerable:!0,get:function(){return t.OKXSolanaProvider}})})(),OKXConnectSolana=n})();